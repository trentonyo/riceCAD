const t={DEFAULT:{buttons:["PAD_FACE_1","PAD_FACE_2","PAD_FACE_3","PAD_FACE_4","PAD_L_SHOULDER_1","PAD_R_SHOULDER_1","PAD_L_SHOULDER_2","PAD_R_SHOULDER_2","PAD_SELECT","PAD_START","PAD_L_STICK_BUTTON","PAD_R_STICK_BUTTON","PAD_UP","PAD_DOWN","PAD_LEFT","PAD_RIGHT","PAD_VENDOR"],axes:["PAD_L_STICK_X","PAD_L_STICK_Y","PAD_R_STICK_X","PAD_R_STICK_Y"]},PS3:{buttons:["PAD_FACE_1","PAD_FACE_2","PAD_FACE_4","PAD_FACE_3","PAD_L_SHOULDER_1","PAD_R_SHOULDER_1","PAD_L_SHOULDER_2","PAD_R_SHOULDER_2","PAD_SELECT","PAD_START","PAD_L_STICK_BUTTON","PAD_R_STICK_BUTTON","PAD_UP","PAD_DOWN","PAD_LEFT","PAD_RIGHT","PAD_VENDOR"],axes:["PAD_L_STICK_X","PAD_L_STICK_Y","PAD_R_STICK_X","PAD_R_STICK_Y"]}},_={"Product: 0268":"PS3"};class e{constructor(){this.gamepadsSupported=!!navigator.getGamepads||!!navigator.webkitGetGamepads,this.current=[],this.previous=[],this.deadZone=.25}update(){for(let t=0,_=this.current.length;t<_;t++){const _=this.current[t].pad.buttons,e=_.length;for(let s=0;s<e;s++)void 0===this.previous[t]&&(this.previous[t]=[]),this.previous[t][s]=_[s].pressed}this.poll(this.current)}poll(t=[]){if(t.length>0&&(t.length=0),this.gamepadsSupported){const _=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads();for(let e=0,s=_.length;e<s;e++)_[e]&&t.push({map:this.getMap(_[e]),pad:_[e]})}return t}getMap(e){for(const s in _)if(e.id.indexOf(s)>=0)return t[_[s]];return t.DEFAULT}isPressed(t,_){if(!this.current[t])return!1;const e=this.current[t].map.buttons[_];return this.current[t].pad.buttons[pc[e]].pressed}wasPressed(t,_){if(!this.current[t])return!1;const e=this.current[t].map.buttons[_],s=pc[e];return this.current[t].pad.buttons[s].pressed&&!(this.previous[t]&&this.previous[t][s])}wasReleased(t,_){if(!this.current[t])return!1;const e=this.current[t].map.buttons[_],s=pc[e];return!this.current[t].pad.buttons[s].pressed&&this.previous[t]&&this.previous[t][s]}getAxis(t,_){if(!this.current[t])return 0;const e=this.current[t].map.axes[_];let s=this.current[t].pad.axes[pc[e]];return Math.abs(s)<this.deadZone&&(s=0),s}}export{e as GamePads};
