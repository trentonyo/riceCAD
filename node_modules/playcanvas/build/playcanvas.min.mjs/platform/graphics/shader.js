import"../../core/tracing.js";import{Preprocessor as t}from"../../core/preprocessor.js";let i=0;class e{constructor(e,s){this.meshUniformBufferFormat=void 0,this.meshBindGroupFormat=void 0,this.id=i++,this.device=e,this.definition=s,this.name=s.name||"Untitled",s.vshader=t.run(s.vshader),s.fshader=t.run(s.fshader),this.init(),this.impl=e.createShaderImpl(this)}init(){this.ready=!1,this.failed=!1}destroy(){this.device.onDestroyShader(this),this.impl.destroy(this)}loseContext(){this.init(),this.impl.loseContext()}restoreContext(){this.impl.restoreContext(this.device,this)}}export{e as Shader};
