class c{constructor(){this._callbacks={},this._callbackActive={}}initEventHandler(){this._callbacks={},this._callbackActive={}}_addCallback(c,l,a,t=!1){c&&"string"==typeof c&&l&&(this._callbacks[c]||(this._callbacks[c]=[]),this._callbackActive[c]&&this._callbackActive[c]===this._callbacks[c]&&(this._callbackActive[c]=this._callbackActive[c].slice()),this._callbacks[c].push({callback:l,scope:a||this,once:t}))}on(c,l,a){return this._addCallback(c,l,a,!1),this}off(c,l,a){if(c)this._callbackActive[c]&&this._callbackActive[c]===this._callbacks[c]&&(this._callbackActive[c]=this._callbackActive[c].slice());else for(const c in this._callbackActive)this._callbacks[c]&&this._callbacks[c]===this._callbackActive[c]&&(this._callbackActive[c]=this._callbackActive[c].slice());if(c)if(l){const t=this._callbacks[c];if(!t)return this;let i=t.length;for(let c=0;c<i;c++)t[c].callback===l&&(a&&t[c].scope!==a||(t[c--]=t[--i]));t.length=i}else this._callbacks[c]&&(this._callbacks[c]=[]);else this._callbacks={};return this}fire(c,l,a,t,i,s,e,h,b){if(!c||!this._callbacks[c])return this;let k;this._callbackActive[c]?(this._callbackActive[c]===this._callbacks[c]&&(this._callbackActive[c]=this._callbackActive[c].slice()),k=this._callbacks[c].slice()):this._callbackActive[c]=this._callbacks[c];for(let _=0;(k||this._callbackActive[c])&&_<(k||this._callbackActive[c]).length;_++){const n=(k||this._callbackActive[c])[_];if(n.callback.call(n.scope,l,a,t,i,s,e,h,b),n.once){const l=this._callbacks[c],a=l?l.indexOf(n):-1;-1!==a&&(this._callbackActive[c]===l&&(this._callbackActive[c]=this._callbackActive[c].slice()),this._callbacks[c].splice(a,1))}}return k||(this._callbackActive[c]=null),this}once(c,l,a){return this._addCallback(c,l,a,!0),this}hasEvent(c){return this._callbacks[c]&&0!==this._callbacks[c].length||!1}}export{c as EventHandler};
