import{version as e,revision as t}from"../core/core.js";import{string as r}from"../core/string.js";import{now as o,Timer as n}from"../core/time.js";import"../core/tracing.js";import{math as i}from"../core/math/math.js";import{Color as s}from"../core/math/color.js";import{Mat4 as a}from"../core/math/mat4.js";import{Vec2 as p}from"../core/math/vec2.js";import{Vec3 as c}from"../core/math/vec3.js";import{Vec4 as m}from"../core/math/vec4.js";import{BoundingBox as f}from"../core/shape/bounding-box.js";import{BoundingSphere as l}from"../core/shape/bounding-sphere.js";import{Frustum as u}from"../core/shape/frustum.js";import{Plane as d}from"../core/shape/plane.js";import{TYPE_INT8 as h,TYPE_UINT8 as y,TYPE_INT16 as E,TYPE_UINT16 as _,TYPE_INT32 as g,TYPE_UINT32 as T,TYPE_FLOAT32 as I,ADDRESS_CLAMP_TO_EDGE as L,ADDRESS_MIRRORED_REPEAT as j,ADDRESS_REPEAT as b,BLENDMODE_ZERO as S,BLENDMODE_ONE as A,BLENDMODE_SRC_COLOR as C,BLENDMODE_ONE_MINUS_SRC_COLOR as M,BLENDMODE_DST_COLOR as N,BLENDMODE_ONE_MINUS_DST_COLOR as O,BLENDMODE_SRC_ALPHA as R,BLENDMODE_SRC_ALPHA_SATURATE as P,BLENDMODE_ONE_MINUS_SRC_ALPHA as D,BLENDMODE_DST_ALPHA as v,BLENDMODE_ONE_MINUS_DST_ALPHA as w,BUFFER_STATIC as F,BUFFER_DYNAMIC as B,BUFFER_STREAM as x,CULLFACE_NONE as k,CULLFACE_BACK as V,CULLFACE_FRONT as U,CULLFACE_FRONTANDBACK as G,FILTER_NEAREST as X,FILTER_LINEAR as W,FILTER_NEAREST_MIPMAP_NEAREST as K,FILTER_NEAREST_MIPMAP_LINEAR as H,FILTER_LINEAR_MIPMAP_NEAREST as Y,FILTER_LINEAR_MIPMAP_LINEAR as z,INDEXFORMAT_UINT8 as Q,INDEXFORMAT_UINT16 as q,INDEXFORMAT_UINT32 as J,PIXELFORMAT_R5_G6_B5 as Z,PIXELFORMAT_R8_G8_B8 as $,PIXELFORMAT_R8_G8_B8_A8 as ee,PRIMITIVE_POINTS as te,PRIMITIVE_LINES as re,PRIMITIVE_LINELOOP as oe,PRIMITIVE_LINESTRIP as ne,PRIMITIVE_TRIANGLES as ie,PRIMITIVE_TRISTRIP as se,PRIMITIVE_TRIFAN as ae,SEMANTIC_POSITION as pe,SEMANTIC_NORMAL as ce,SEMANTIC_COLOR as me,SEMANTIC_TEXCOORD as fe,SEMANTIC_TEXCOORD0 as le,SEMANTIC_TEXCOORD1 as ue,SEMANTIC_ATTR0 as de,SEMANTIC_ATTR1 as he,SEMANTIC_ATTR2 as ye,SEMANTIC_ATTR3 as Ee,TEXTURELOCK_READ as _e,TEXTURELOCK_WRITE as ge,TEXTURETYPE_RGBM as Te,TEXTURETYPE_DEFAULT as Ie,TEXTURETYPE_SWIZZLEGGGR as Le}from"../platform/graphics/constants.js";import{begin as je,end as be,fogCode as Se,gammaCode as Ae,skinCode as Ce,tonemapCode as Me}from"../scene/shader-lib/programs/common.js";import{drawQuadWithShader as Ne}from"../platform/graphics/simple-post-effect.js";import{shaderChunks as Oe}from"../scene/shader-lib/chunks/chunks.js";import{GraphicsDevice as Re}from"../platform/graphics/graphics-device.js";import{IndexBuffer as Pe}from"../platform/graphics/index-buffer.js";import{createFullscreenQuad as De,drawFullscreenQuad as ve,PostEffect as we}from"../scene/graphics/post-effect.js";import{PostEffectQueue as Fe}from"../framework/components/camera/post-effect-queue.js";import{ProgramLibrary as Be}from"../scene/shader-lib/program-library.js";import{getProgramLibrary as xe,setProgramLibrary as ke}from"../scene/shader-lib/get-program-library.js";import{RenderTarget as Ve}from"../platform/graphics/render-target.js";import{ScopeId as Ue}from"../platform/graphics/scope-id.js";import{Shader as Ge}from"../platform/graphics/shader.js";import{ShaderInput as Xe}from"../platform/graphics/shader-input.js";import{Texture as We}from"../platform/graphics/texture.js";import{VertexBuffer as Ke}from"../platform/graphics/vertex-buffer.js";import{VertexFormat as He}from"../platform/graphics/vertex-format.js";import{VertexIterator as Ye}from"../platform/graphics/vertex-iterator.js";import{LAYERID_WORLD as ze,LAYERID_IMMEDIATE as Qe,LINEBATCH_OVERLAY as qe,PROJECTION_ORTHOGRAPHIC as Je,PROJECTION_PERSPECTIVE as Ze}from"../scene/constants.js";import{calculateTangents as $e,createMesh as et,createTorus as tt,createCylinder as rt,createCapsule as ot,createCone as nt,createSphere as it,createPlane as st,createBox as at}from"../scene/procedural.js";import{partitionSkin as pt}from"../scene/skin-partition.js";import{BasicMaterial as ct}from"../scene/materials/basic-material.js";import{ForwardRenderer as mt}from"../scene/renderer/forward-renderer.js";import{GraphNode as ft}from"../scene/graph-node.js";import{Material as lt}from"../scene/materials/material.js";import{Mesh as ut}from"../scene/mesh.js";import{Morph as dt}from"../scene/morph.js";import{Command as ht,MeshInstance as yt}from"../scene/mesh-instance.js";import{Model as Et}from"../scene/model.js";import{ParticleEmitter as _t}from"../scene/particle-system/particle-emitter.js";import{Picker as gt}from"../framework/graphics/picker.js";import{Scene as Tt}from"../scene/scene.js";import{Skin as It}from"../scene/skin.js";import{SkinInstance as Lt}from"../scene/skin-instance.js";import{StandardMaterial as jt}from"../scene/materials/standard-material.js";import{Batch as bt}from"../scene/batching/batch.js";import{getDefaultMaterial as St}from"../scene/materials/default-material.js";import{Animation as At,Key as Ct,Node as Mt}from"../scene/animation/animation.js";import{Skeleton as Nt}from"../scene/animation/skeleton.js";import{Channel as Ot}from"../platform/audio/channel.js";import{Channel3d as Rt}from"../platform/audio/channel3d.js";import{Listener as Pt}from"../platform/sound/listener.js";import{Sound as Dt}from"../platform/sound/sound.js";import{SoundManager as vt}from"../platform/sound/manager.js";import{AssetRegistry as wt}from"../framework/asset/asset-registry.js";import{XrInputSource as Ft}from"../framework/xr/xr-input-source.js";import{Controller as Bt}from"../platform/input/controller.js";import{ElementInput as xt}from"../framework/input/element-input.js";import{GamePads as kt}from"../platform/input/game-pads.js";import{Keyboard as Vt}from"../platform/input/keyboard.js";import{KeyboardEvent as Ut}from"../platform/input/keyboard-event.js";import{Mouse as Gt}from"../platform/input/mouse.js";import{MouseEvent as Xt}from"../platform/input/mouse-event.js";import{TouchDevice as Wt}from"../platform/input/touch-device.js";import{getTouchTargetCoords as Kt,Touch as Ht,TouchEvent as Yt}from"../platform/input/touch-event.js";import{FILLMODE_NONE as zt,FILLMODE_FILL_WINDOW as Qt,FILLMODE_KEEP_ASPECT as qt,RESOLUTION_AUTO as Jt,RESOLUTION_FIXED as Zt}from"../framework/constants.js";import{Application as $t}from"../framework/application.js";import{getApplication as er}from"../framework/globals.js";import{CameraComponent as tr}from"../framework/components/camera/component.js";import{Component as rr}from"../framework/components/component.js";import{ComponentSystem as or}from"../framework/components/system.js";import{Entity as nr}from"../framework/entity.js";import{LightComponent as ir}from"../framework/components/light/component.js";import{ModelComponent as sr}from"../framework/components/model/component.js";import{RenderComponent as ar}from"../framework/components/render/component.js";import{BODYTYPE_STATIC as pr,BODYTYPE_DYNAMIC as cr,BODYTYPE_KINEMATIC as mr,BODYFLAG_STATIC_OBJECT as fr,BODYFLAG_KINEMATIC_OBJECT as lr,BODYFLAG_NORESPONSE_OBJECT as ur,BODYSTATE_ACTIVE_TAG as dr,BODYSTATE_ISLAND_SLEEPING as hr,BODYSTATE_WANTS_DEACTIVATION as yr,BODYSTATE_DISABLE_DEACTIVATION as Er,BODYSTATE_DISABLE_SIMULATION as _r}from"../framework/components/rigid-body/constants.js";import{RigidBodyComponent as gr}from"../framework/components/rigid-body/component.js";import{RigidBodyComponentSystem as Tr}from"../framework/components/rigid-body/system.js";import{basisInitialize as Ir}from"../framework/handlers/basis.js";import{ShaderUtils as Lr}from"../platform/graphics/shader-utils.js";const jr={write:function(e){console.log(e)},open:function(){jr.write("Powered by PlayCanvas "+e+" "+t)},info:function(e){console.info("INFO:    "+e)},debug:function(e){console.debug("DEBUG:   "+e)},error:function(e){console.error("ERROR:   "+e)},warning:function(e){console.warn("WARNING: "+e)},alert:function(e){jr.write("ALERT:   "+e),alert(e)},assert:function(e,t){!1===e&&jr.write("ASSERT:  "+t)}};r.endsWith=function(e,t){return e.endsWith(t)},r.startsWith=function(e,t){return e.startsWith(t)};const br={now:o,Timer:n};function Sr(e,t){const r=function(){},o=function(r,o,n,i,s,a,p,c){t.call(this,r,o,n,i,s,a,p,c),e.call(this,r,o,n,i,s,a,p,c)};return o._super=t.prototype,r.prototype=t.prototype,o.prototype=new r,o}function Ar(e){return Array.prototype.slice.call(e)}Object.defineProperty(s.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.r,this._data[1]=this.g,this._data[2]=this.b,this._data[3]=this.a,this._data}}),Object.defineProperty(s.prototype,"data3",{get:function(){return this._data3||(this._data3=new Float32Array(3)),this._data3[0]=this.r,this._data3[1]=this.g,this._data3[2]=this.b,this._data3}}),i.INV_LOG2=Math.LOG2E,i.intToBytes=i.intToBytes32,i.bytesToInt=i.bytesToInt32,Object.defineProperty(p.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(2)),this._data[0]=this.x,this._data[1]=this.y,this._data}}),p.prototype.scale=p.prototype.mulScalar,Object.defineProperty(c.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(3)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data}}),c.prototype.scale=c.prototype.mulScalar,Object.defineProperty(m.prototype,"data",{get:function(){return this._data||(this._data=new Float32Array(4)),this._data[0]=this.x,this._data[1]=this.y,this._data[2]=this.z,this._data[3]=this.w,this._data}}),m.prototype.scale=m.prototype.mulScalar;const Cr={Aabb:f,Sphere:l,Plane:d};l.prototype.intersectRay=l.prototype.intersectsRay,u.prototype.update=function(e,t){const r=new a;r.mul2(e,t),this.setFromMat4(r)};const Mr=h,Nr=y,Or=E,Rr=_,Pr=g,Dr=T,vr=I;function wr(e){this.name="UnsupportedBrowserError",this.message=e||""}function Fr(e){this.name="ContextCreationError",this.message=e||""}wr.prototype=Error.prototype,Fr.prototype=Error.prototype;const Br={begin:je,dummyFragmentCode:Lr.dummyFragmentCode,end:be,fogCode:Se,gammaCode:Ae,precisionCode:Lr.precisionCode,skinCode:Ce,tonemapCode:Me,versionCode:Lr.versionCode},xr={ADDRESS_CLAMP_TO_EDGE:L,ADDRESS_MIRRORED_REPEAT:j,ADDRESS_REPEAT:b,BLENDMODE_ZERO:S,BLENDMODE_ONE:A,BLENDMODE_SRC_COLOR:C,BLENDMODE_ONE_MINUS_SRC_COLOR:M,BLENDMODE_DST_COLOR:N,BLENDMODE_ONE_MINUS_DST_COLOR:O,BLENDMODE_SRC_ALPHA:R,BLENDMODE_SRC_ALPHA_SATURATE:P,BLENDMODE_ONE_MINUS_SRC_ALPHA:D,BLENDMODE_DST_ALPHA:v,BLENDMODE_ONE_MINUS_DST_ALPHA:w,BUFFER_STATIC:F,BUFFER_DYNAMIC:B,BUFFER_STREAM:x,CULLFACE_NONE:k,CULLFACE_BACK:V,CULLFACE_FRONT:U,CULLFACE_FRONTANDBACK:G,ELEMENTTYPE_INT8:h,ELEMENTTYPE_UINT8:y,ELEMENTTYPE_INT16:E,ELEMENTTYPE_UINT16:_,ELEMENTTYPE_INT32:g,ELEMENTTYPE_UINT32:T,ELEMENTTYPE_FLOAT32:I,FILTER_NEAREST:X,FILTER_LINEAR:W,FILTER_NEAREST_MIPMAP_NEAREST:K,FILTER_NEAREST_MIPMAP_LINEAR:H,FILTER_LINEAR_MIPMAP_NEAREST:Y,FILTER_LINEAR_MIPMAP_LINEAR:z,INDEXFORMAT_UINT8:Q,INDEXFORMAT_UINT16:q,INDEXFORMAT_UINT32:J,PIXELFORMAT_R5_G6_B5:Z,PIXELFORMAT_R8_G8_B8:$,PIXELFORMAT_R8_G8_B8_A8:ee,PRIMITIVE_POINTS:te,PRIMITIVE_LINES:re,PRIMITIVE_LINELOOP:oe,PRIMITIVE_LINESTRIP:ne,PRIMITIVE_TRIANGLES:ie,PRIMITIVE_TRISTRIP:se,PRIMITIVE_TRIFAN:ae,SEMANTIC_POSITION:pe,SEMANTIC_NORMAL:ce,SEMANTIC_COLOR:me,SEMANTIC_TEXCOORD:fe,SEMANTIC_TEXCOORD0:le,SEMANTIC_TEXCOORD1:ue,SEMANTIC_ATTR0:de,SEMANTIC_ATTR1:he,SEMANTIC_ATTR2:ye,SEMANTIC_ATTR3:Ee,TEXTURELOCK_READ:_e,TEXTURELOCK_WRITE:ge,drawQuadWithShader:Ne,programlib:Br,shaderChunks:Oe,ContextCreationError:Fr,Device:Re,IndexBuffer:Pe,ProgramLibrary:Be,RenderTarget:Ve,ScopeId:Ue,Shader:Ge,ShaderInput:Xe,Texture:We,UnsupportedBrowserError:wr,VertexBuffer:Ke,VertexFormat:He,VertexIterator:Ye},kr={createFullscreenQuad:De,drawFullscreenQuad:ve,PostEffect:we,PostEffectQueue:Fe};Object.defineProperty(Oe,"transformSkinnedVS",{get:function(){return"#define SKIN\n"+Oe.transformVS}});const Vr={"ambientPrefilteredCube.frag":"ambientEnv.frag","ambientPrefilteredCubeLod.frag":"ambientEnv.frag","dpAtlasQuad.frag":null,"genParaboloid.frag":null,"prefilterCubemap.frag":null,"reflectionDpAtlas.frag":"reflectionEnv.frag","reflectionPrefilteredCube.frag":"reflectionEnv.frag","reflectionPrefilteredCubeLod.frag":"reflectionEnv.frag"};Object.keys(Vr).forEach((e=>{Object.defineProperty(Oe,e,{get:function(){return null},set:function(){}})})),Object.defineProperties(Ve.prototype,{_glFrameBuffer:{get:function(){return this.impl._glFrameBuffer},set:function(e){}}}),He.prototype.update=function(){},Object.defineProperties(We.prototype,{rgbm:{get:function(){return this.type===Te},set:function(e){this.type=e?Te:Ie}},swizzleGGGR:{get:function(){return this.type===Le},set:function(e){this.type=e?Le:Ie}},_glTexture:{get:function(){return this.impl._glTexture}}}),Re.prototype.getProgramLibrary=function(){return xe(this)},Re.prototype.setProgramLibrary=function(e){ke(this,e)},Re.prototype.removeShaderFromCache=function(e){xe(this).removeFromCache(e)};const Ur=jt,Gr={partitionSkin:pt,procedural:{calculateTangents:$e,createMesh:et,createTorus:tt,createCylinder:rt,createCapsule:ot,createCone:nt,createSphere:it,createPlane:st,createBox:at},BasicMaterial:ct,Command:ht,ForwardRenderer:mt,GraphNode:ft,Material:lt,Mesh:ut,MeshInstance:yt,Model:Et,ParticleEmitter:_t,PhongMaterial:jt,Picker:gt,Projection:{ORTHOGRAPHIC:Je,PERSPECTIVE:Ze},Scene:Tt,Skin:It,SkinInstance:Lt};function Xr(e,t){Object.defineProperty(jt.prototype,t,{get:function(){return this[e]},set:function(t){this[e]=t}})}Object.defineProperty(Tt.prototype,"defaultMaterial",{get:function(){return St(er().graphicsDevice)}}),["128","64","32","16","8","4"].forEach(((e,t)=>{Object.defineProperty(Tt.prototype,`skyboxPrefiltered${e}`,{get:function(){return this._prefilteredCubemaps[t]},set:function(e){this._prefilteredCubemaps[t]=e,this.updateShaders=!0}})})),Object.defineProperty(Tt.prototype,"models",{get:function(){return this._models||(this._models=[]),this._models}}),Tt.prototype._updateSkybox=function(e){this._updateSky(e)},Tt.prototype.addModel=function(e){if(this.containsModel(e))return;const t=this.layers.getLayerById(ze);t&&(t.addMeshInstances(e.meshInstances),this.models.push(e))},Tt.prototype.addShadowCaster=function(e){const t=this.layers.getLayerById(ze);t&&t.addShadowCasters(e.meshInstances)},Tt.prototype.removeModel=function(e){const t=this.models.indexOf(e);if(-1!==t){const r=this.layers.getLayerById(ze);if(!r)return;r.removeMeshInstances(e.meshInstances),this.models.splice(t,1)}},Tt.prototype.removeShadowCasters=function(e){const t=this.layers.getLayerById(ze);t&&t.removeShadowCasters(e.meshInstances)},Tt.prototype.containsModel=function(e){return this.models.indexOf(e)>=0},Tt.prototype.getModels=function(e){return this.models},Object.defineProperty(bt.prototype,"model",{get:function(){return null}}),mt.prototype.renderComposition=function(e){er().renderComposition(e)},mt.prototype.updateShader=function(e,t,r,o,n){const i=e.material._scene||er().scene;return e.updatePassShader(i,o,r,n)},yt.prototype.syncAabb=function(){},dt.prototype.getTarget=function(e){return this.targets[e]},ft.prototype._dirtify=function(e){e?this._dirtifyLocal():this._dirtifyWorld()},ft.prototype.addLabel=function(e){this._labels[e]=!0},ft.prototype.getLabels=function(){return Object.keys(this._labels)},ft.prototype.hasLabel=function(e){return!!this._labels[e]},ft.prototype.removeLabel=function(e){delete this._labels[e]},ft.prototype.findByLabel=function(e,t=[]){this.hasLabel(e)&&t.push(this);for(let r=0;r<this._children.length;++r)t=this._children[r].findByLabel(e,t);return t},ft.prototype.getChildren=function(){return this.children},ft.prototype.getName=function(){return this.name},ft.prototype.getPath=function(){return this.path},ft.prototype.getRoot=function(){return this.root},ft.prototype.getParent=function(){return this.parent},ft.prototype.setName=function(e){this.name=e},lt.prototype.getName=function(){return this.name},lt.prototype.setName=function(e){this.name=e},lt.prototype.getShader=function(){return this.shader},lt.prototype.setShader=function(e){this.shader=e},Xr("diffuseTint","diffuseMapTint"),Xr("specularTint","specularMapTint"),Xr("emissiveTint","emissiveMapTint"),Xr("aoVertexColor","aoMapVertexColor"),Xr("diffuseVertexColor","diffuseMapVertexColor"),Xr("specularVertexColor","specularMapVertexColor"),Xr("emissiveVertexColor","emissiveMapVertexColor"),Xr("metalnessVertexColor","metalnessMapVertexColor"),Xr("glossVertexColor","glossMapVertexColor"),Xr("opacityVertexColor","opacityMapVertexColor"),Xr("lightVertexColor","lightMapVertexColor");const Wr={Animation:At,Key:Ct,Node:Mt,Skeleton:Nt};At.prototype.getDuration=function(){return this.duration},At.prototype.getName=function(){return this.name},At.prototype.getNodes=function(){return this.nodes},At.prototype.setDuration=function(e){this.duration=e},At.prototype.setName=function(e){this.name=e},Nt.prototype.getAnimation=function(){return this.animation},Nt.prototype.getCurrentTime=function(){return this.currentTime},Nt.prototype.getLooping=function(){return this.looping},Nt.prototype.getNumNodes=function(){return this.numNodes},Nt.prototype.setAnimation=function(e){this.animation=e},Nt.prototype.setCurrentTime=function(e){this.currentTime=e},Nt.prototype.setLooping=function(e){this.looping=e};const Kr={AudioManager:vt,Channel:Ot,Channel3d:Rt,Listener:Pt,Sound:Dt};vt.prototype.getListener=function(){return this.listener},vt.prototype.getVolume=function(){return this.volume},vt.prototype.setVolume=function(e){this.volume=e};const Hr={ASSET_ANIMATION:"animation",ASSET_AUDIO:"audio",ASSET_IMAGE:"image",ASSET_JSON:"json",ASSET_MODEL:"model",ASSET_MATERIAL:"material",ASSET_TEXT:"text",ASSET_TEXTURE:"texture",ASSET_CUBEMAP:"cubemap",ASSET_SCRIPT:"script"};wt.prototype.getAssetById=function(e){return this.get(e)},Object.defineProperty(Ft.prototype,"ray",{get:function(){return this._rayLocal}}),Object.defineProperty(Ft.prototype,"position",{get:function(){return this._localPosition}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return this._localRotation}});const Yr={getTouchTargetCoords:Kt,Controller:Bt,GamePads:kt,Keyboard:Vt,KeyboardEvent:Ut,Mouse:Gt,MouseEvent:Xt,Touch:Ht,TouchDevice:Wt,TouchEvent:Yt};Object.defineProperty(xt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}}),Object.defineProperty(Xt.prototype,"wheel",{get:function(){return-2*this.wheelDelta}});const zr=pr,Qr=cr,qr=mr,Jr=fr,Zr=lr,$r=ur,eo=dr,to=hr,ro=yr,oo=Er,no=_r,io={Application:$t,Component:rr,ComponentSystem:or,Entity:nr,FillMode:{NONE:zt,FILL_WINDOW:Qt,KEEP_ASPECT:qt},ResolutionMode:{AUTO:Jt,FIXED:Zt}};function so(e,t,r){Ir({glueUrl:e,wasmUrl:t,fallbackUrl:r,lazyInit:!0})}function ao(e){}$t.prototype.isFullscreen=function(){return!!document.fullscreenElement},$t.prototype.enableFullscreen=function(e,t,r){e=e||this.graphicsDevice.canvas;const o=function e(){t(),document.removeEventListener("fullscreenchange",e)},n=function e(){r(),document.removeEventListener("fullscreenerror",e)};t&&document.addEventListener("fullscreenchange",o,!1),r&&document.addEventListener("fullscreenerror",n,!1),e.requestFullscreen?e.requestFullscreen(Element.ALLOW_KEYBOARD_INPUT):r()},$t.prototype.disableFullscreen=function(e){const t=function t(){e(),document.removeEventListener("fullscreenchange",t)};e&&document.addEventListener("fullscreenchange",t,!1),document.exitFullscreen()},$t.prototype.getSceneUrl=function(e){const t=this.scenes.find(e);return t?t.url:null},$t.prototype.loadScene=function(e,t){this.scenes.loadScene(e,t)},$t.prototype.loadSceneHierarchy=function(e,t){this.scenes.loadSceneHierarchy(e,t)},$t.prototype.loadSceneSettings=function(e,t){this.scenes.loadSceneSettings(e,t)},$t.prototype.renderMeshInstance=function(e,t){const r=null!=t&&t.layer?t.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(null,null,null,e,r)},$t.prototype.renderMesh=function(e,t,r,o){const n=null!=o&&o.layer?o.layer:this.scene.defaultDrawLayer;this.scene.immediate.drawMesh(t,r,e,null,n)},$t.prototype._addLines=function(e,t,r){const o=r&&r.layer?r.layer:this.scene.layers.getLayerById(Qe),n=!r||void 0===r.depthTest||r.depthTest;this.scene.immediate.getBatch(o,n).addLines(e,t)},$t.prototype.renderLine=function(e,t,r){let o,n=r;const i=arguments[3],a=arguments[4];i instanceof s?(n=i,o="number"==typeof a?a===qe?{layer:this.scene.layers.getLayerById(Qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(Qe),depthTest:!0}:a):"number"==typeof i?(n=r,o=i===qe?{layer:this.scene.layers.getLayerById(Qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(Qe),depthTest:!0}):i&&(o=i),this._addLines([e,t],[r,n],o)},$t.prototype.renderLines=function(e,t,r){r?"number"==typeof r&&(r=r===qe?{layer:this.scene.layers.getLayerById(Qe),depthTest:!1}:{layer:this.scene.layers.getLayerById(Qe),depthTest:!0}):r={layer:this.scene.layers.getLayerById(Qe),depthTest:!0};!t.length||e.length===t.length?e.length%2==0?this._addLines(e,t,r):console.error("renderLines: array length is not divisible by 2"):console.error("renderLines: position/color arrays have different lengths")},$t.prototype.enableVr=function(){},Object.defineProperty(tr.prototype,"node",{get:function(){return this.entity}}),Object.defineProperty(ir.prototype,"enable",{get:function(){return this.enabled},set:function(e){this.enabled=e}}),sr.prototype.setVisible=function(e){this.enabled=e},Object.defineProperty(sr.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(ar.prototype,"aabb",{get:function(){return null},set:function(e){}}),Object.defineProperty(gr.prototype,"bodyType",{get:function(){return this.type},set:function(e){this.type=e}}),gr.prototype.syncBodyToEntity=function(){this._updateDynamic()},Tr.prototype.setGravity=function(){1===arguments.length?this.gravity.copy(arguments[0]):this.gravity.set(arguments[0],arguments[1],arguments[2])};export{Fr as ContextCreationError,vr as ELEMENTTYPE_FLOAT32,Or as ELEMENTTYPE_INT16,Pr as ELEMENTTYPE_INT32,Mr as ELEMENTTYPE_INT8,Rr as ELEMENTTYPE_UINT16,Dr as ELEMENTTYPE_UINT32,Nr as ELEMENTTYPE_UINT8,Ur as PhongMaterial,eo as RIGIDBODY_ACTIVE_TAG,Zr as RIGIDBODY_CF_KINEMATIC_OBJECT,$r as RIGIDBODY_CF_NORESPONSE_OBJECT,Jr as RIGIDBODY_CF_STATIC_OBJECT,oo as RIGIDBODY_DISABLE_DEACTIVATION,no as RIGIDBODY_DISABLE_SIMULATION,to as RIGIDBODY_ISLAND_SLEEPING,Qr as RIGIDBODY_TYPE_DYNAMIC,qr as RIGIDBODY_TYPE_KINEMATIC,zr as RIGIDBODY_TYPE_STATIC,ro as RIGIDBODY_WANTS_DEACTIVATION,wr as UnsupportedBrowserError,Wr as anim,Hr as asset,Kr as audio,so as basisSetDownloadConfig,io as fw,xr as gfx,Sr as inherits,Yr as input,jr as log,Ar as makeArray,kr as posteffect,ao as prefilterCubemap,Br as programlib,Gr as scene,Cr as shape,br as time};
