import"../../../core/tracing.js";import{Component as t}from"../component.js";import{ComponentSystem as s}from"../system.js";import{AudioListenerComponent as e}from"./component.js";import{AudioListenerComponentData as o}from"./data.js";const i=["enabled"];class n extends s{constructor(t){super(t),this.id="audiolistener",this.ComponentType=e,this.DataType=o,this.schema=i,this.manager=t.soundManager,this.current=null,this.app.systems.on("update",this.onUpdate,this)}initializeComponentData(t,s,e){e=["enabled"],super.initializeComponentData(t,s,e)}onUpdate(t){if(this.current){const t=this.current.getPosition();this.manager.listener.setPosition(t);const s=this.current.getWorldTransform();this.manager.listener.setOrientation(s)}}destroy(){super.destroy(),this.app.systems.off("update",this.onUpdate,this)}}t._buildAccessors(e.prototype,i);export{n as AudioListenerComponentSystem};
