import{Asset as s}from"../../asset/asset.js";import{Texture as e}from"../../../platform/graphics/texture.js";import{basisTranscode as t}from"../../handlers/basis.js";import{ADDRESS_CLAMP_TO_EDGE as a,ADDRESS_REPEAT as r}from"../../../platform/graphics/constants.js";class o{constructor(s,e){this.device=e,this.maxRetries=0}load(e,a,r){const o=this.device;s.fetchArrayBuffer(e.load,((s,i)=>{var l,m,n,d;s?a(s):(l=i,t(o,e.load,l,a,{isGGGR:0!=(8&(null==r||null==(m=r.file)||null==(n=m.variants)||null==(d=n.basis)?void 0:d.opt))})||a(`Basis module not found. Asset '${r.name}' basis texture variant will not be loaded.`))}),r,this.maxRetries)}open(s,t,o){const i=new e(o,{name:s,addressU:t.cubemap?a:r,addressV:t.cubemap?a:r,width:t.width,height:t.height,format:t.format,cubemap:t.cubemap,levels:t.levels});return i.upload(),i}}export{o as BasisParser};
