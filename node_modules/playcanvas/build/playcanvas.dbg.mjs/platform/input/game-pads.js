/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
const MAPS = {
  DEFAULT: {
    buttons: [
    'PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_3', 'PAD_FACE_4',
    'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2',
    'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON',
    'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT',
    'PAD_VENDOR'],
    axes: [
    'PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']
  },
  PS3: {
    buttons: [
    'PAD_FACE_1', 'PAD_FACE_2', 'PAD_FACE_4', 'PAD_FACE_3',
    'PAD_L_SHOULDER_1', 'PAD_R_SHOULDER_1', 'PAD_L_SHOULDER_2', 'PAD_R_SHOULDER_2',
    'PAD_SELECT', 'PAD_START', 'PAD_L_STICK_BUTTON', 'PAD_R_STICK_BUTTON',
    'PAD_UP', 'PAD_DOWN', 'PAD_LEFT', 'PAD_RIGHT', 'PAD_VENDOR'],
    axes: [
    'PAD_L_STICK_X', 'PAD_L_STICK_Y', 'PAD_R_STICK_X', 'PAD_R_STICK_Y']
  }
};
const PRODUCT_CODES = {
  'Product: 0268': 'PS3'
};

class GamePads {
  constructor() {
    this.gamepadsSupported = !!navigator.getGamepads || !!navigator.webkitGetGamepads;
    this.current = [];
    this.previous = [];
    this.deadZone = 0.25;
  }

  update() {
    for (let i = 0, l = this.current.length; i < l; i++) {
      const buttons = this.current[i].pad.buttons;
      const buttonsLen = buttons.length;
      for (let j = 0; j < buttonsLen; j++) {
        if (this.previous[i] === undefined) {
          this.previous[i] = [];
        }
        this.previous[i][j] = buttons[j].pressed;
      }
    }

    this.poll(this.current);
  }

  poll(pads = []) {
    if (pads.length > 0) {
      pads.length = 0;
    }
    if (this.gamepadsSupported) {
      const padDevices = navigator.getGamepads ? navigator.getGamepads() : navigator.webkitGetGamepads();
      for (let i = 0, len = padDevices.length; i < len; i++) {
        if (padDevices[i]) {
          pads.push({
            map: this.getMap(padDevices[i]),
            pad: padDevices[i]
          });
        }
      }
    }
    return pads;
  }
  getMap(pad) {
    for (const code in PRODUCT_CODES) {
      if (pad.id.indexOf(code) >= 0) {
        return MAPS[PRODUCT_CODES[code]];
      }
    }
    return MAPS.DEFAULT;
  }

  isPressed(index, button) {
    if (!this.current[index]) {
      return false;
    }
    const key = this.current[index].map.buttons[button];
    return this.current[index].pad.buttons[pc[key]].pressed;
  }

  wasPressed(index, button) {
    if (!this.current[index]) {
      return false;
    }
    const key = this.current[index].map.buttons[button];
    const i = pc[key];

    return this.current[index].pad.buttons[i].pressed && !(this.previous[index] && this.previous[index][i]);
  }

  wasReleased(index, button) {
    if (!this.current[index]) {
      return false;
    }
    const key = this.current[index].map.buttons[button];
    const i = pc[key];

    return !this.current[index].pad.buttons[i].pressed && this.previous[index] && this.previous[index][i];
  }

  getAxis(index, axes) {
    if (!this.current[index]) {
      return 0;
    }
    const key = this.current[index].map.axes[axes];
    let value = this.current[index].pad.axes[pc[key]];
    if (Math.abs(value) < this.deadZone) {
      value = 0;
    }
    return value;
  }
}

export { GamePads };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS1wYWRzLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGxhdGZvcm0vaW5wdXQvZ2FtZS1wYWRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1BUFMgPSB7XG4gICAgREVGQVVMVDoge1xuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAvLyBGYWNlIGJ1dHRvbnNcbiAgICAgICAgICAgICdQQURfRkFDRV8xJyxcbiAgICAgICAgICAgICdQQURfRkFDRV8yJyxcbiAgICAgICAgICAgICdQQURfRkFDRV8zJyxcbiAgICAgICAgICAgICdQQURfRkFDRV80JyxcblxuICAgICAgICAgICAgLy8gU2hvdWxkZXIgYnV0dG9uc1xuICAgICAgICAgICAgJ1BBRF9MX1NIT1VMREVSXzEnLFxuICAgICAgICAgICAgJ1BBRF9SX1NIT1VMREVSXzEnLFxuICAgICAgICAgICAgJ1BBRF9MX1NIT1VMREVSXzInLFxuICAgICAgICAgICAgJ1BBRF9SX1NIT1VMREVSXzInLFxuXG4gICAgICAgICAgICAvLyBPdGhlciBidXR0b25zXG4gICAgICAgICAgICAnUEFEX1NFTEVDVCcsXG4gICAgICAgICAgICAnUEFEX1NUQVJUJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19CVVRUT04nLFxuICAgICAgICAgICAgJ1BBRF9SX1NUSUNLX0JVVFRPTicsXG5cbiAgICAgICAgICAgIC8vIEQgUGFkXG4gICAgICAgICAgICAnUEFEX1VQJyxcbiAgICAgICAgICAgICdQQURfRE9XTicsXG4gICAgICAgICAgICAnUEFEX0xFRlQnLFxuICAgICAgICAgICAgJ1BBRF9SSUdIVCcsXG5cbiAgICAgICAgICAgICAvLyBWZW5kb3Igc3BlY2lmaWMgYnV0dG9uXG4gICAgICAgICAgICAnUEFEX1ZFTkRPUidcbiAgICAgICAgXSxcblxuICAgICAgICBheGVzOiBbXG4gICAgICAgICAgICAvLyBBbmFsb2d1ZSBTdGlja3NcbiAgICAgICAgICAgICdQQURfTF9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19ZJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19ZJ1xuICAgICAgICBdXG4gICAgfSxcblxuICAgIFBTMzoge1xuICAgICAgICBidXR0b25zOiBbXG4gICAgICAgICAgICAvLyBYLCBPLCBUUkksIFNRXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMScsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMicsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfNCcsXG4gICAgICAgICAgICAnUEFEX0ZBQ0VfMycsXG5cbiAgICAgICAgICAgIC8vIFNob3VsZGVyIGJ1dHRvbnNcbiAgICAgICAgICAgICdQQURfTF9TSE9VTERFUl8xJyxcbiAgICAgICAgICAgICdQQURfUl9TSE9VTERFUl8xJyxcbiAgICAgICAgICAgICdQQURfTF9TSE9VTERFUl8yJyxcbiAgICAgICAgICAgICdQQURfUl9TSE9VTERFUl8yJyxcblxuICAgICAgICAgICAgLy8gT3RoZXIgYnV0dG9uc1xuICAgICAgICAgICAgJ1BBRF9TRUxFQ1QnLFxuICAgICAgICAgICAgJ1BBRF9TVEFSVCcsXG4gICAgICAgICAgICAnUEFEX0xfU1RJQ0tfQlVUVE9OJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19CVVRUT04nLFxuXG4gICAgICAgICAgICAvLyBEIFBhZFxuICAgICAgICAgICAgJ1BBRF9VUCcsXG4gICAgICAgICAgICAnUEFEX0RPV04nLFxuICAgICAgICAgICAgJ1BBRF9MRUZUJyxcbiAgICAgICAgICAgICdQQURfUklHSFQnLFxuXG4gICAgICAgICAgICAnUEFEX1ZFTkRPUidcbiAgICAgICAgXSxcblxuICAgICAgICBheGVzOiBbXG4gICAgICAgICAgICAvLyBBbmFsb2d1ZSBTdGlja3NcbiAgICAgICAgICAgICdQQURfTF9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfTF9TVElDS19ZJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19YJyxcbiAgICAgICAgICAgICdQQURfUl9TVElDS19ZJ1xuICAgICAgICBdXG4gICAgfVxufTtcblxuY29uc3QgUFJPRFVDVF9DT0RFUyA9IHtcbiAgICAnUHJvZHVjdDogMDI2OCc6ICdQUzMnXG59O1xuXG4vKipcbiAqIElucHV0IGhhbmRsZXIgZm9yIGFjY2Vzc2luZyBHYW1lUGFkIGlucHV0LlxuICovXG5jbGFzcyBHYW1lUGFkcyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEdhbWVQYWRzIGluc3RhbmNlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmdhbWVwYWRzU3VwcG9ydGVkID0gISFuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgfHwgISFuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHM7XG5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gW107XG4gICAgICAgIHRoaXMucHJldmlvdXMgPSBbXTtcblxuICAgICAgICB0aGlzLmRlYWRab25lID0gMC4yNTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHN0YXRlIG9mIHRoZSBnYW1lcGFkcy4gVGhpcyBtdXN0IGJlIGNhbGxlZCBldmVyeSBmcmFtZSBmb3JcbiAgICAgKiBgd2FzUHJlc3NlZGAgdG8gd29yay5cbiAgICAgKi9cbiAgICB1cGRhdGUoKSB7XG4gICAgICAgIC8vIG1vdmUgY3VycmVudCBidXR0b25zIHN0YXR1cyBpbnRvIHByZXZpb3VzIGFycmF5XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gdGhpcy5jdXJyZW50Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuY3VycmVudFtpXS5wYWQuYnV0dG9ucztcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnNMZW4gPSBidXR0b25zLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgYnV0dG9uc0xlbjsgaisrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucHJldmlvdXNbaV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZpb3VzW2ldID0gW107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucHJldmlvdXNbaV1bal0gPSBidXR0b25zW2pdLnByZXNzZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyB1cGRhdGUgY3VycmVudFxuICAgICAgICB0aGlzLnBvbGwodGhpcy5jdXJyZW50KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQb2xsIGZvciB0aGUgbGF0ZXN0IGRhdGEgZnJvbSB0aGUgZ2FtZXBhZCBBUEkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge29iamVjdFtdfSBbcGFkc10gLSBBbiBvcHRpb25hbCBhcnJheSB1c2VkIHRvIHJlY2VpdmUgdGhlIGdhbWVwYWRzIG1hcHBpbmcuIFRoaXNcbiAgICAgKiBhcnJheSB3aWxsIGJlIHJldHVybmVkIGJ5IHRoaXMgZnVuY3Rpb24uXG4gICAgICogQHJldHVybnMge29iamVjdFtdfSBBbiBhcnJheSBvZiBnYW1lcGFkcyBhbmQgbWFwcGluZ3MgZm9yIHRoZSBtb2RlbCBvZiBnYW1lcGFkIHRoYXQgaXNcbiAgICAgKiBhdHRhY2hlZC5cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIHZhciBnYW1lcGFkcyA9IG5ldyBwYy5HYW1lUGFkcygpO1xuICAgICAqIHZhciBwYWRzID0gZ2FtZXBhZHMucG9sbCgpO1xuICAgICAqL1xuICAgIHBvbGwocGFkcyA9IFtdKSB7XG4gICAgICAgIGlmIChwYWRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHBhZHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmdhbWVwYWRzU3VwcG9ydGVkKSB7XG4gICAgICAgICAgICBjb25zdCBwYWREZXZpY2VzID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzID8gbmF2aWdhdG9yLmdldEdhbWVwYWRzKCkgOiBuYXZpZ2F0b3Iud2Via2l0R2V0R2FtZXBhZHMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBwYWREZXZpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhZERldmljZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogdGhpcy5nZXRNYXAocGFkRGV2aWNlc1tpXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWQ6IHBhZERldmljZXNbaV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWRzO1xuICAgIH1cblxuICAgIGdldE1hcChwYWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjb2RlIGluIFBST0RVQ1RfQ09ERVMpIHtcbiAgICAgICAgICAgIGlmIChwYWQuaWQuaW5kZXhPZihjb2RlKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1BUFNbUFJPRFVDVF9DT0RFU1tjb2RlXV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gTUFQUy5ERUZBVUxUO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnV0dG9uIG9uIHRoZSBwYWQgcmVxdWVzdGVkIGlzIHByZXNzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHBhZCB0byBjaGVjaywgdXNlIGNvbnN0YW50cyB7QGxpbmsgUEFEXzF9LFxuICAgICAqIHtAbGluayBQQURfMn0sIGV0Yy5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYnV0dG9uIC0gVGhlIGJ1dHRvbiB0byB0ZXN0LCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfRkFDRV8xfSwgZXRjLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZSBidXR0b24gaXMgcHJlc3NlZC5cbiAgICAgKi9cbiAgICBpc1ByZXNzZWQoaW5kZXgsIGJ1dHRvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFtpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmJ1dHRvbnNbYnV0dG9uXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFtpbmRleF0ucGFkLmJ1dHRvbnNbcGNba2V5XV0ucHJlc3NlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcHJlc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidXR0b24gLSBUaGUgYnV0dG9uIHRvIHRlc3QsIHVzZSBjb25zdGFudHMge0BsaW5rIFBBRF9GQUNFXzF9LCBldGMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcHJlc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKi9cbiAgICB3YXNQcmVzc2VkKGluZGV4LCBidXR0b24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmN1cnJlbnRbaW5kZXhdLm1hcC5idXR0b25zW2J1dHRvbl07XG4gICAgICAgIGNvbnN0IGkgPSBwY1trZXldO1xuXG4gICAgICAgIC8vIFByZXZpb3VzIHBhZCBidXR0b25zIG1heSBub3QgaGF2ZSBiZWVuIHBvcHVsYXRlZCB5ZXRcbiAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdGltZSBmcmFtZSBhIHBhZCBoYXMgYmVlbiBkZXRlY3RlZFxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50W2luZGV4XS5wYWQuYnV0dG9uc1tpXS5wcmVzc2VkICYmICEodGhpcy5wcmV2aW91c1tpbmRleF0gJiYgdGhpcy5wcmV2aW91c1tpbmRleF1baV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYnV0dG9uIHdhcyByZWxlYXNlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBidXR0b24gLSBUaGUgYnV0dG9uIHRvIHRlc3QsIHVzZSBjb25zdGFudHMge0BsaW5rIFBBRF9GQUNFXzF9LCBldGMuXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJ1dHRvbiB3YXMgcmVsZWFzZWQgc2luY2UgdGhlIGxhc3QgZnJhbWUuXG4gICAgICovXG4gICAgd2FzUmVsZWFzZWQoaW5kZXgsIGJ1dHRvbikge1xuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFtpbmRleF0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmJ1dHRvbnNbYnV0dG9uXTtcbiAgICAgICAgY29uc3QgaSA9IHBjW2tleV07XG5cbiAgICAgICAgLy8gUHJldmlvdXMgcGFkIGJ1dHRvbnMgbWF5IG5vdCBoYXZlIGJlZW4gcG9wdWxhdGVkIHlldFxuICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIGZyYW1lIGEgcGFkIGhhcyBiZWVuIGRldGVjdGVkXG4gICAgICAgIHJldHVybiAhdGhpcy5jdXJyZW50W2luZGV4XS5wYWQuYnV0dG9uc1tpXS5wcmVzc2VkICYmICh0aGlzLnByZXZpb3VzW2luZGV4XSAmJiB0aGlzLnByZXZpb3VzW2luZGV4XVtpXSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSB2YWx1ZSBvZiBvbmUgb2YgdGhlIGFuYWxvZ3VlIGF4ZXMgb2YgdGhlIHBhZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgcGFkIHRvIGNoZWNrLCB1c2UgY29uc3RhbnRzIHtAbGluayBQQURfMX0sXG4gICAgICoge0BsaW5rIFBBRF8yfSwgZXRjLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBheGVzIC0gVGhlIGF4ZXMgdG8gZ2V0IHRoZSB2YWx1ZSBvZiwgdXNlIGNvbnN0YW50cyB7QGxpbmsgUEFEX0xfU1RJQ0tfWH0sXG4gICAgICogZXRjLlxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9IFRoZSB2YWx1ZSBvZiB0aGUgYXhpcyBiZXR3ZWVuIC0xIGFuZCAxLlxuICAgICAqL1xuICAgIGdldEF4aXMoaW5kZXgsIGF4ZXMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMuY3VycmVudFtpbmRleF0ubWFwLmF4ZXNbYXhlc107XG4gICAgICAgIGxldCB2YWx1ZSA9IHRoaXMuY3VycmVudFtpbmRleF0ucGFkLmF4ZXNbcGNba2V5XV07XG5cbiAgICAgICAgaWYgKE1hdGguYWJzKHZhbHVlKSA8IHRoaXMuZGVhZFpvbmUpIHtcbiAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuXG5leHBvcnQgeyBHYW1lUGFkcyB9O1xuIl0sIm5hbWVzIjpbIk1BUFMiLCJERUZBVUxUIiwiYnV0dG9ucyIsImF4ZXMiLCJQUzMiLCJQUk9EVUNUX0NPREVTIiwiR2FtZVBhZHMiLCJjb25zdHJ1Y3RvciIsImdhbWVwYWRzU3VwcG9ydGVkIiwibmF2aWdhdG9yIiwiZ2V0R2FtZXBhZHMiLCJ3ZWJraXRHZXRHYW1lcGFkcyIsImN1cnJlbnQiLCJwcmV2aW91cyIsImRlYWRab25lIiwidXBkYXRlIiwiaSIsImwiLCJsZW5ndGgiLCJwYWQiLCJidXR0b25zTGVuIiwiaiIsInVuZGVmaW5lZCIsInByZXNzZWQiLCJwb2xsIiwicGFkcyIsInBhZERldmljZXMiLCJsZW4iLCJwdXNoIiwibWFwIiwiZ2V0TWFwIiwiY29kZSIsImlkIiwiaW5kZXhPZiIsImlzUHJlc3NlZCIsImluZGV4IiwiYnV0dG9uIiwia2V5IiwicGMiLCJ3YXNQcmVzc2VkIiwid2FzUmVsZWFzZWQiLCJnZXRBeGlzIiwidmFsdWUiLCJNYXRoIiwiYWJzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE1BQU1BLElBQUksR0FBRztBQUNUQyxFQUFBQSxPQUFPLEVBQUU7QUFDTEMsSUFBQUEsT0FBTyxFQUFFO0FBRUwsSUFBQSxZQUFZLEVBQ1osWUFBWSxFQUNaLFlBQVksRUFDWixZQUFZO0FBR1osSUFBQSxrQkFBa0IsRUFDbEIsa0JBQWtCLEVBQ2xCLGtCQUFrQixFQUNsQixrQkFBa0I7QUFHbEIsSUFBQSxZQUFZLEVBQ1osV0FBVyxFQUNYLG9CQUFvQixFQUNwQixvQkFBb0I7QUFHcEIsSUFBQSxRQUFRLEVBQ1IsVUFBVSxFQUNWLFVBQVUsRUFDVixXQUFXO0FBR1gsSUFBQSxZQUFZLENBQ2Y7QUFFREMsSUFBQUEsSUFBSSxFQUFFO0FBRUYsSUFBQSxlQUFlLEVBQ2YsZUFBZSxFQUNmLGVBQWUsRUFDZixlQUFl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
