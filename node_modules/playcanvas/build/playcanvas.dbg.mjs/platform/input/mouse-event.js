/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { MOUSEBUTTON_NONE } from './constants.js';

function isMousePointerLocked() {
  return !!(document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement);
}

class MouseEvent {
  constructor(mouse, event) {
    let coords = {
      x: 0,
      y: 0
    };
    if (event) {
      if (event instanceof MouseEvent) {
        throw Error('Expected MouseEvent');
      }
      coords = mouse._getTargetCoords(event);
    } else {
      event = {};
    }
    if (coords) {
      this.x = coords.x;
      this.y = coords.y;
    } else if (isMousePointerLocked()) {
      this.x = 0;
      this.y = 0;
    } else {
      return;
    }

    this.wheelDelta = 0;
    if (event.type === 'wheel') {
      if (event.deltaY > 0) {
        this.wheelDelta = 1;
      } else if (event.deltaY < 0) {
        this.wheelDelta = -1;
      }
    }

    if (isMousePointerLocked()) {
      this.dx = event.movementX || event.webkitMovementX || event.mozMovementX || 0;
      this.dy = event.movementY || event.webkitMovementY || event.mozMovementY || 0;
    } else {
      this.dx = this.x - mouse._lastX;
      this.dy = this.y - mouse._lastY;
    }
    if (event.type === 'mousedown' || event.type === 'mouseup') {
      this.button = event.button;
    } else {
      this.button = MOUSEBUTTON_NONE;
    }
    this.buttons = mouse._buttons.slice(0);

    this.element = event.target;

    this.ctrlKey = event.ctrlKey || false;
    this.altKey = event.altKey || false;
    this.shiftKey = event.shiftKey || false;
    this.metaKey = event.metaKey || false;

    this.event = event;
  }
}

export { MouseEvent, isMousePointerLocked };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW91c2UtZXZlbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9wbGF0Zm9ybS9pbnB1dC9tb3VzZS1ldmVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNT1VTRUJVVFRPTl9OT05FIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9tb3VzZS5qcycpLk1vdXNlfSBNb3VzZSAqL1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBwb2ludGVyIGxvY2sgaXMgY3VycmVudGx5IGVuYWJsZWQuXG4gKlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgcG9pbnRlciBsb2NrIGlzIGN1cnJlbnRseSBlbmFibGVkLlxuICogQGlnbm9yZVxuICovXG5mdW5jdGlvbiBpc01vdXNlUG9pbnRlckxvY2tlZCgpIHtcbiAgICByZXR1cm4gISEoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50IHx8IGRvY3VtZW50Lm1velBvaW50ZXJMb2NrRWxlbWVudCB8fCBkb2N1bWVudC53ZWJraXRQb2ludGVyTG9ja0VsZW1lbnQpO1xufVxuXG4vKipcbiAqIE1vdXNlRXZlbnQgb2JqZWN0IHRoYXQgaXMgcGFzc2VkIHRvIGV2ZW50cyAnbW91c2Vtb3ZlJywgJ21vdXNldXAnLCAnbW91c2Vkb3duJyBhbmQgJ21vdXNld2hlZWwnLlxuICovXG5jbGFzcyBNb3VzZUV2ZW50IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgTW91c2VFdmVudCBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TW91c2V9IG1vdXNlIC0gVGhlIE1vdXNlIGRldmljZSB0aGF0IGlzIGZpcmluZyB0aGlzIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7Z2xvYmFsVGhpcy5Nb3VzZUV2ZW50fSBldmVudCAtIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50IHRoYXQgZmlyZWQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobW91c2UsIGV2ZW50KSB7XG4gICAgICAgIGxldCBjb29yZHMgPSB7XG4gICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgeTogMFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50IGluc3RhbmNlb2YgTW91c2VFdmVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCdFeHBlY3RlZCBNb3VzZUV2ZW50Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb29yZHMgPSBtb3VzZS5fZ2V0VGFyZ2V0Q29vcmRzKGV2ZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV2ZW50ID0geyB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvb3Jkcykge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgeCBjb29yZGluYXRlIG9mIHRoZSBtb3VzZSBwb2ludGVyIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50IHtAbGluayBNb3VzZX0gaXNcbiAgICAgICAgICAgICAqIGF0dGFjaGVkIHRvLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMueCA9IGNvb3Jkcy54O1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgeSBjb29yZGluYXRlIG9mIHRoZSBtb3VzZSBwb2ludGVyIHJlbGF0aXZlIHRvIHRoZSBlbGVtZW50IHtAbGluayBNb3VzZX0gaXNcbiAgICAgICAgICAgICAqIGF0dGFjaGVkIHRvLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMueSA9IGNvb3Jkcy55O1xuICAgICAgICB9IGVsc2UgaWYgKGlzTW91c2VQb2ludGVyTG9ja2VkKCkpIHtcbiAgICAgICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgICAgICB0aGlzLnkgPSAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdmFsdWUgcmVwcmVzZW50aW5nIHRoZSBhbW91bnQgdGhlIG1vdXNlIHdoZWVsIGhhcyBtb3ZlZCwgb25seSB2YWxpZCBmb3JcbiAgICAgICAgICoge0BsaW5rIG1vdXNld2hlZWx9IGV2ZW50cy5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud2hlZWxEZWx0YSA9IDA7XG4gICAgICAgIC8vIGRlbHRhWSBpcyBpbiBhIGRpZmZlcmVudCByYW5nZSBhY3Jvc3MgZGlmZmVyZW50IGJyb3dzZXJzLiBUaGUgb25seSB0aGluZ1xuICAgICAgICAvLyB0aGF0IGlzIGNvbnNpc3RlbnQgaXMgdGhlIHNpZ24gb2YgdGhlIHZhbHVlIHNvIHNuYXAgdG8gLTEvKzEuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnd2hlZWwnKSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMud2hlZWxEZWx0YSA9IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmRlbHRhWSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLndoZWVsRGVsdGEgPSAtMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCB0aGUgbW92ZW1lbnQgZGVsdGEgaW4gdGhpcyBldmVudFxuICAgICAgICBpZiAoaXNNb3VzZVBvaW50ZXJMb2NrZWQoKSkge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgY2hhbmdlIGluIHggY29vcmRpbmF0ZSBzaW5jZSB0aGUgbGFzdCBtb3VzZSBldmVudC5cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmR4ID0gZXZlbnQubW92ZW1lbnRYIHx8IGV2ZW50LndlYmtpdE1vdmVtZW50WCB8fCBldmVudC5tb3pNb3ZlbWVudFggfHwgMDtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIGNoYW5nZSBpbiB5IGNvb3JkaW5hdGUgc2luY2UgdGhlIGxhc3QgbW91c2UgZXZlbnQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5keSA9IGV2ZW50Lm1vdmVtZW50WSB8fCBldmVudC53ZWJraXRNb3ZlbWVudFkgfHwgZXZlbnQubW96TW92ZW1lbnRZIHx8IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmR4ID0gdGhpcy54IC0gbW91c2UuX2xhc3RYO1xuICAgICAgICAgICAgdGhpcy5keSA9IHRoaXMueSAtIG1vdXNlLl9sYXN0WTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2Vkb3duJyB8fCBldmVudC50eXBlID09PSAnbW91c2V1cCcpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVGhlIG1vdXNlIGJ1dHRvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBldmVudC4gQ2FuIGJlOlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIC0ge0BsaW5rIE1PVVNFQlVUVE9OX0xFRlR9XG4gICAgICAgICAgICAgKiAtIHtAbGluayBNT1VTRUJVVFRPTl9NSURETEV9XG4gICAgICAgICAgICAgKiAtIHtAbGluayBNT1VTRUJVVFRPTl9SSUdIVH1cbiAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uID0gTU9VU0VCVVRUT05fTk9ORTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJ1dHRvbnMgPSBtb3VzZS5fYnV0dG9ucy5zbGljZSgwKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgdGhhdCB0aGUgbW91c2Ugd2FzIGZpcmVkIGZyb20uXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZXZlbnQudGFyZ2V0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIGlmIHRoZSBjdHJsIGtleSB3YXMgcHJlc3NlZCB3aGVuIHRoaXMgZXZlbnQgd2FzIGZpcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3RybEtleSA9IGV2ZW50LmN0cmxLZXkgfHwgZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIGlmIHRoZSBhbHQga2V5IHdhcyBwcmVzc2VkIHdoZW4gdGhpcyBldmVudCB3YXMgZmlyZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hbHRLZXkgPSBldmVudC5hbHRLZXkgfHwgZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIGlmIHRoZSBzaGlmdCBrZXkgd2FzIHByZXNzZWQgd2hlbiB0aGlzIGV2ZW50IHdhcyBmaXJlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoaWZ0S2V5ID0gZXZlbnQuc2hpZnRLZXkgfHwgZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUcnVlIGlmIHRoZSBtZXRhIGtleSB3YXMgcHJlc3NlZCB3aGVuIHRoaXMgZXZlbnQgd2FzIGZpcmVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWV0YUtleSA9IGV2ZW50Lm1ldGFLZXkgfHwgZmFsc2U7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBvcmlnaW5hbCBicm93c2VyIGV2ZW50LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Z2xvYmFsVGhpcy5Nb3VzZUV2ZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xuICAgIH1cbn1cblxuZXhwb3J0IHsgaXNNb3VzZVBvaW50ZXJMb2NrZWQsIE1vdXNlRXZlbnQgfTtcbiJdLCJuYW1lcyI6WyJpc01vdXNlUG9pbnRlckxvY2tlZCIsImRvY3VtZW50IiwicG9pbnRlckxvY2tFbGVtZW50IiwibW96UG9pbnRlckxvY2tFbGVtZW50Iiwid2Via2l0UG9pbnRlckxvY2tFbGVtZW50IiwiTW91c2VFdmVudCIsImNvbnN0cnVjdG9yIiwibW91c2UiLCJldmVudCIsImNvb3JkcyIsIngiLCJ5IiwiRXJyb3IiLCJfZ2V0VGFyZ2V0Q29vcmRzIiwid2hlZWxEZWx0YSIsInR5cGUiLCJkZWx0YVkiLCJkeCIsIm1vdmVtZW50WCIsIndlYmtpdE1vdmVtZW50WCIsIm1vek1vdmVtZW50WCIsImR5IiwibW92ZW1lbnRZIiwid2Via2l0TW92ZW1lbnRZIiwibW96TW92ZW1lbnRZIiwiX2xhc3RYIiwiX2xhc3RZIiwiYnV0dG9uIiwiTU9VU0VCVVRUT05fTk9ORSIsImJ1dHRvbnMiLCJfYnV0dG9ucyIsInNsaWNlIiwiZWxlbWVudCIsInRhcmdldCIsImN0cmxLZXkiLCJhbHRLZXkiLCJzaGlmdEtleSIsIm1ldGFLZXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFVQSxTQUFTQSxvQkFBb0IsR0FBRztBQUM1QixFQUFBLE9BQU8sQ0FBQyxFQUFFQyxRQUFRLENBQUNDLGtCQUFrQixJQUFJ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
