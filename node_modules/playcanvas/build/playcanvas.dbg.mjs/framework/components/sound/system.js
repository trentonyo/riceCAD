/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../../core/debug.js';
import { hasAudioContext } from '../../../platform/audio/capabilities.js';
import { Component } from '../component.js';
import { ComponentSystem } from '../system.js';
import { SoundComponent } from './component.js';
import { SoundComponentData } from './data.js';

const _schema = ['enabled'];

class SoundComponentSystem extends ComponentSystem {
  constructor(app) {
    super(app);
    this.id = 'sound';
    this.ComponentType = SoundComponent;
    this.DataType = SoundComponentData;
    this.schema = _schema;

    this.manager = app.soundManager;
    Debug.assert(this.manager, "AudioSourceComponentSystem cannot be created witout sound manager");
    this.app.systems.on('update', this.onUpdate, this);
    this.on('beforeremove', this.onBeforeRemove, this);
  }

  set volume(volume) {
    this.manager.volume = volume;
  }
  get volume() {
    return this.manager.volume;
  }

  get context() {
    if (!hasAudioContext()) {
      Debug.warn('WARNING: Audio context is not supported on this browser');
      return null;
    }
    return this.manager.context;
  }
  initializeComponentData(component, data, properties) {
    properties = ['volume', 'pitch', 'positional', 'refDistance', 'maxDistance', 'rollOffFactor', 'distanceModel', 'slots'];
    for (let i = 0; i < properties.length; i++) {
      if (data.hasOwnProperty(properties[i])) {
        component[properties[i]] = data[properties[i]];
      }
    }
    super.initializeComponentData(component, data, ['enabled']);
  }
  cloneComponent(entity, clone) {
    const srcComponent = entity.sound;
    const srcSlots = srcComponent.slots;

    const slots = {};
    for (const key in srcSlots) {
      const srcSlot = srcSlots[key];
      slots[key] = {
        name: srcSlot.name,
        volume: srcSlot.volume,
        pitch: srcSlot.pitch,
        loop: srcSlot.loop,
        duration: srcSlot.duration,
        startTime: srcSlot.startTime,
        overlap: srcSlot.overlap,
        autoPlay: srcSlot.autoPlay,
        asset: srcSlot.asset
      };
    }
    const cloneData = {
      distanceModel: srcComponent.distanceModel,
      enabled: srcComponent.enabled,
      maxDistance: srcComponent.maxDistance,
      pitch: srcComponent.pitch,
      positional: srcComponent.positional,
      refDistance: srcComponent.refDistance,
      rollOffFactor: srcComponent.rollOffFactor,
      slots: slots,
      volume: srcComponent.volume
    };

    return this.addComponent(clone, cloneData);
  }
  onUpdate(dt) {
    const store = this.store;
    for (const id in store) {
      if (store.hasOwnProperty(id)) {
        const item = store[id];
        const entity = item.entity;
        if (entity.enabled) {
          const component = entity.sound;

          if (component.enabled && component.positional) {
            const position = entity.getPosition();
            const slots = component.slots;
            for (const key in slots) {
              slots[key].updatePosition(position);
            }
          }
        }
      }
    }
  }
  onBeforeRemove(entity, component) {
    const slots = component.slots;
    for (const key in slots) {
      if (!slots[key].overlap) {
        slots[key].stop();
      }
    }
    component.onRemove();
  }
  destroy() {
    super.destroy();
    this.app.systems.off('update', this.onUpdate, this);
  }
}
Component._buildAccessors(SoundComponent.prototype, _schema);

export { SoundComponentSystem };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL2NvbXBvbmVudHMvc291bmQvc3lzdGVtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERlYnVnIH0gZnJvbSAnLi4vLi4vLi4vY29yZS9kZWJ1Zy5qcyc7XG5cbmltcG9ydCB7IGhhc0F1ZGlvQ29udGV4dCB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2F1ZGlvL2NhcGFiaWxpdGllcy5qcyc7XG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4uL2NvbXBvbmVudC5qcyc7XG5pbXBvcnQgeyBDb21wb25lbnRTeXN0ZW0gfSBmcm9tICcuLi9zeXN0ZW0uanMnO1xuXG5pbXBvcnQgeyBTb3VuZENvbXBvbmVudCB9IGZyb20gJy4vY29tcG9uZW50LmpzJztcbmltcG9ydCB7IFNvdW5kQ29tcG9uZW50RGF0YSB9IGZyb20gJy4vZGF0YS5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi8uLi9wbGF0Zm9ybS9zb3VuZC9tYW5hZ2VyLmpzJykuU291bmRNYW5hZ2VyfSBTb3VuZE1hbmFnZXIgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9hcHAtYmFzZS5qcycpLkFwcEJhc2V9IEFwcEJhc2UgKi9cblxuY29uc3QgX3NjaGVtYSA9IFsnZW5hYmxlZCddO1xuXG4vKipcbiAqIE1hbmFnZXMgY3JlYXRpb24gb2Yge0BsaW5rIFNvdW5kQ29tcG9uZW50fXMuXG4gKlxuICogQGF1Z21lbnRzIENvbXBvbmVudFN5c3RlbVxuICogQGlnbm9yZVxuICovXG5jbGFzcyBTb3VuZENvbXBvbmVudFN5c3RlbSBleHRlbmRzIENvbXBvbmVudFN5c3RlbSB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgU291bmRDb21wb25lbnRTeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FwcEJhc2V9IGFwcCAtIFRoZSBBcHBsaWNhdGlvbi5cbiAgICAgKiBAaGlkZWNvbnN0cnVjdG9yXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG5cbiAgICAgICAgdGhpcy5pZCA9ICdzb3VuZCc7XG5cbiAgICAgICAgdGhpcy5Db21wb25lbnRUeXBlID0gU291bmRDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuRGF0YVR5cGUgPSBTb3VuZENvbXBvbmVudERhdGE7XG5cbiAgICAgICAgdGhpcy5zY2hlbWEgPSBfc2NoZW1hO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXRzIC8gc2V0cyB0aGUgc291bmQgbWFuYWdlci5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge1NvdW5kTWFuYWdlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWFuYWdlciA9IGFwcC5zb3VuZE1hbmFnZXI7XG4gICAgICAgIERlYnVnLmFzc2VydCh0aGlzLm1hbmFnZXIsIFwiQXVkaW9Tb3VyY2VDb21wb25lbnRTeXN0ZW0gY2Fubm90IGJlIGNyZWF0ZWQgd2l0b3V0IHNvdW5kIG1hbmFnZXJcIik7XG5cbiAgICAgICAgdGhpcy5hcHAuc3lzdGVtcy5vbigndXBkYXRlJywgdGhpcy5vblVwZGF0ZSwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5vbignYmVmb3JlcmVtb3ZlJywgdGhpcy5vbkJlZm9yZVJlbW92ZSwgdGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyAvIGdldHMgdGhlIHZvbHVtZSBmb3IgdGhlIGVudGlyZSBTb3VuZCBzeXN0ZW0uIEFsbCBzb3VuZHMgd2lsbCBoYXZlIHRoZWlyIHZvbHVtZVxuICAgICAqIG11bHRpcGxpZWQgYnkgdGhpcyB2YWx1ZS4gVmFsaWQgYmV0d2VlbiBbMCwgMV0uXG4gICAgICpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNldCB2b2x1bWUodm9sdW1lKSB7XG4gICAgICAgIHRoaXMubWFuYWdlci52b2x1bWUgPSB2b2x1bWU7XG4gICAgfVxuXG4gICAgZ2V0IHZvbHVtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFuYWdlci52b2x1bWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgQXVkaW9Db250ZXh0IGN1cnJlbnRseSB1c2VkIGJ5IHRoZSBzb3VuZCBtYW5hZ2VyLiBSZXF1aXJlcyBXZWIgQXVkaW8gQVBJIHN1cHBvcnQuXG4gICAgICogUmV0dXJucyBudWxsIGlmIHRoZSBkZXZpY2UgZG9lcyBub3Qgc3VwcG9ydCB0aGUgV2ViIEF1ZGlvIEFQSS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtBdWRpb0NvbnRleHR8bnVsbH1cbiAgICAgKi9cbiAgICBnZXQgY29udGV4dCgpIHtcbiAgICAgICAgaWYgKCFoYXNBdWRpb0NvbnRleHQoKSkge1xuICAgICAgICAgICAgRGVidWcud2FybignV0FSTklORzogQXVkaW8gY29udGV4dCBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgYnJvd3NlcicpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5tYW5hZ2VyLmNvbnRleHQ7XG4gICAgfVxuXG4gICAgaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEoY29tcG9uZW50LCBkYXRhLCBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BlcnRpZXMgPSBbXG4gICAgICAgICAgICAndm9sdW1lJyxcbiAgICAgICAgICAgICdwaXRjaCcsXG4gICAgICAgICAgICAncG9zaXRpb25hbCcsXG4gICAgICAgICAgICAncmVmRGlzdGFuY2UnLFxuICAgICAgICAgICAgJ21heERpc3RhbmNlJyxcbiAgICAgICAgICAgICdyb2xsT2ZmRmFjdG9yJyxcbiAgICAgICAgICAgICdkaXN0YW5jZU1vZGVsJyxcbiAgICAgICAgICAgICdzbG90cydcbiAgICAgICAgXTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KHByb3BlcnRpZXNbaV0pKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50W3Byb3BlcnRpZXNbaV1dID0gZGF0YVtwcm9wZXJ0aWVzW2ldXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyLmluaXRpYWxpemVDb21wb25lbnREYXRhKGNvbXBvbmVudCwgZGF0YSwgWydlbmFibGVkJ10pO1xuICAgIH1cblxuICAgIGNsb25lQ29tcG9uZW50KGVudGl0eSwgY2xvbmUpIHtcbiAgICAgICAgY29uc3Qgc3JjQ29tcG9uZW50ID0gZW50aXR5LnNvdW5kO1xuICAgICAgICBjb25zdCBzcmNTbG90cyA9IHNyY0NvbXBvbmVudC5zbG90cztcblxuICAgICAgICAvLyBjb252ZXJ0ICdzbG90cycgYmFjayB0b1xuICAgICAgICAvLyBzaW1wbGUgb3B0aW9uIG9iamVjdHNcbiAgICAgICAgY29uc3Qgc2xvdHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc3JjU2xvdHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNyY1Nsb3QgPSBzcmNTbG90c1trZXldO1xuICAgICAgICAgICAgc2xvdHNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzcmNTbG90Lm5hbWUsXG4gICAgICAgICAgICAgICAgdm9sdW1lOiBzcmNTbG90LnZvbHVtZSxcbiAgICAgICAgICAgICAgICBwaXRjaDogc3JjU2xvdC5waXRjaCxcbiAgICAgICAgICAgICAgICBsb29wOiBzcmNTbG90Lmxvb3AsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IHNyY1Nsb3QuZHVyYXRpb24sXG4gICAgICAgICAgICAgICAgc3RhcnRUaW1lOiBzcmNTbG90LnN0YXJ0VGltZSxcbiAgICAgICAgICAgICAgICBvdmVybGFwOiBzcmNTbG90Lm92ZXJsYXAsXG4gICAgICAgICAgICAgICAgYXV0b1BsYXk6IHNyY1Nsb3QuYXV0b1BsYXksXG4gICAgICAgICAgICAgICAgYXNzZXQ6IHNyY1Nsb3QuYXNzZXRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbG9uZURhdGEgPSB7XG4gICAgICAgICAgICBkaXN0YW5jZU1vZGVsOiBzcmNDb21wb25lbnQuZGlzdGFuY2VNb2RlbCxcbiAgICAgICAgICAgIGVuYWJsZWQ6IHNyY0NvbXBvbmVudC5lbmFibGVkLFxuICAgICAgICAgICAgbWF4RGlzdGFuY2U6IHNyY0NvbXBvbmVudC5tYXhEaXN0YW5jZSxcbiAgICAgICAgICAgIHBpdGNoOiBzcmNDb21wb25lbnQucGl0Y2gsXG4gICAgICAgICAgICBwb3NpdGlvbmFsOiBzcmNDb21wb25lbnQucG9zaXRpb25hbCxcbiAgICAgICAgICAgIHJlZkRpc3RhbmNlOiBzcmNDb21wb25lbnQucmVmRGlzdGFuY2UsXG4gICAgICAgICAgICByb2xsT2ZmRmFjdG9yOiBzcmNDb21wb25lbnQucm9sbE9mZkZhY3RvcixcbiAgICAgICAgICAgIHNsb3RzOiBzbG90cyxcbiAgICAgICAgICAgIHZvbHVtZTogc3JjQ29tcG9uZW50LnZvbHVtZVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGFkZCBjb21wb25lbnQgd2l0aCBuZXcgZGF0YVxuICAgICAgICByZXR1cm4gdGhpcy5hZGRDb21wb25lbnQoY2xvbmUsIGNsb25lRGF0YSk7XG4gICAgfVxuXG4gICAgb25VcGRhdGUoZHQpIHtcbiAgICAgICAgY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3JlO1xuXG4gICAgICAgIGZvciAoY29uc3QgaWQgaW4gc3RvcmUpIHtcbiAgICAgICAgICAgIGlmIChzdG9yZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtID0gc3RvcmVbaWRdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGVudGl0eSA9IGl0ZW0uZW50aXR5O1xuXG4gICAgICAgICAgICAgICAgaWYgKGVudGl0eS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IGVudGl0eS5zb3VuZDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgc2xvdCBwb3NpdGlvbiBpZiB0aGlzIGlzIGEgM2Qgc291bmRcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5lbmFibGVkICYmIGNvbXBvbmVudC5wb3NpdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGVudGl0eS5nZXRQb3NpdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2xvdHMgPSBjb21wb25lbnQuc2xvdHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsb3RzW2tleV0udXBkYXRlUG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25CZWZvcmVSZW1vdmUoZW50aXR5LCBjb21wb25lbnQpIHtcbiAgICAgICAgY29uc3Qgc2xvdHMgPSBjb21wb25lbnQuc2xvdHM7XG4gICAgICAgIC8vIHN0b3Agbm9uIG92ZXJsYXBwaW5nIHNvdW5kc1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzbG90cykge1xuICAgICAgICAgICAgaWYgKCFzbG90c1trZXldLm92ZXJsYXApIHtcbiAgICAgICAgICAgICAgICBzbG90c1trZXldLnN0b3AoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudC5vblJlbW92ZSgpO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHN1cGVyLmRlc3Ryb3koKTtcblxuICAgICAgICB0aGlzLmFwcC5zeXN0ZW1zLm9mZigndXBkYXRlJywgdGhpcy5vblVwZGF0ZSwgdGhpcyk7XG4gICAgfVxufVxuXG5Db21wb25lbnQuX2J1aWxkQWNjZXNzb3JzKFNvdW5kQ29tcG9uZW50LnByb3RvdHlwZSwgX3NjaGVtYSk7XG5cbmV4cG9ydCB7IFNvdW5kQ29tcG9uZW50U3lzdGVtIH07XG4iXSwibmFtZXMiOlsiX3NjaGVtYSIsIlNvdW5kQ29tcG9uZW50U3lzdGVtIiwiQ29tcG9uZW50U3lzdGVtIiwiY29uc3RydWN0b3IiLCJhcHAiLCJpZCIsIkNvbXBvbmVudFR5cGUiLCJTb3VuZENvbXBvbmVudCIsIkRhdGFUeXBlIiwiU291bmRDb21wb25lbnREYXRhIiwic2NoZW1hIiwibWFuYWdlciIsInNvdW5kTWFuYWdlciIsIkRlYnVnIiwiYXNzZXJ0Iiwic3lzdGVtcyIsIm9uIiwib25VcGRhdGUiLCJvbkJlZm9yZVJlbW92ZSIsInZvbHVtZSIsImNvbnRleHQiLCJoYXNBdWRpb0NvbnRleHQiLCJ3YXJuIiwiaW5pdGlhbGl6ZUNvbXBvbmVudERhdGEiLCJjb21wb25lbnQiLCJkYXRhIiwicHJvcGVydGllcyIsImkiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsImNsb25lQ29tcG9uZW50IiwiZW50aXR5IiwiY2xvbmUiLCJzcmNDb21wb25lbnQiLCJzb3VuZCIsInNyY1Nsb3RzIiwic2xvdHMiLCJrZXkiLCJzcmNTbG90IiwibmFtZSIsInBpdGNoIiwibG9vcCIsImR1cmF0aW9uIiwic3RhcnRUaW1lIiwib3ZlcmxhcCIsImF1dG9QbGF5IiwiYXNzZXQiLCJjbG9uZURhdGEiLCJkaXN0YW5jZU1vZGVsIiwiZW5hYmxlZCIsIm1heERpc3RhbmNlIiwicG9zaXRpb25hbCIsInJlZkRpc3RhbmNlIiwicm9sbE9mZkZhY3RvciIsImFkZENvbXBvbmVudCIsImR0Iiwic3RvcmUiLCJpdGVtIiwicG9zaXRpb24iLCJnZXRQb3NpdGlvbiIsInVwZGF0ZVBvc2l0aW9uIiwic3RvcCIsIm9uUmVtb3ZlIiwiZGVzdHJveSIsIm9mZiIsIkNvbXBvbmVudCIs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
