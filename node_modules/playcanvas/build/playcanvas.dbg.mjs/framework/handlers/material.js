/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { http } from '../../platform/net/http.js';
import { PIXELFORMAT_R8_G8_B8_A8 } from '../../platform/graphics/constants.js';
import { Texture } from '../../platform/graphics/texture.js';
import { SPECULAR_PHONG } from '../../scene/constants.js';
import { standardMaterialTextureParameters, standardMaterialCubemapParameters } from '../../scene/materials/standard-material-parameters.js';
import { AssetReference } from '../asset/asset-reference.js';
import { JsonStandardMaterialParser } from '../parsers/material/json-standard-material.js';

const PLACEHOLDER_MAP = {
  aoMap: 'white',
  diffuseMap: 'gray',
  specularMap: 'gray',
  specularityFactorMap: 'white',
  metalnessMap: 'black',
  glossMap: 'gray',
  sheenMap: 'black',
  sheenGlossinessMap: 'gray',
  clearCoatMap: 'black',
  clearCoatGlossMap: 'gray',
  clearCoatNormalMap: 'normal',
  refractionMap: 'white',
  emissiveMap: 'gray',
  normalMap: 'normal',
  heightMap: 'gray',
  opacityMap: 'gray',
  sphereMap: 'gray',
  lightMap: 'white'
};

class MaterialHandler {

  constructor(app) {
    this.handlerType = "material";
    this._assets = app.assets;
    this._device = app.graphicsDevice;
    this._placeholderTextures = null;
    this._parser = new JsonStandardMaterialParser();
    this.maxRetries = 0;
  }
  load(url, callback) {
    if (typeof url === 'string') {
      url = {
        load: url,
        original: url
      };
    }

    http.get(url.load, {
      retry: this.maxRetries > 0,
      maxRetries: this.maxRetries
    }, function (err, response) {
      if (!err) {
        if (callback) {
          response._engine = true;
          callback(null, response);
        }
      } else {
        if (callback) {
          callback(`Error loading material: ${url.original} [${err}]`);
        }
      }
    });
  }
  open(url, data) {
    const material = this._parser.parse(data);

    if (data._engine) {
      material._data = data;
      delete data._engine;
    }
    return material;
  }

  _createPlaceholders() {
    this._placeholderTextures = {};
    const textures = {
      white: [255, 255, 255, 255],
      gray: [128, 128, 128, 255],
      black: [0, 0, 0, 255],
      normal: [128, 128, 255, 255]
    };
    for (const key in textures) {
      if (!textures.hasOwnProperty(key)) continue;

      this._placeholderTextures[key] = new Texture(this._device, {
        width: 2,
        height: 2,
        format: PIXELFORMAT_R8_G8_B8_A8,
        name: 'material_placeholder'
      });

      const pixels = this._placeholderTextures[key].lock();
      for (let i = 0; i < 4; i++) {
        for (let c = 0; c < 4; c++) {
          pixels[i * 4 + c] = textures[key][c];
        }
      }
      this._placeholderTextures[key].unlock();
    }
  }
  patch(asset, assets) {
    if (asset.resource._data) {
      asset._data = asset.resource._data;
      delete asset.resource._data;
    }

    asset.data.name = asset.name;
    asset.resource.name = asset.name;
    this._bindAndAssignAssets(asset, assets);
    asset.off('unload', this._onAssetUnload, this);
    asset.on('unload', this._onAssetUnload, this);
  }
  _onAssetUnload(asset) {
    delete asset.data.parameters;
    delete asset.data.chunks;
    delete asset.data.name;
  }
  _assignTexture(parameterName, materialAsset, texture) {
    materialAsset.resource[parameterName] = texture;
  }

  _getPlaceholderTexture(parameterName) {
    if (!this._placeholderTextures) {
      this._createPlaceholders();
    }
    const placeholder = PLACEHOLDER_MAP[parameterName];
    const texture = this._placeholderTextures[placeholder];
    return texture;
  }

  _assignPlaceholderTexture(parameterName, materialAsset) {
    materialAsset.resource[parameterName] = this._getPlaceholderTexture(parameterName);
  }
  _onTextureLoad(parameterName, materialAsset, textureAsset) {
    this._assignTexture(parameterName, materialAsset, textureAsset.resource);
    materialAsset.resource.update();
  }
  _onTextureAdd(parameterName, materialAsset, textureAsset) {
    this._assets.load(textureAsset);
  }
  _onTextureRemoveOrUnload(parameterName, materialAsset, textureAsset) {
    const material = materialAsset.resource;
    if (material) {
      if (materialAsset.resource[parameterName] === textureAsset.resource) {
        this._assignPlaceholderTexture(parameterName, materialAsset);
        material.update();
      }
    }
  }
  _assignCubemap(parameterName, materialAsset, textures) {
    materialAsset.resource[parameterName] = textures[0];

    if (parameterName === 'cubeMap') {
      materialAsset.resource.prefilteredCubemaps = textures.slice(1);
    }
  }
  _onCubemapLoad(parameterName, materialAsset, cubemapAsset) {
    this._assignCubemap(parameterName, materialAsset, cubemapAsset.resources);
    this._parser.initialize(materialAsset.resource, materialAsset.data);
  }
  _onCubemapAdd(parameterName, materialAsset, cubemapAsset) {
    if (materialAsset.data.shadingModel === SPECULAR_PHONG) {
      materialAsset.loadFaces = true;
    }
    this._assets.load(cubemapAsset);
  }
  _onCubemapRemoveOrUnload(parameterName, materialAsset, cubemapAsset) {
    const material = materialAsset.resource;
    if (materialAsset.data.prefilteredCubeMap128 === cubemapAsset.resources[1]) {
      this._assignCubemap(parameterName, materialAsset, [null, null, null, null, null, null, null]);
      material.update();
    }
  }
  _bindAndAssignAssets(materialAsset, assets) {
    const data = this._parser.migrate(materialAsset.data);
    const material = materialAsset.resource;
    const pathMapping = data.mappingFormat === 'path';
    const TEXTURES = standardMaterialTextureParameters;
    let i, name, assetReference;
    for (i = 0; i < TEXTURES.length; i++) {
      name = TEXTURES[i];
      assetReference = material._assetReferences[name];

      const dataAssetId = data[name];
      const materialTexture = material[name];
      const isPlaceHolderTexture = materialTexture === this._getPlaceholderTexture(name);
      const dataValidated = data.validated;
      if (dataAssetId && (!materialTexture || !dataValidated || isPlaceHolderTexture)) {
        if (!assetReference) {
          assetReference = new AssetReference(name, materialAsset, assets, {
            load: this._onTextureLoad,
            add: this._onTextureAdd,
            remove: this._onTextureRemoveOrUnload,
            unload: this._onTextureRemoveOrUnload
          }, this);
          material._assetReferences[name] = assetReference;
        }
        if (pathMapping) {
          assetReference.url = materialAsset.getAbsoluteUrl(dataAssetId);
        } else {
          assetReference.id = dataAssetId;
        }
        if (assetReference.asset) {
          if (assetReference.asset.resource) {
            this._assignTexture(name, materialAsset, assetReference.asset.resource);
          } else {
            this._assignPlaceholderTexture(name, materialAsset);
          }
          assets.load(assetReference.asset);
        }
      } else {
        if (assetReference) {
          if (pathMapping) {
            assetReference.url = null;
          } else {
            assetReference.id = null;
          }
        }
      }
    }
    const CUBEMAPS = standardMaterialCubemapParameters;

    for (i = 0; i < CUBEMAPS.length; i++) {
      name = CUBEMAPS[i];
      assetReference = material._assetReferences[name];

      if (data[name] && !materialAsset.data.prefilteredCubeMap128) {
        if (!assetReference) {
          assetReference = new AssetReference(name, materialAsset, assets, {
            load: this._onCubemapLoad,
            add: this._onCubemapAdd,
            remove: this._onCubemapRemoveOrUnload,
            unload: this._onCubemapRemoveOrUnload
          }, this);
          material._assetReferences[name] = assetReference;
        }
        if (pathMapping) {
          assetReference.url = data[name];
        } else {
          assetReference.id = data[name];
        }
        if (assetReference.asset) {
          if (assetReference.asset.loaded) {
            this._assignCubemap(name, materialAsset, assetReference.asset.resources);
          }
          assets.load(assetReference.asset);
        }
      }
    }

    this._parser.initialize(material, data);
  }
}

export { MaterialHandler };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0ZXJpYWwuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvaGFuZGxlcnMvbWF0ZXJpYWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaHR0cCB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL25ldC9odHRwLmpzJztcblxuaW1wb3J0IHsgUElYRUxGT1JNQVRfUjhfRzhfQjhfQTggfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnO1xuXG5pbXBvcnQgeyBTUEVDVUxBUl9QSE9ORyB9IGZyb20gJy4uLy4uL3NjZW5lL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBzdGFuZGFyZE1hdGVyaWFsQ3ViZW1hcFBhcmFtZXRlcnMsIHN0YW5kYXJkTWF0ZXJpYWxUZXh0dXJlUGFyYW1ldGVycyB9IGZyb20gJy4uLy4uL3NjZW5lL21hdGVyaWFscy9zdGFuZGFyZC1tYXRlcmlhbC1wYXJhbWV0ZXJzLmpzJztcblxuaW1wb3J0IHsgQXNzZXRSZWZlcmVuY2UgfSBmcm9tICcuLi8uLi9mcmFtZXdvcmsvYXNzZXQvYXNzZXQtcmVmZXJlbmNlLmpzJztcblxuaW1wb3J0IHsgSnNvblN0YW5kYXJkTWF0ZXJpYWxQYXJzZXIgfSBmcm9tICcuLi8uLi9mcmFtZXdvcmsvcGFyc2Vycy9tYXRlcmlhbC9qc29uLXN0YW5kYXJkLW1hdGVyaWFsLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uL2ZyYW1ld29yay9hcHAtYmFzZS5qcycpLkFwcEJhc2V9IEFwcEJhc2UgKi9cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuL2hhbmRsZXIuanMnKS5SZXNvdXJjZUhhbmRsZXJ9IFJlc291cmNlSGFuZGxlciAqL1xuXG5jb25zdCBQTEFDRUhPTERFUl9NQVAgPSB7XG4gICAgYW9NYXA6ICd3aGl0ZScsXG4gICAgZGlmZnVzZU1hcDogJ2dyYXknLFxuICAgIHNwZWN1bGFyTWFwOiAnZ3JheScsXG4gICAgc3BlY3VsYXJpdHlGYWN0b3JNYXA6ICd3aGl0ZScsXG4gICAgbWV0YWxuZXNzTWFwOiAnYmxhY2snLFxuICAgIGdsb3NzTWFwOiAnZ3JheScsXG4gICAgc2hlZW5NYXA6ICdibGFjaycsXG4gICAgc2hlZW5HbG9zc2luZXNzTWFwOiAnZ3JheScsXG4gICAgY2xlYXJDb2F0TWFwOiAnYmxhY2snLFxuICAgIGNsZWFyQ29hdEdsb3NzTWFwOiAnZ3JheScsXG4gICAgY2xlYXJDb2F0Tm9ybWFsTWFwOiAnbm9ybWFsJyxcbiAgICByZWZyYWN0aW9uTWFwOiAnd2hpdGUnLFxuICAgIGVtaXNzaXZlTWFwOiAnZ3JheScsXG4gICAgbm9ybWFsTWFwOiAnbm9ybWFsJyxcbiAgICBoZWlnaHRNYXA6ICdncmF5JyxcbiAgICBvcGFjaXR5TWFwOiAnZ3JheScsXG4gICAgc3BoZXJlTWFwOiAnZ3JheScsXG4gICAgbGlnaHRNYXA6ICd3aGl0ZSdcbn07XG5cbi8qKlxuICogUmVzb3VyY2UgaGFuZGxlciB1c2VkIGZvciBsb2FkaW5nIHtAbGluayBNYXRlcmlhbH0gcmVzb3VyY2VzLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtSZXNvdXJjZUhhbmRsZXJ9XG4gKi9cbmNsYXNzIE1hdGVyaWFsSGFuZGxlciB7XG4gICAgLyoqXG4gICAgICogVHlwZSBvZiB0aGUgcmVzb3VyY2UgdGhlIGhhbmRsZXIgaGFuZGxlcy5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgaGFuZGxlclR5cGUgPSBcIm1hdGVyaWFsXCI7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgTWF0ZXJpYWxIYW5kbGVyIGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcHBCYXNlfSBhcHAgLSBUaGUgcnVubmluZyB7QGxpbmsgQXBwQmFzZX0uXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGFwcCkge1xuICAgICAgICB0aGlzLl9hc3NldHMgPSBhcHAuYXNzZXRzO1xuICAgICAgICB0aGlzLl9kZXZpY2UgPSBhcHAuZ3JhcGhpY3NEZXZpY2U7XG5cbiAgICAgICAgdGhpcy5fcGxhY2Vob2xkZXJUZXh0dXJlcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fcGFyc2VyID0gbmV3IEpzb25TdGFuZGFyZE1hdGVyaWFsUGFyc2VyKCk7XG4gICAgICAgIHRoaXMubWF4UmV0cmllcyA9IDA7XG4gICAgfVxuXG4gICAgbG9hZCh1cmwsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdXJsID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IHVybCxcbiAgICAgICAgICAgICAgICBvcmlnaW5hbDogdXJsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTG9hZGluZyBmcm9tIFVSTCAoZW5naW5lLW9ubHkpXG4gICAgICAgIGh0dHAuZ2V0KHVybC5sb2FkLCB7XG4gICAgICAgICAgICByZXRyeTogdGhpcy5tYXhSZXRyaWVzID4gMCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IHRoaXMubWF4UmV0cmllc1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyLCByZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UuX2VuZ2luZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhgRXJyb3IgbG9hZGluZyBtYXRlcmlhbDogJHt1cmwub3JpZ2luYWx9IFske2Vycn1dYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvcGVuKHVybCwgZGF0YSkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IHRoaXMuX3BhcnNlci5wYXJzZShkYXRhKTtcblxuICAgICAgICAvLyB0ZW1wIHN0b3JhZ2UgZm9yIGVuZ2luZS1vbmx5IGFzIHdlIG5lZWQgdGhpcyBkdXJpbmcgcGF0Y2hpbmdcbiAgICAgICAgaWYgKGRhdGEuX2VuZ2luZSkge1xuICAgICAgICAgICAgbWF0ZXJpYWwuX2RhdGEgPSBkYXRhO1xuICAgICAgICAgICAgZGVsZXRlIGRhdGEuX2VuZ2luZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICB9XG5cbiAgICAvLyBjcmVhdGVzIHBsYWNlaG9sZGVycyBmb3IgdGV4dHVyZXNcbiAgICAvLyB0aGF0IGFyZSB1c2VkIHdoaWxlIHRleHR1cmUgaXMgbG9hZGluZ1xuICAgIF9jcmVhdGVQbGFjZWhvbGRlcnMoKSB7XG4gICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyVGV4dHVyZXMgPSB7fTtcblxuICAgICAgICBjb25zdCB0ZXh0dXJlcyA9IHtcbiAgICAgICAgICAgIHdoaXRlOiBbMjU1LCAyNTUsIDI1NSwgMjU1XSxcbiAgICAgICAgICAgIGdyYXk6IFsxMjgsIDEyOCwgMTI4LCAyNTVdLFxuICAgICAgICAgICAgYmxhY2s6IFswLCAwLCAwLCAyNTVdLFxuICAgICAgICAgICAgbm9ybWFsOiBbMTI4LCAxMjgsIDI1NSwgMjU1XVxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRleHR1cmVzKSB7XG4gICAgICAgICAgICBpZiAoIXRleHR1cmVzLmhhc093blByb3BlcnR5KGtleSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIC8vIGNyZWF0ZSB0ZXh0dXJlXG4gICAgICAgICAgICB0aGlzLl9wbGFjZWhvbGRlclRleHR1cmVzW2tleV0gPSBuZXcgVGV4dHVyZSh0aGlzLl9kZXZpY2UsIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogMixcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IDIsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBQSVhFTEZPUk1BVF9SOF9HOF9COF9BOCxcbiAgICAgICAgICAgICAgICBuYW1lOiAnbWF0ZXJpYWxfcGxhY2Vob2xkZXInXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gZmlsbCBwaXhlbHMgd2l0aCBjb2xvclxuICAgICAgICAgICAgY29uc3QgcGl4ZWxzID0gdGhpcy5fcGxhY2Vob2xkZXJUZXh0dXJlc1trZXldLmxvY2soKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA0OyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW2kgKiA0ICsgY10gPSB0ZXh0dXJlc1trZXldW2NdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3BsYWNlaG9sZGVyVGV4dHVyZXNba2V5XS51bmxvY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHBhdGNoKGFzc2V0LCBhc3NldHMpIHtcbiAgICAgICAgLy8gaW4gYW4gZW5naW5lLW9ubHkgZW52aXJvbm1lbnQgd2UgbWFudWFsbHkgY29weSB0aGUgc291cmNlIGRhdGEgaW50byB0aGUgYXNzZXRcbiAgICAgICAgaWYgKGFzc2V0LnJlc291cmNlLl9kYXRhKSB7XG4gICAgICAgICAgICBhc3NldC5fZGF0YSA9IGFzc2V0LnJlc291cmNlLl9kYXRhOyAvLyB1c2UgX2RhdGEgdG8gYXZvaWQgZmlyaW5nIGV2ZW50c1xuICAgICAgICAgICAgZGVsZXRlIGFzc2V0LnJlc291cmNlLl9kYXRhOyAvLyByZW1vdmUgZnJvbSB0ZW1wIHN0b3JhZ2VcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHBhdGNoIHRoZSBuYW1lIG9mIHRoZSBhc3NldCBvdmVyIHRoZSBtYXRlcmlhbCBuYW1lIHByb3BlcnR5XG4gICAgICAgIGFzc2V0LmRhdGEubmFtZSA9IGFzc2V0Lm5hbWU7XG4gICAgICAgIGFzc2V0LnJlc291cmNlLm5hbWUgPSBhc3NldC5uYW1lO1xuXG4gICAgICAgIHRoaXMuX2JpbmRBbmRBc3NpZ25Bc3NldHMoYXNzZXQsIGFzc2V0cyk7XG5cbiAgICAgICAgYXNzZXQub2ZmKCd1bmxvYWQnLCB0aGlzLl9vbkFzc2V0VW5sb2FkLCB0aGlzKTtcbiAgICAgICAgYXNzZXQub24oJ3VubG9hZCcsIHRoaXMuX29uQXNzZXRVbmxvYWQsIHRoaXMpO1xuICAgIH1cblxuICAgIF9vbkFzc2V0VW5sb2FkKGFzc2V0KSB7XG4gICAgICAgIC8vIHJlbW92ZSB0aGUgcGFyYW1ldGVyIGJsb2NrIHdlIGNyZWF0ZWQgd2hpY2ggaW5jbHVkZXMgdGV4dHVyZSByZWZlcmVuY2VzXG4gICAgICAgIGRlbGV0ZSBhc3NldC5kYXRhLnBhcmFtZXRlcnM7XG4gICAgICAgIGRlbGV0ZSBhc3NldC5kYXRhLmNodW5rcztcbiAgICAgICAgZGVsZXRlIGFzc2V0LmRhdGEubmFtZTtcbiAgICB9XG5cbiAgICBfYXNzaWduVGV4dHVyZShwYXJhbWV0ZXJOYW1lLCBtYXRlcmlhbEFzc2V0LCB0ZXh0dXJlKSB7XG4gICAgICAgIC8vIE5CIHJlbW92ZWQgc3dhcHBpbmcgb3V0IGFzc2V0IGlkIGZvciByZXNvdXJjZSBoZXJlXG4gICAgICAgIG1hdGVyaWFsQXNzZXQucmVzb3VyY2VbcGFyYW1ldGVyTmFtZV0gPSB0ZXh0dXJlO1xuICAgIH1cblxuICAgIC8vIHJldHVybnMgdGhlIGNvcnJlY3QgcGxhY2Vob2xkZXIgdGV4dHVyZSBmb3IgdGhlIHRleHR1cmUgcGFyYW1ldGVyXG4gICAgX2dldFBsYWNlaG9sZGVyVGV4dHVyZShwYXJhbWV0ZXJOYW1lKSB7XG4gICAgICAgIC8vIGNyZWF0ZSBwbGFjZWhvbGRlciB0ZXh0dXJlcyBvbi1kZW1hbmRcbiAgICAgICAgaWYgKCF0aGlzLl9wbGFjZWhvbGRlclRleHR1cmVzKSB7XG4gICAgICAgICAgICB0aGlzLl9jcmVhdGVQbGFjZWhvbGRlcnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gUExBQ0VIT0xERVJfTUFQW3BhcmFtZXRlck5hbWVdO1xuICAgICAgICBjb25zdCB0ZXh0dXJlID0gdGhpcy5fcGxhY2Vob2xkZXJUZXh0dXJlc1twbGFjZWhvbGRlcl07XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxuXG4gICAgLy8gYXNzaWduIGEgcGxhY2Vob2xkZXIgdGV4dHVyZSB3aGlsZSB3YWl0aW5nIGZvciBvbmUgdG8gbG9hZFxuICAgIF9hc3NpZ25QbGFjZWhvbGRlclRleHR1cmUocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCkge1xuXG4gICAgICAgIG1hdGVyaWFsQXNzZXQucmVzb3VyY2VbcGFyYW1ldGVyTmFtZV0gPSB0aGlzLl9nZXRQbGFjZWhvbGRlclRleHR1cmUocGFyYW1ldGVyTmFtZSk7XG4gICAgfVxuXG4gICAgX29uVGV4dHVyZUxvYWQocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCwgdGV4dHVyZUFzc2V0KSB7XG4gICAgICAgIHRoaXMuX2Fzc2lnblRleHR1cmUocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCwgdGV4dHVyZUFzc2V0LnJlc291cmNlKTtcbiAgICAgICAgbWF0ZXJpYWxBc3NldC5yZXNvdXJjZS51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBfb25UZXh0dXJlQWRkKHBhcmFtZXRlck5hbWUsIG1hdGVyaWFsQXNzZXQsIHRleHR1cmVBc3NldCkge1xuICAgICAgICB0aGlzLl9hc3NldHMubG9hZCh0ZXh0dXJlQXNzZXQpO1xuICAgIH1cblxuICAgIF9vblRleHR1cmVSZW1vdmVPclVubG9hZChwYXJhbWV0ZXJOYW1lLCBtYXRlcmlhbEFzc2V0LCB0ZXh0dXJlQXNzZXQpIHtcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBtYXRlcmlhbEFzc2V0LnJlc291cmNlO1xuICAgICAgICBpZiAobWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGlmIChtYXRlcmlhbEFzc2V0LnJlc291cmNlW3BhcmFtZXRlck5hbWVdID09PSB0ZXh0dXJlQXNzZXQucmVzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hc3NpZ25QbGFjZWhvbGRlclRleHR1cmUocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfYXNzaWduQ3ViZW1hcChwYXJhbWV0ZXJOYW1lLCBtYXRlcmlhbEFzc2V0LCB0ZXh0dXJlcykge1xuICAgICAgICAvLyB0aGUgcHJpbWFyeSBjdWJlbWFwIHRleHR1cmVcbiAgICAgICAgbWF0ZXJpYWxBc3NldC5yZXNvdXJjZVtwYXJhbWV0ZXJOYW1lXSA9IHRleHR1cmVzWzBdO1xuXG4gICAgICAgIC8vIHNldCBwcmVmaWx0ZXJlZCB0ZXh0dXJlc1xuICAgICAgICBpZiAocGFyYW1ldGVyTmFtZSA9PT0gJ2N1YmVNYXAnKSB7XG4gICAgICAgICAgICBtYXRlcmlhbEFzc2V0LnJlc291cmNlLnByZWZpbHRlcmVkQ3ViZW1hcHMgPSB0ZXh0dXJlcy5zbGljZSgxKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9vbkN1YmVtYXBMb2FkKHBhcmFtZXRlck5hbWUsIG1hdGVyaWFsQXNzZXQsIGN1YmVtYXBBc3NldCkge1xuICAgICAgICB0aGlzLl9hc3NpZ25DdWJlbWFwKHBhcmFtZXRlck5hbWUsIG1hdGVyaWFsQXNzZXQsIGN1YmVtYXBBc3NldC5yZXNvdXJjZXMpO1xuICAgICAgICB0aGlzLl9wYXJzZXIuaW5pdGlhbGl6ZShtYXRlcmlhbEFzc2V0LnJlc291cmNlLCBtYXRlcmlhbEFzc2V0LmRhdGEpO1xuICAgIH1cblxuICAgIF9vbkN1YmVtYXBBZGQocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCwgY3ViZW1hcEFzc2V0KSB7XG4gICAgICAgIC8vIHBob25nIGJhc2VkIC0gc28gZW5zdXJlIHdlIGxvYWQgaW5kaXZpZHVhbCBmYWNlc1xuICAgICAgICBpZiAobWF0ZXJpYWxBc3NldC5kYXRhLnNoYWRpbmdNb2RlbCA9PT0gU1BFQ1VMQVJfUEhPTkcpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsQXNzZXQubG9hZEZhY2VzID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2Fzc2V0cy5sb2FkKGN1YmVtYXBBc3NldCk7XG4gICAgfVxuXG4gICAgX29uQ3ViZW1hcFJlbW92ZU9yVW5sb2FkKHBhcmFtZXRlck5hbWUsIG1hdGVyaWFsQXNzZXQsIGN1YmVtYXBBc3NldCkge1xuICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG1hdGVyaWFsQXNzZXQucmVzb3VyY2U7XG5cbiAgICAgICAgaWYgKG1hdGVyaWFsQXNzZXQuZGF0YS5wcmVmaWx0ZXJlZEN1YmVNYXAxMjggPT09IGN1YmVtYXBBc3NldC5yZXNvdXJjZXNbMV0pIHtcbiAgICAgICAgICAgIHRoaXMuX2Fzc2lnbkN1YmVtYXAocGFyYW1ldGVyTmFtZSwgbWF0ZXJpYWxBc3NldCwgW251bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGwsIG51bGxdKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2JpbmRBbmRBc3NpZ25Bc3NldHMobWF0ZXJpYWxBc3NldCwgYXNzZXRzKSB7XG4gICAgICAgIC8vIGFsd2F5cyBtaWdyYXRlIGJlZm9yZSB1cGRhdGluZyBtYXRlcmlhbCBmcm9tIGFzc2V0IGRhdGFcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX3BhcnNlci5taWdyYXRlKG1hdGVyaWFsQXNzZXQuZGF0YSk7XG5cbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBtYXRlcmlhbEFzc2V0LnJlc291cmNlO1xuXG4gICAgICAgIGNvbnN0IHBhdGhNYXBwaW5nID0gKGRhdGEubWFwcGluZ0Zvcm1hdCA9PT0gJ3BhdGgnKTtcblxuICAgICAgICBjb25zdCBURVhUVVJFUyA9IHN0YW5kYXJkTWF0ZXJpYWxUZXh0dXJlUGFyYW1ldGVycztcblxuICAgICAgICBsZXQgaSwgbmFtZSwgYXNzZXRSZWZlcmVuY2U7XG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgdGV4dHVyZSBwYXJhbWV0ZXJzXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBURVhUVVJFUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmFtZSA9IFRFWFRVUkVTW2ldO1xuXG4gICAgICAgICAgICBhc3NldFJlZmVyZW5jZSA9IG1hdGVyaWFsLl9hc3NldFJlZmVyZW5jZXNbbmFtZV07XG5cbiAgICAgICAgICAgIC8vIGRhdGFbbmFtZV0gY29udGFpbnMgYW4gYXNzZXQgaWQgZm9yIGEgdGV4dHVyZVxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhbiBhc3NldCBpZCBhbmQgbm90aGluZyBpcyBhc3NpZ25lZCB0byB0aGUgdGV4dHVyZSByZXNvdXJjZSBvciB0aGUgcGxhY2Vob2xkZXIgdGV4dHVyZSBpcyBhc3NpZ25lZFxuICAgICAgICAgICAgLy8gb3IgdGhlIGRhdGEgaGFzIGNoYW5nZWRcbiAgICAgICAgICAgIGNvbnN0IGRhdGFBc3NldElkID0gZGF0YVtuYW1lXTtcblxuICAgICAgICAgICAgY29uc3QgbWF0ZXJpYWxUZXh0dXJlID0gbWF0ZXJpYWxbbmFtZV07XG4gICAgICAgICAgICBjb25zdCBpc1BsYWNlSG9sZGVyVGV4dHVyZSA9IG1hdGVyaWFsVGV4dHVyZSA9PT0gdGhpcy5fZ2V0UGxhY2Vob2xkZXJUZXh0dXJlKG5hbWUpO1xuICAgICAgICAgICAgY29uc3QgZGF0YVZhbGlkYXRlZCA9IGRhdGEudmFsaWRhdGVkO1xuXG4gICAgICAgICAgICBpZiAoZGF0YUFzc2V0SWQgJiYgKCFtYXRlcmlhbFRleHR1cmUgfHwgIWRhdGFWYWxpZGF0ZWQgfHwgaXNQbGFjZUhvbGRlclRleHR1cmUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldFJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBhc3NldFJlZmVyZW5jZSA9IG5ldyBBc3NldFJlZmVyZW5jZShuYW1lLCBtYXRlcmlhbEFzc2V0LCBhc3NldHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQ6IHRoaXMuX29uVGV4dHVyZUxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGQ6IHRoaXMuX29uVGV4dHVyZUFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZTogdGhpcy5fb25UZXh0dXJlUmVtb3ZlT3JVbmxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmxvYWQ6IHRoaXMuX29uVGV4dHVyZVJlbW92ZU9yVW5sb2FkXG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLl9hc3NldFJlZmVyZW5jZXNbbmFtZV0gPSBhc3NldFJlZmVyZW5jZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGF0aE1hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGV4dHVyZSBwYXRocyBhcmUgbWVhc3VyZWQgZnJvbSB0aGUgbWF0ZXJpYWwgZGlyZWN0b3J5XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0UmVmZXJlbmNlLnVybCA9IG1hdGVyaWFsQXNzZXQuZ2V0QWJzb2x1dGVVcmwoZGF0YUFzc2V0SWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGFzc2V0UmVmZXJlbmNlLmlkID0gZGF0YUFzc2V0SWQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0UmVmZXJlbmNlLmFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldFJlZmVyZW5jZS5hc3NldC5yZXNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzZXQgaXMgYWxyZWFkeSBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2Fzc2lnblRleHR1cmUobmFtZSwgbWF0ZXJpYWxBc3NldCwgYXNzZXRSZWZlcmVuY2UuYXNzZXQucmVzb3VyY2UpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXNzaWduUGxhY2Vob2xkZXJUZXh0dXJlKG5hbWUsIG1hdGVyaWFsQXNzZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLmxvYWQoYXNzZXRSZWZlcmVuY2UuYXNzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0UmVmZXJlbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHRleHR1cmUgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgICAgICAgICBpZiAocGF0aE1hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFzc2V0UmVmZXJlbmNlLnVybCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NldFJlZmVyZW5jZS5pZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBubyBhc3NldCByZWZlcmVuY2UgYW5kIG5vIGRhdGEgZmllbGRcbiAgICAgICAgICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IENVQkVNQVBTID0gc3RhbmRhcmRNYXRlcmlhbEN1YmVtYXBQYXJhbWV0ZXJzO1xuXG4gICAgICAgIC8vIGl0ZXJhdGUgdGhyb3VnaCBhbGwgY3ViZW1hcCBwYXJhbWV0ZXJzXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBDVUJFTUFQUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbmFtZSA9IENVQkVNQVBTW2ldO1xuXG4gICAgICAgICAgICBhc3NldFJlZmVyZW5jZSA9IG1hdGVyaWFsLl9hc3NldFJlZmVyZW5jZXNbbmFtZV07XG5cbiAgICAgICAgICAgIC8vIGRhdGFbbmFtZV0gY29udGFpbnMgYW4gYXNzZXQgaWQgZm9yIGEgY3ViZW1hcFxuICAgICAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIGFzc2V0IGlkIGFuZCB0aGUgcHJlZmlsdGVyZWQgY3ViZW1hcCBkYXRhIGlzIG5vdCBzZXRcbiAgICAgICAgICAgIGlmIChkYXRhW25hbWVdICYmICFtYXRlcmlhbEFzc2V0LmRhdGEucHJlZmlsdGVyZWRDdWJlTWFwMTI4KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldFJlZmVyZW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBhc3NldFJlZmVyZW5jZSA9IG5ldyBBc3NldFJlZmVyZW5jZShuYW1lLCBtYXRlcmlhbEFzc2V0LCBhc3NldHMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWQ6IHRoaXMuX29uQ3ViZW1hcExvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGQ6IHRoaXMuX29uQ3ViZW1hcEFkZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZTogdGhpcy5fb25DdWJlbWFwUmVtb3ZlT3JVbmxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB1bmxvYWQ6IHRoaXMuX29uQ3ViZW1hcFJlbW92ZU9yVW5sb2FkXG4gICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLl9hc3NldFJlZmVyZW5jZXNbbmFtZV0gPSBhc3NldFJlZmVyZW5jZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocGF0aE1hcHBpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRSZWZlcmVuY2UudXJsID0gZGF0YVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhc3NldFJlZmVyZW5jZS5pZCA9IGRhdGFbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGFzc2V0UmVmZXJlbmNlLmFzc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhc3NldFJlZmVyZW5jZS5hc3NldC5sb2FkZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2V0IGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXNzaWduQ3ViZW1hcChuYW1lLCBtYXRlcmlhbEFzc2V0LCBhc3NldFJlZmVyZW5jZS5hc3NldC5yZXNvdXJjZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLmxvYWQoYXNzZXRSZWZlcmVuY2UuYXNzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH1cblxuICAgICAgICAvLyBjYWxsIHRvIHJlLWluaXRpYWxpemUgbWF0ZXJpYWwgYWZ0ZXIgYWxsIHRleHR1cmVzIGFzc2lnbmVkXG4gICAgICAgIHRoaXMuX3BhcnNlci5pbml0aWFsaXplKG1hdGVyaWFsLCBkYXRhKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IE1hdGVyaWFsSGFuZGxlciB9O1xuIl0sIm5hbWVzIjpbIlBMQUNFSE9MREVSX01BUCIsImFvTWFwIiwiZGlmZnVzZU1hcCIsInNwZWN1bGFyTWFwIiwic3BlY3VsYXJpdHlGYWN0b3JNYXAiLCJtZXRhbG5lc3NNYXAiLCJnbG9zc01hcCIsInNoZWVuTWFwIiwic2hlZW5HbG9zc2luZXNzTWFwIiwiY2xlYXJDb2F0TWFwIiwiY2xlYXJDb2F0R2xvc3NNYXAiLCJjbGVhckNvYXROb3JtYWxNYXAiLCJyZWZyYWN0aW9uTWFwIiwiZW1pc3NpdmVNYXAiLCJub3JtYWxNYXAiLCJoZWlnaHRNYXAiLCJvcGFjaXR5TWFwIiwic3BoZXJlTWFwIiwibGlnaHRNYXAiLCJNYXRlcmlhbEhhbmRsZXIiLCJjb25zdHJ1Y3RvciIsImFwcCIsImhhbmRsZXJUeXBlIiwiX2Fzc2V0cyIsImFzc2V0cyIsIl9kZXZpY2UiLCJncmFwaGljc0RldmljZSIsIl9wbGFjZWhvbGRlclRleHR1cmVzIiwiX3BhcnNlciIsIkpzb25TdGFuZGFyZE1hdGVyaWFsUGFyc2VyIiwibWF4UmV0cmllcyIsImxvYWQiLCJ1cmwiLCJjYWxsYmFjayIsIm9yaWdpbmFsIiwiaHR0cCIsImdldCIsInJldHJ5IiwiZXJyIiwicmVzcG9uc2UiLCJfZW5naW5lIiwib3BlbiIsImRhdGEiLCJtYXRlcmlhbCIsInBhcnNlIiwiX2RhdGEiLCJfY3JlYXRlUGxhY2Vob2xkZXJzIiwidGV4dHVyZXMiLCJ3aGl0ZSIsImdyYXkiLCJibGFjayIsIm5vcm1hbCIsImtleSIsImhhc093blByb3BlcnR5IiwiVGV4dHVyZSIsIndpZHRoIiwiaGVpZ2h0IiwiZm9ybWF0IiwiUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgiLCJuYW1lIiwicGl4ZWxzIiwibG9jayIsImkiLCJjIiwidW5sb2NrIiwicGF0Y2giLCJhc3NldCIsInJlc291cmNlIiwiX2JpbmRBbmRBc3NpZ25Bc3NldHMiLCJvZmYiLCJfb25Bc3NldFVubG9hZCIsIm9uIiwicGFyYW1ldGVycyIsImNodW5rcyIsIl9hc3NpZ25UZXh0dXJlIiwicGFyYW1ldGVyTmFtZSIsIm1hdGVyaWFsQXNzZXQiLCJ0ZXh0dXJlIiwiX2dldFBsYWNlaG9sZGVyVGV4dHVyZSIsInBsYWNlaG9sZGVyIiwiX2Fzc2lnblBsYWNlaG9sZGVyVGV4dHVyZSIsIl9vblRleHR1cmVMb2FkIiwidGV4dHVyZUFzc2V0IiwidXBkYXRlIiwiX29uVGV4dHVyZUFkZCIsIl9vblRleHR1cmVSZW1vdmVPclVubG9hZCIsIl9hc3NpZ25DdWJlbWFwIiwicHJlZmlsdGVyZWRDdWJlbWFwcyIsInNsaWNlIiwiX29uQ3ViZW1hcExvYWQiLCJjdWJlbWFwQXNzZXQiLCJyZXNvdXJjZXMiLCJpbml0aWFsaXplIiwiX29uQ3ViZW1hcEFkZCIsInNoYWRpbmdNb2RlbCIsIlNQRUNVTEFSX1BIT05HIiwibG9hZEZhY2VzIiwiX29uQ3ViZW1hcFJlbW92ZU9yVW5sb2FkIiwicHJlZmlsdGVyZWRDdWJlTWFwMTI4IiwibWlncmF0ZSIsInBhdGhNYXBwaW5nIiwibWFwcGluZ0Zvcm1hdCIsIlRFWFRVUkVTIiwic3RhbmRhcmRNYXRlcmlhbFRleHR1cmVQYXJhbWV0ZXJzIiwiYXNzZXRSZWZlcmVuY2UiLCJsZW5ndGgiLCJfYXNzZXRSZWZlcmVuY2VzIiwiZGF0YUFzc2V0SWQiLCJtYXRlcmlhbFRleHR1cmUiLCJpc1BsYWNlSG9sZGVyVGV4dHVyZSIsImRhdGFWYWxpZGF0ZWQiLCJ2YWxpZGF0ZWQiLCJBc3NldFJlZmVyZW5jZSIsImFkZCIsInJlbW92ZSIsInVubG9hZCIsImdldEFic29sdXRlVXJsIiwiaWQiLCJDVUJFTUFQUyIsInN0YW5kYXJkTWF0ZXJpYWxDdWJlbWFwUGFyYW1ldGVycyIsImxvYWRlZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQWVBLE1BQU1BLGVBQWUsR0FBRztBQUNwQkMsRUFBQUEsS0FBSyxFQUFFLE9BQU87QUFDZEMsRUFBQUEsVUFBVSxFQUFFLE1BQU07QUFDbEJDLEVBQUFBLFdBQVcsRUFBRSxNQUFNO0FBQ25CQyxFQUFBQSxvQkFBb0IsRUFBRSxPQUFPO0FBQzdCQyxFQUFBQSxZQUFZLEVBQUUsT0FBTztBQUNyQkMsRUFBQUEsUUFBUSxFQUFFLE1BQU07QUFDaEJDLEVBQUFBLFFBQVEsRUFBRSxPQUFPO0FBQ2pCQyxFQUFBQSxrQkFBa0IsRUFBRSxNQUFNO0FBQzFC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
