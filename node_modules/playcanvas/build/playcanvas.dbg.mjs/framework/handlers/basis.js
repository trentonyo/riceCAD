/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Debug } from '../../core/debug.js';
import { PIXELFORMAT_R5_G6_B5, PIXELFORMAT_R4_G4_B4_A4 } from '../../platform/graphics/constants.js';
import { BasisWorker } from './basis-worker.js';
import { http } from '../../platform/net/http.js';

const getCompressionFormats = device => {
  return {
    astc: !!device.extCompressedTextureASTC,
    atc: !!device.extCompressedTextureATC,
    dxt: !!device.extCompressedTextureS3TC,
    etc1: !!device.extCompressedTextureETC1,
    etc2: !!device.extCompressedTextureETC,
    pvr: !!device.extCompressedTexturePVRTC
  };
};

const prepareWorkerModules = (config, callback) => {
  const getWorkerBlob = () => {
    const code = '(' + BasisWorker.toString() + ')()\n\n';
    return new Blob([code], {
      type: 'application/javascript'
    });
  };
  const wasmSupported = () => {
    try {
      if (typeof WebAssembly === 'object' && typeof WebAssembly.instantiate === 'function') {
        const module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));
        if (module instanceof WebAssembly.Module) return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;
      }
    } catch (e) {}
    return false;
  };
  const sendResponse = (basisCode, module) => {
    callback(null, {
      workerUrl: URL.createObjectURL(getWorkerBlob()),
      basisUrl: URL.createObjectURL(basisCode),
      module: module,
      rgbPriority: config.rgbPriority,
      rgbaPriority: config.rgbaPriority
    });
  };
  const options = {
    responseType: 'blob',
    retry: config.maxRetries > 0,
    maxRetries: config.maxRetries
  };
  if (config.glueUrl && config.wasmUrl && wasmSupported()) {
    let basisCode = null;
    let module = null;

    http.get(config.glueUrl, options, (err, response) => {
      if (err) {
        callback(err);
      } else {
        if (module) {
          sendResponse(response, module);
        } else {
          basisCode = response;
        }
      }
    });
    const fetchPromise = fetch(config.wasmUrl);
    const compileManual = () => {
      fetchPromise.then(result => result.arrayBuffer()).then(buffer => WebAssembly.compile(buffer)).then(module_ => {
        if (basisCode) {
          sendResponse(basisCode, module_);
        } else {
          module = module_;
        }
      }).catch(err => {
        callback(err, null);
      });
    };

    if (WebAssembly.compileStreaming) {
      WebAssembly.compileStreaming(fetchPromise).then(module_ => {
        if (basisCode) {
          sendResponse(basisCode, module_);
        } else {
          module = module_;
        }
      }).catch(err => {
        Debug.warn(`compileStreaming() failed for ${config.wasmUrl} (${err}), falling back to arraybuffer download.`);
        compileManual();
      });
    } else {
      compileManual();
    }
  } else {
    http.get(config.fallbackUrl, options, (err, response) => {
      if (err) {
        callback(err, null);
      } else {
        sendResponse(response, null);
      }
    });
  }
};

class BasisQueue {
  constructor() {
    this.callbacks = {};
    this.queue = [];
    this.clients = [];
  }
  enqueueJob(url, data, callback, options) {
    if (this.callbacks.hasOwnProperty(url)) {
      this.callbacks[url].push(callback);
    } else {
      this.callbacks[url] = [callback];
      const job = {
        url: url,
        data: data,
        options: options
      };
      if (this.clients.length > 0) {
        this.clients.shift().run(job);
      } else {
        this.queue.push(job);
      }
    }
  }
  enqueueClient(client) {
    if (this.queue.length > 0) {
      client.run(this.queue.shift());
    } else {
      this.clients.push(client);
    }
  }
  handleResponse(url, err, data) {
    const callback = this.callbacks[url];
    if (err) {
      for (let i = 0; i < callback.length; ++i) {
        callback[i](err);
      }
    } else {
      if (data.format === PIXELFORMAT_R5_G6_B5 || data.format === PIXELFORMAT_R4_G4_B4_A4) {
        data.levels = data.levels.map(function (v) {
          return new Uint16Array(v);
        });
      } else {
        data.levels = data.levels.map(function (v) {
          return new Uint8Array(v);
        });
      }
      for (let i = 0; i < callback.length; ++i) {
        callback[i](null, data);
      }
    }
    delete this.callbacks[url];
  }
}

class BasisClient {
  constructor(queue, config, eager) {
    this.queue = queue;
    this.worker = new Worker(config.workerUrl);
    this.worker.addEventListener('message', message => {
      const data = message.data;
      this.queue.handleResponse(data.url, data.err, data.data);
      if (!this.eager) {
        this.queue.enqueueClient(this);
      }
    });
    this.worker.postMessage({
      type: 'init',
      config: config
    });

    this.eager = eager;
  }
  run(job) {
    const transfer = [];
    if (job.data instanceof ArrayBuffer) {
      transfer.push(job.data);
    }
    this.worker.postMessage({
      type: 'transcode',
      url: job.url,
      format: job.format,
      data: job.data,
      options: job.options
    }, transfer);
    if (this.eager) {
      this.queue.enqueueClient(this);
    }
  }
}

const defaultNumWorkers = 1;
const defaultRgbPriority = ['etc1', 'etc2', 'astc', 'dxt', 'pvr', 'atc'];
const defaultRgbaPriority = ['astc', 'dxt', 'etc2', 'pvr', 'atc'];
const defaultMaxRetries = 5;

const queue = new BasisQueue();
let lazyConfig = null;
let initializing = false;

function basisInitialize(config) {
  if (initializing) {
    return;
  }
  if (!config) {
    config = lazyConfig || {};
  } else if (config.lazyInit) {
    lazyConfig = config;
    return;
  }

  if (!config.glueUrl || !config.wasmUrl || !config.fallbackUrl) {
    const modules = (window.config ? window.config.wasmModules : window.PRELOAD_MODULES) || [];
    const wasmModule = modules.find(function (m) {
      return m.moduleName === 'BASIS';
    });
    if (wasmModule) {
      const urlBase = window.ASSET_PREFIX || '';
      if (!config.glueUrl) {
        config.glueUrl = urlBase + wasmModule.glueUrl;
      }
      if (!config.wasmUrl) {
        config.wasmUrl = urlBase + wasmModule.wasmUrl;
      }
      if (!config.fallbackUrl) {
        config.fallbackUrl = urlBase + wasmModule.fallbackUrl;
      }
    }
  }
  if (config.glueUrl || config.wasmUrl || config.fallbackUrl) {
    initializing = true;
    const numWorkers = Math.max(1, Math.min(16, config.numWorkers || defaultNumWorkers));
    const eagerWorkers = config.numWorkers === 1 || (config.hasOwnProperty('eagerWorkers') ? config.eagerWorkers : true);
    config.rgbPriority = config.rgbPriority || defaultRgbPriority;
    config.rgbaPriority = config.rgbaPriority || defaultRgbaPriority;
    config.maxRetries = config.hasOwnProperty('maxRetries') ? config.maxRetries : defaultMaxRetries;
    prepareWorkerModules(config, (err, clientConfig) => {
      if (err) {
        console.error(`failed to initialize basis worker: ${err}`);
      } else {
        for (let i = 0; i < numWorkers; ++i) {
          queue.enqueueClient(new BasisClient(queue, clientConfig, eagerWorkers));
        }
      }
    });
  }
}
let deviceDetails = null;

function basisTranscode(device, url, data, callback, options) {
  basisInitialize();
  if (!deviceDetails) {
    deviceDetails = {
      webgl2: device.webgl2,
      formats: getCompressionFormats(device)
    };
  }
  queue.enqueueJob(url, data, callback, {
    deviceDetails: deviceDetails,
    isGGGR: !!(options != null && options.isGGGR),
    isKTX2: !!(options != null && options.isKTX2)
  });
  return initializing;
}

export { basisInitialize, basisTranscode };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaXMuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9mcmFtZXdvcmsvaGFuZGxlcnMvYmFzaXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGVidWcgfSBmcm9tICcuLi8uLi9jb3JlL2RlYnVnLmpzJztcbmltcG9ydCB7IFBJWEVMRk9STUFUX1I1X0c2X0I1LCBQSVhFTEZPUk1BVF9SNF9HNF9CNF9BNCB9IGZyb20gJy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL2NvbnN0YW50cy5qcyc7XG5pbXBvcnQgeyBCYXNpc1dvcmtlciB9IGZyb20gJy4vYmFzaXMtd29ya2VyLmpzJztcbmltcG9ydCB7IGh0dHAgfSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9uZXQvaHR0cC5qcyc7XG5cbi8qKiBAdHlwZWRlZiB7aW1wb3J0KCcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9ncmFwaGljcy1kZXZpY2UuanMnKS5HcmFwaGljc0RldmljZX0gR3JhcGhpY3NEZXZpY2UgKi9cblxuLy8gZ2V0IHRoZSBsaXN0IG9mIHRoZSBkZXZpY2UncyBzdXBwb3J0ZWQgY29tcHJlc3Npb24gZm9ybWF0c1xuY29uc3QgZ2V0Q29tcHJlc3Npb25Gb3JtYXRzID0gKGRldmljZSkgPT4ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGFzdGM6ICEhZGV2aWNlLmV4dENvbXByZXNzZWRUZXh0dXJlQVNUQyxcbiAgICAgICAgYXRjOiAhIWRldmljZS5leHRDb21wcmVzc2VkVGV4dHVyZUFUQyxcbiAgICAgICAgZHh0OiAhIWRldmljZS5leHRDb21wcmVzc2VkVGV4dHVyZVMzVEMsXG4gICAgICAgIGV0YzE6ICEhZGV2aWNlLmV4dENvbXByZXNzZWRUZXh0dXJlRVRDMSxcbiAgICAgICAgZXRjMjogISFkZXZpY2UuZXh0Q29tcHJlc3NlZFRleHR1cmVFVEMsXG4gICAgICAgIHB2cjogISFkZXZpY2UuZXh0Q29tcHJlc3NlZFRleHR1cmVQVlJUQ1xuICAgIH07XG59O1xuXG4vLyBkb3dubG9hZCBiYXNpcyBjb2RlIGFuZCBjb21waWxlIHRoZSB3YXNtIG1vZHVsZSBmb3IgdXNlIGluIHdvcmtlcnNcbmNvbnN0IHByZXBhcmVXb3JrZXJNb2R1bGVzID0gKGNvbmZpZywgY2FsbGJhY2spID0+IHtcbiAgICBjb25zdCBnZXRXb3JrZXJCbG9iID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBjb2RlID0gJygnICsgQmFzaXNXb3JrZXIudG9TdHJpbmcoKSArICcpKClcXG5cXG4nO1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW2NvZGVdLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JyB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgd2FzbVN1cHBvcnRlZCA9ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgV2ViQXNzZW1ibHkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IG5ldyBXZWJBc3NlbWJseS5Nb2R1bGUoVWludDhBcnJheS5vZigweDAsIDB4NjEsIDB4NzMsIDB4NmQsIDB4MDEsIDB4MDAsIDB4MDAsIDB4MDApKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlIGluc3RhbmNlb2YgV2ViQXNzZW1ibHkuTW9kdWxlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFdlYkFzc2VtYmx5Lkluc3RhbmNlKG1vZHVsZSkgaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5JbnN0YW5jZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkgeyB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3Qgc2VuZFJlc3BvbnNlID0gKGJhc2lzQ29kZSwgbW9kdWxlKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHtcbiAgICAgICAgICAgIHdvcmtlclVybDogVVJMLmNyZWF0ZU9iamVjdFVSTChnZXRXb3JrZXJCbG9iKCkpLFxuICAgICAgICAgICAgYmFzaXNVcmw6IFVSTC5jcmVhdGVPYmplY3RVUkwoYmFzaXNDb2RlKSxcbiAgICAgICAgICAgIG1vZHVsZTogbW9kdWxlLFxuICAgICAgICAgICAgcmdiUHJpb3JpdHk6IGNvbmZpZy5yZ2JQcmlvcml0eSxcbiAgICAgICAgICAgIHJnYmFQcmlvcml0eTogY29uZmlnLnJnYmFQcmlvcml0eVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXG4gICAgICAgIHJldHJ5OiBjb25maWcubWF4UmV0cmllcyA+IDAsXG4gICAgICAgIG1heFJldHJpZXM6IGNvbmZpZy5tYXhSZXRyaWVzXG4gICAgfTtcblxuICAgIGlmIChjb25maWcuZ2x1ZVVybCAmJiBjb25maWcud2FzbVVybCAmJiB3YXNtU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgbGV0IGJhc2lzQ29kZSA9IG51bGw7XG4gICAgICAgIGxldCBtb2R1bGUgPSBudWxsO1xuXG4gICAgICAgIC8vIGRvd25sb2FkIGdsdWUgc2NyaXB0XG4gICAgICAgIGh0dHAuZ2V0KGNvbmZpZy5nbHVlVXJsLCBvcHRpb25zLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVycik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChtb2R1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VuZFJlc3BvbnNlKHJlc3BvbnNlLCBtb2R1bGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2lzQ29kZSA9IHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgZmV0Y2hQcm9taXNlID0gZmV0Y2goY29uZmlnLndhc21VcmwpO1xuXG4gICAgICAgIGNvbnN0IGNvbXBpbGVNYW51YWwgPSAoKSA9PiB7XG4gICAgICAgICAgICBmZXRjaFByb21pc2VcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0LmFycmF5QnVmZmVyKCkpXG4gICAgICAgICAgICAgICAgLnRoZW4oYnVmZmVyID0+IFdlYkFzc2VtYmx5LmNvbXBpbGUoYnVmZmVyKSlcbiAgICAgICAgICAgICAgICAudGhlbigobW9kdWxlXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzaXNDb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kUmVzcG9uc2UoYmFzaXNDb2RlLCBtb2R1bGVfKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZSA9IG1vZHVsZV87XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZG93bmxvYWQgYW5kIGNvbXBpbGUgd2FzbSBtb2R1bGVcbiAgICAgICAgaWYgKFdlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcpIHtcbiAgICAgICAgICAgIFdlYkFzc2VtYmx5LmNvbXBpbGVTdHJlYW1pbmcoZmV0Y2hQcm9taXNlKVxuICAgICAgICAgICAgICAgIC50aGVuKChtb2R1bGVfKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChiYXNpc0NvZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShiYXNpc0NvZGUsIG1vZHVsZV8pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gbW9kdWxlXztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgRGVidWcud2FybihgY29tcGlsZVN0cmVhbWluZygpIGZhaWxlZCBmb3IgJHtjb25maWcud2FzbVVybH0gKCR7ZXJyfSksIGZhbGxpbmcgYmFjayB0byBhcnJheWJ1ZmZlciBkb3dubG9hZC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZU1hbnVhbCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29tcGlsZU1hbnVhbCgpO1xuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaHR0cC5nZXQoY29uZmlnLmZhbGxiYWNrVXJsLCBvcHRpb25zLCAoZXJyLCByZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGVyciwgbnVsbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbmRSZXNwb25zZShyZXNwb25zZSwgbnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn07XG5cbi8vIHF1ZXVlIG9mIHRyYW5zY29kZSBqb2JzIGFuZCBjbGllbnRzIHJlYWR5IHRvIHJ1biB0aGVtXG5jbGFzcyBCYXNpc1F1ZXVlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSB7fTtcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgICB0aGlzLmNsaWVudHMgPSBbXTtcbiAgICB9XG5cbiAgICBlbnF1ZXVlSm9iKHVybCwgZGF0YSwgY2FsbGJhY2ssIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKHRoaXMuY2FsbGJhY2tzLmhhc093blByb3BlcnR5KHVybCkpIHtcbiAgICAgICAgICAgIC8vIGR1cGxpY2F0ZSBVUkwgcmVxdWVzdFxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbdXJsXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIG5ldyBVUkwgcmVxdWVzdFxuICAgICAgICAgICAgdGhpcy5jYWxsYmFja3NbdXJsXSA9IFtjYWxsYmFja107XG5cbiAgICAgICAgICAgIGNvbnN0IGpvYiA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xpZW50cy5zaGlmdCgpLnJ1bihqb2IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLnB1c2goam9iKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVucXVldWVDbGllbnQoY2xpZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNsaWVudC5ydW4odGhpcy5xdWV1ZS5zaGlmdCgpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xpZW50cy5wdXNoKGNsaWVudCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVSZXNwb25zZSh1cmwsIGVyciwgZGF0YSkge1xuICAgICAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMuY2FsbGJhY2tzW3VybF07XG5cbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYWxsYmFjay5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgIChjYWxsYmFja1tpXSkoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIChyZSljcmVhdGUgdHlwZWQgYXJyYXkgZnJvbSB0aGUgcmV0dXJuZWQgYXJyYXkgYnVmZmVyc1xuICAgICAgICAgICAgaWYgKGRhdGEuZm9ybWF0ID09PSBQSVhFTEZPUk1BVF9SNV9HNl9CNSB8fCBkYXRhLmZvcm1hdCA9PT0gUElYRUxGT1JNQVRfUjRfRzRfQjRfQTQpIHtcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgMTYgYml0IGZvcm1hdHNcbiAgICAgICAgICAgICAgICBkYXRhLmxldmVscyA9IGRhdGEubGV2ZWxzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KHYpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBhbGwgb3RoZXJcbiAgICAgICAgICAgICAgICBkYXRhLmxldmVscyA9IGRhdGEubGV2ZWxzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkodik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FsbGJhY2subGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAoY2FsbGJhY2tbaV0pKG51bGwsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRlbGV0ZSB0aGlzLmNhbGxiYWNrc1t1cmxdO1xuICAgIH1cbn1cblxuLy8gY2xpZW50IGludGVyZmFjZSB0byBhIGJhc2lzIHRyYW5zY29kZXIgaW5zdGFuY2UgcnVubmluZyBvbiBhIHdlYiB3b3JrZXJcbmNsYXNzIEJhc2lzQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihxdWV1ZSwgY29uZmlnLCBlYWdlcikge1xuICAgICAgICB0aGlzLnF1ZXVlID0gcXVldWU7XG4gICAgICAgIHRoaXMud29ya2VyID0gbmV3IFdvcmtlcihjb25maWcud29ya2VyVXJsKTtcbiAgICAgICAgdGhpcy53b3JrZXIuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gbWVzc2FnZS5kYXRhO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZS5oYW5kbGVSZXNwb25zZShkYXRhLnVybCwgZGF0YS5lcnIsIGRhdGEuZGF0YSk7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWFnZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVDbGllbnQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndvcmtlci5wb3N0TWVzc2FnZSh7IHR5cGU6ICdpbml0JywgY29uZmlnOiBjb25maWcgfSk7XG5cbiAgICAgICAgLy8gYW4gZWFnZXIgY2xpZW50IHdpbGwgZW5xdWV1ZSBpdHNlbGYgd2hpbGUgYSBqb2IgaXMgcnVubmluZy4gYVxuICAgICAgICAvLyBub24tZWFnZXIgY2xpZW50IHdpbGwgb25seSBlbnF1ZXVlIGl0c2VsZiBvbmNlIHRoZSBjdXJyZW50IGpvYlxuICAgICAgICAvLyBoYXMgZmluaXNoZWQgcnVubmluZy5cbiAgICAgICAgdGhpcy5lYWdlciA9IGVhZ2VyO1xuICAgIH1cblxuICAgIHJ1bihqb2IpIHtcbiAgICAgICAgY29uc3QgdHJhbnNmZXIgPSBbXTtcbiAgICAgICAgaWYgKGpvYi5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIHRyYW5zZmVyLnB1c2goam9iLmRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc2NvZGUnLFxuICAgICAgICAgICAgdXJsOiBqb2IudXJsLFxuICAgICAgICAgICAgZm9ybWF0OiBqb2IuZm9ybWF0LFxuICAgICAgICAgICAgZGF0YTogam9iLmRhdGEsXG4gICAgICAgICAgICBvcHRpb25zOiBqb2Iub3B0aW9uc1xuICAgICAgICB9LCB0cmFuc2Zlcik7XG4gICAgICAgIGlmICh0aGlzLmVhZ2VyKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmVucXVldWVDbGllbnQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGRlZmF1bHRzXG5jb25zdCBkZWZhdWx0TnVtV29ya2VycyA9IDE7XG5jb25zdCBkZWZhdWx0UmdiUHJpb3JpdHkgPSBbJ2V0YzEnLCAnZXRjMicsICdhc3RjJywgJ2R4dCcsICdwdnInLCAnYXRjJ107XG5jb25zdCBkZWZhdWx0UmdiYVByaW9yaXR5ID0gWydhc3RjJywgJ2R4dCcsICdldGMyJywgJ3B2cicsICdhdGMnXTtcbmNvbnN0IGRlZmF1bHRNYXhSZXRyaWVzID0gNTtcblxuLy8gZ2xvYmFsIHN0YXRlXG5jb25zdCBxdWV1ZSA9IG5ldyBCYXNpc1F1ZXVlKCk7XG5sZXQgbGF6eUNvbmZpZyA9IG51bGw7XG5sZXQgaW5pdGlhbGl6aW5nID0gZmFsc2U7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgQmFzaXMgdHJhbnNjb2RlIHdvcmtlci5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gW2NvbmZpZ10gLSBUaGUgQmFzaXMgY29uZmlndXJhdGlvbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBbY29uZmlnLmdsdWVVcmxdIC0gVVJMIG9mIGdsdWUgc2NyaXB0LlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcud2FzbVVybF0gLSBVUkwgb2YgdGhlIHdhc20gbW9kdWxlLlxuICogQHBhcmFtIHtzdHJpbmd9IFtjb25maWcuZmFsbGJhY2tVcmxdIC0gVVJMIG9mIHRoZSBmYWxsYmFjayBzY3JpcHQgdG8gdXNlIHdoZW4gd2FzbSBtb2R1bGVzXG4gKiBhcmVuJ3Qgc3VwcG9ydGVkLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmxhenlJbml0XSAtIFdhaXQgZm9yIGZpcnN0IHRyYW5zY29kZSByZXF1ZXN0IGJlZm9yZSBpbml0aWFsaXppbmcgQmFzaXNcbiAqIChkZWZhdWx0IGlzIGZhbHNlKS4gT3RoZXJ3aXNlIGluaXRpYWxpemUgQmFzaXMgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge251bWJlcn0gW2NvbmZpZy5udW1Xb3JrZXJzXSAtIE51bWJlciBvZiB3b3JrZXJzIHRvIHVzZSBmb3IgdHJhbnNjb2RpbmcgKGRlZmF1bHQgaXMgMSkuXG4gKiBXaGlsZSBpdCBpcyBwb3NzaWJsZSB0byBpbXByb3ZlIHRyYW5zY29kZSBwZXJmb3JtYW5jZSB1c2luZyBtdWx0aXBsZSB3b3JrZXJzLCB0aGlzIHdpbGwgbGlrZWx5XG4gKiBkZXBlbmQgb24gdGhlIHJ1bnRpbWUgcGxhdGZvcm0uIEZvciBleGFtcGxlLCBkZXNrdG9wIHdpbGwgbGlrZWx5IGJlbmVmaXQgZnJvbSBtb3JlIHdvcmtlcnNcbiAqIGNvbXBhcmVkIHRvIG1vYmlsZS4gQWxzbyBrZWVwIGluIG1pbmQgdGhhdCBpdCB0YWtlcyB0aW1lIHRvIGluaXRpYWxpemUgd29ya2VycyBhbmQgaW5jcmVhc2luZ1xuICogdGhpcyB2YWx1ZSBjb3VsZCBpbXBhY3QgYXBwbGljYXRpb24gc3RhcnR1cCB0aW1lLiBNYWtlIHN1cmUgdG8gdGVzdCB5b3VyIGFwcGxpY2F0aW9uIHBlcmZvcm1hbmNlXG4gKiBvbiBhbGwgdGFyZ2V0IHBsYXRmb3JtcyB3aGVuIGNoYW5naW5nIHRoaXMgcGFyYW1ldGVyLlxuICogQHBhcmFtIHtib29sZWFufSBbY29uZmlnLmVhZ2VyV29ya2Vyc10gLSBVc2UgZWFnZXIgd29ya2VycyAoZGVmYXVsdCBpcyB0cnVlKS4gV2hlbiBlbmFibGVkLCBqb2JzXG4gKiBhcmUgYXNzaWduZWQgdG8gd29ya2VycyBpbW1lZGlhdGVseSwgaW5kZXBlbmRlbnQgb2YgdGhlaXIgd29yayBsb2FkLiBUaGlzIGNhbiByZXN1bHQgaW5cbiAqIHVuYmFsYW5jZWQgd29ya2xvYWRzLCBob3dldmVyIHRoZXJlIGlzIG5vIGRlbGF5IGJldHdlZW4gam9icy4gSWYgZGlzYWJsZWQsIG5ldyBqb2JzIGFyZSBhc3NpZ25lZFxuICogdG8gd29ya2VycyBvbmx5IHdoZW4gdGhlaXIgcHJldmlvdXMgam9iIGhhcyBjb21wbGV0ZWQuIFRoaXMgd2lsbCByZXN1bHQgaW4gYmFsYW5jZWQgd29ya2xvYWRzXG4gKiBhY3Jvc3Mgd29ya2VycywgaG93ZXZlciB3b3JrZXJzIGNhbiBiZSBpZGxlIGZvciBhIHNob3J0IHRpbWUgYmV0d2VlbiBqb2JzLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gW2NvbmZpZy5yZ2JQcmlvcml0eV0gLSBBcnJheSBvZiB0ZXh0dXJlIGNvbXByZXNzaW9uIGZvcm1hdHMgaW4gcHJpb3JpdHkgb3JkZXJcbiAqIGZvciB0ZXh0dXJlcyB3aXRob3V0IGFscGhhLiBUaGUgc3VwcG9ydGVkIGNvbXByZXNzZWQgZm9ybWF0cyBhcmU6ICdhc3RjJywgJ2F0YycsICdkeHQnLCAnZXRjMScsXG4gKiAnZXRjMicsICdwdnInLlxuICogQHBhcmFtIHtzdHJpbmdbXX0gW2NvbmZpZy5yZ2JhUHJpb3JpdHldIC0gQXJyYXkgb2YgdGV4dHVyZSBjb21wcmVzc2lvbiBmb3JtYXRzIGluIHByaW9yaXR5IG9yZGVyXG4gKiBmb3IgdGV4dHVyZXMgd2l0aCBhbHBoYS4gVGhlIHN1cHBvcnRlZCBjb21wcmVzc2VkIGZvcm1hdHMgYXJlOiAnYXN0YycsICdhdGMnLCAnZHh0JywgJ2V0YzEnLFxuICogJ2V0YzInLCAncHZyJy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbY29uZmlnLm1heFJldHJpZXNdIC0gTnVtYmVyIG9mIGh0dHAgbG9hZCByZXRyeSBhdHRlbXB0cy4gRGVmYXVsdHMgdG8gNS5cbiAqL1xuZnVuY3Rpb24gYmFzaXNJbml0aWFsaXplKGNvbmZpZykge1xuICAgIGlmIChpbml0aWFsaXppbmcpIHtcbiAgICAgICAgLy8gYWxyZWFkeSBpbml0aWFsaXppbmdcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghY29uZmlnKSB7XG4gICAgICAgIGNvbmZpZyA9IGxhenlDb25maWcgfHwge307XG4gICAgfSBlbHNlIGlmIChjb25maWcubGF6eUluaXQpIHtcbiAgICAgICAgbGF6eUNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIGFueSBVUkxzIGFyZSBub3Qgc3BlY2lmaWVkIGluIHRoZSBjb25maWcsIHRha2UgdGhlbSBmcm9tIHRoZSBnbG9iYWwgUEMgY29uZmlnIHN0cnVjdHVyZVxuICAgIGlmICghY29uZmlnLmdsdWVVcmwgfHwgIWNvbmZpZy53YXNtVXJsIHx8ICFjb25maWcuZmFsbGJhY2tVcmwpIHtcbiAgICAgICAgY29uc3QgbW9kdWxlcyA9ICh3aW5kb3cuY29uZmlnID8gd2luZG93LmNvbmZpZy53YXNtTW9kdWxlcyA6IHdpbmRvdy5QUkVMT0FEX01PRFVMRVMpIHx8IFtdO1xuICAgICAgICBjb25zdCB3YXNtTW9kdWxlID0gbW9kdWxlcy5maW5kKGZ1bmN0aW9uIChtKSB7XG4gICAgICAgICAgICByZXR1cm4gbS5tb2R1bGVOYW1lID09PSAnQkFTSVMnO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHdhc21Nb2R1bGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHVybEJhc2UgPSB3aW5kb3cuQVNTRVRfUFJFRklYIHx8ICcnO1xuICAgICAgICAgICAgaWYgKCFjb25maWcuZ2x1ZVVybCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5nbHVlVXJsID0gdXJsQmFzZSArIHdhc21Nb2R1bGUuZ2x1ZVVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghY29uZmlnLndhc21VcmwpIHtcbiAgICAgICAgICAgICAgICBjb25maWcud2FzbVVybCA9IHVybEJhc2UgKyB3YXNtTW9kdWxlLndhc21Vcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy5mYWxsYmFja1VybCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5mYWxsYmFja1VybCA9IHVybEJhc2UgKyB3YXNtTW9kdWxlLmZhbGxiYWNrVXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpZy5nbHVlVXJsIHx8IGNvbmZpZy53YXNtVXJsIHx8IGNvbmZpZy5mYWxsYmFja1VybCkge1xuICAgICAgICBpbml0aWFsaXppbmcgPSB0cnVlO1xuXG4gICAgICAgIGNvbnN0IG51bVdvcmtlcnMgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxNiwgY29uZmlnLm51bVdvcmtlcnMgfHwgZGVmYXVsdE51bVdvcmtlcnMpKTtcbiAgICAgICAgY29uc3QgZWFnZXJXb3JrZXJzID0gKGNvbmZpZy5udW1Xb3JrZXJzID09PSAxKSB8fCAoY29uZmlnLmhhc093blByb3BlcnR5KCdlYWdlcldvcmtlcnMnKSA/IGNvbmZpZy5lYWdlcldvcmtlcnMgOiB0cnVlKTtcblxuICAgICAgICBjb25maWcucmdiUHJpb3JpdHkgPSBjb25maWcucmdiUHJpb3JpdHkgfHwgZGVmYXVsdFJnYlByaW9yaXR5O1xuICAgICAgICBjb25maWcucmdiYVByaW9yaXR5ID0gY29uZmlnLnJnYmFQcmlvcml0eSB8fCBkZWZhdWx0UmdiYVByaW9yaXR5O1xuICAgICAgICBjb25maWcubWF4UmV0cmllcyA9IGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSgnbWF4UmV0cmllcycpID8gY29uZmlnLm1heFJldHJpZXMgOiBkZWZhdWx0TWF4UmV0cmllcztcblxuICAgICAgICBwcmVwYXJlV29ya2VyTW9kdWxlcyhjb25maWcsIChlcnIsIGNsaWVudENvbmZpZykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGZhaWxlZCB0byBpbml0aWFsaXplIGJhc2lzIHdvcmtlcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtV29ya2VyczsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlLmVucXVldWVDbGllbnQobmV3IEJhc2lzQ2xpZW50KHF1ZXVlLCBjbGllbnRDb25maWcsIGVhZ2VyV29ya2VycykpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5sZXQgZGV2aWNlRGV0YWlscyA9IG51bGw7XG5cbi8qKlxuICogRW5xdWV1ZSBhIGJsb2Igb2YgYmFzaXMgZGF0YSBmb3IgdHJhbnNjb2RpbmcuXG4gKlxuICogQHBhcmFtIHtHcmFwaGljc0RldmljZX0gZGV2aWNlIC0gVGhlIGdyYXBoaWNzIGRldmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBVUkwgb2YgdGhlIGJhc2lzIGZpbGUuXG4gKiBAcGFyYW0ge29iamVjdH0gZGF0YSAtIFRoZSBmaWxlIGRhdGEgdG8gdHJhbnNjb2RlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgLSBDYWxsYmFjayBmdW5jdGlvbiB0byByZWNlaXZlIHRyYW5zY29kZSByZXN1bHQuXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gT3B0aW9ucyBzdHJ1Y3R1cmVcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuaXNHR0dSXSAtIEluZGljYXRlcyB0aGlzIGlzIGEgR0dHUiBzd2l6emxlZCB0ZXh0dXJlLiBVbmRlciBzb21lXG4gKiBjaXJjdW1zdGFuY2VzIHRoZSB0ZXh0dXJlIHdpbGwgYmUgdW5zd2l6emxlZCBkdXJpbmcgdHJhbnNjb2RpbmcuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmlzS1RYMl0gLSBJbmRpY2F0ZXMgdGhlIGltYWdlIGlzIEtUWDIgZm9ybWF0LiBPdGhlcndpc2VcbiAqIGJhc2lzIGZvcm1hdCBpcyBhc3N1bWVkLlxuICogQHJldHVybnMge2Jvb2xlYW59IFRydWUgaWYgdGhlIGJhc2lzIHdvcmtlciB3YXMgaW5pdGlhbGl6ZWQgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqIEBpZ25vcmVcbiAqL1xuZnVuY3Rpb24gYmFzaXNUcmFuc2NvZGUoZGV2aWNlLCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBvcHRpb25zKSB7XG4gICAgYmFzaXNJbml0aWFsaXplKCk7XG5cbiAgICBpZiAoIWRldmljZURldGFpbHMpIHtcbiAgICAgICAgZGV2aWNlRGV0YWlscyA9IHtcbiAgICAgICAgICAgIHdlYmdsMjogZGV2aWNlLndlYmdsMixcbiAgICAgICAgICAgIGZvcm1hdHM6IGdldENvbXByZXNzaW9uRm9ybWF0cyhkZXZpY2UpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcXVldWUuZW5xdWV1ZUpvYih1cmwsIGRhdGEsIGNhbGxiYWNrLCB7XG4gICAgICAgIGRldmljZURldGFpbHM6IGRldmljZURldGFpbHMsXG4gICAgICAgIGlzR0dHUjogISFvcHRpb25zPy5pc0dHR1IsXG4gICAgICAgIGlzS1RYMjogISFvcHRpb25zPy5pc0tUWDJcbiAgICB9KTtcblxuICAgIHJldHVybiBpbml0aWFsaXppbmc7XG59XG5cbmV4cG9ydCB7XG4gICAgYmFzaXNJbml0aWFsaXplLFxuICAgIGJhc2lzVHJhbnNjb2RlXG59O1xuIl0sIm5hbWVzIjpbImdldENvbXByZXNzaW9uRm9ybWF0cyIsImRldmljZSIsImFzdGMiLCJleHRDb21wcmVzc2VkVGV4dHVyZUFTVEMiLCJhdGMiLCJleHRDb21wcmVzc2VkVGV4dHVyZUFUQyIsImR4dCIsImV4dENvbXByZXNzZWRUZXh0dXJlUzNUQyIsImV0YzEiLCJleHRDb21wcmVzc2VkVGV4dHVyZUVUQzEiLCJldGMyIiwiZXh0Q29tcHJlc3NlZFRleHR1cmVFVEMiLCJwdnIiLCJleHRDb21wcmVzc2VkVGV4dHVyZVBWUlRDIiwicHJlcGFyZVdvcmtlck1vZHVsZXMiLCJjb25maWciLCJjYWxsYmFjayIsImdldFdvcmtlckJsb2IiLCJjb2RlIiwiQmFzaXNXb3JrZXIiLCJ0b1N0cmluZyIsIkJsb2IiLCJ0eXBlIiwid2FzbVN1cHBvcnRlZCIsIldlYkFzc2VtYmx5IiwiaW5zdGFudGlhdGUiLCJtb2R1bGUiLCJNb2R1bGUiLCJVaW50OEFycmF5Iiwib2YiLCJJbnN0YW5jZSIsImUiLCJzZW5kUmVzcG9uc2UiLCJiYXNpc0NvZGUiLCJ3b3JrZXJVcmwiLCJVUkwiLCJjcmVhdGVPYmplY3RVUkwiLCJiYXNpc1VybCIsInJnYlByaW9yaXR5IiwicmdiYVByaW9yaXR5Iiwib3B0aW9ucyIsInJlc3BvbnNlVHlwZSIsInJldHJ5IiwibWF4UmV0cmllcyIsImdsdWVVcmwiLCJ3YXNtVXJsIiwiaHR0cCIsImdldCIsImVyciIsInJlc3BvbnNlIiwiZmV0Y2hQcm9taXNlIiwiZmV0Y2giLCJjb21waWxlTWFudWFsIiwidGhlbiIsInJlc3VsdCIsImFycmF5QnVmZmVyIiwiYnVmZmVyIiwiY29tcGlsZSIsIm1vZHVsZV8iLCJjYXRjaCIsImNvbXBpbGVTdHJlYW1pbmciLCJEZWJ1ZyIsIndhcm4iLCJmYWxsYmFja1VybCIsIkJhc2lzUXVldWUiLCJjb25zdHJ1Y3RvciIsImNhbGxiYWNrcyIsInF1ZXVlIiwiY2xpZW50cyIsImVucXVldWVKb2IiLCJ1cmwiLCJkYXRhIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiam9iIiwibGVuZ3RoIiwic2hpZnQiLCJydW4iLCJlbnF1ZXVlQ2xpZW50IiwiY2xpZW50IiwiaGFuZGxlUmVzcG9uc2UiLCJpIiwiZm9ybWF0IiwiUElYRUxGT1JNQVRfUjVfRzZfQjUiLCJQSVhFTEZPUk1BVF9SNF9HNF9CNF9BNCIsImxldmVscyIsIm1hcCIsInYiLCJVaW50MTZBcnJheSIsIkJhc2lzQ2xpZW50IiwiZWFnZXIiLCJ3b3JrZXIiLCJXb3JrZXIiLCJhZGRFdmVudExpc3RlbmVyIiwibWVzc2FnZSIsInBvc3RNZXNzYWdlIiwidHJhbnNmZXIiLCJBcnJheUJ1ZmZlciIsImRlZmF1bHROdW1Xb3JrZXJzIiwiZGVmYXVsdFJnYlByaW9yaXR5IiwiZGVmYXVsdFJnYmFQcmlvcml0eSIsImRlZmF1bHRNYXhSZXRyaWVzIiwibGF6eUNvbmZpZyIsImluaXRpYWxpemluZyIsImJhc2lzSW5pdGlhbGl6ZSIsImxhenlJbml0IiwibW9kdWxlcyIsIndpbmRvdyIsIndhc21Nb2R1bGVzIiwiUFJFTE9BRF9NT0RVTEVTIiwid2FzbU1vZHVsZSIsImZpbmQiLCJtIiwibW9kdWxlTmFtZSIsInVybEJhc2UiLCJBU1NFVF9QUkVGSVgiLCJudW1Xb3JrZXJzIiwiTWF0aCIsIm1heCIsIm1pbiIsImVhZ2VyV29ya2VycyIsImNsaWVudENvbmZpZyIsImNvbnNvbGUiLCJlcnJvciIsImRldmljZURldGFpbHMiLCJiYXNpc1RyYW5zY29kZSIsIndlYmdsMiIsImZvcm1hdHMiLCJpc0dHR1IiLCJpc0tUWDIiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFRQSxNQUFNQSxxQkFBcUIsR0FBSUMsTUFBTSxJQUFLO0VBQ3RDLE9BQU87QUFDSEMsSUFBQUEsSUFBSSxFQUFFLENBQUMsQ0FBQ0QsTUFBTSxDQUFDRSx3QkFBd0I7QUFDdkNDLElBQUFBLEdBQUcsRUFBRSxDQUFDLENBQUNILE1BQU0sQ0FBQ0ksdUJBQXVCO0FBQ3JDQyxJQUFBQSxHQUFHLEVBQUUsQ0FBQyxDQUFDTCxNQUFNLENBQUNNLHdCQUF3QjtBQUN0Q0MsSUFBQUEsSUFBSSxFQUFFLENBQUMsQ0FBQ1AsTUFBTSxDQUFDUSx3QkFBd0I7QUFDdkNDLElBQUFBLElBQUksRUFBRSxDQUFDLENBQUNULE1BQU0sQ0FBQ1UsdUJBQXVCO0FBQ3RDQyxJQUFBQSxHQUFHLEVBQUUsQ0FBQyxDQUFDWCxNQUFNLENBQUNZLHlCQUFBQTtHQUNqQixDQUFBO0FBQ0wsQ0FBQyxDQUFBOztBQUdELE1BQU1DLG9CQUFvQixHQUFHLENBQUNDLE1BQU0sRUFBRUMsUUFBUSxLQUFLO0VBQy9DLE1BQU1DLGFBQWEsR0FBRyxNQUFNO0lBQ3hCLE1BQU1DLElBQUksR0FBRyxHQUFHLEdBQUdDLFdBQVcsQ0FBQ0MsUUFBUSxFQUFFLEdBQUcsU0FBUyxDQUFBO0FBQ3JELElBQUEsT0FBTyxJQUFJ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
