/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { path } from '../../../core/path.js';
import { http } from '../../../platform/net/http.js';
import { TEXHINT_ASSET, PIXELFORMAT_R8_G8_B8, PIXELFORMAT_R8_G8_B8_A8 } from '../../../platform/graphics/constants.js';
import { Texture } from '../../../platform/graphics/texture.js';
import { ABSOLUTE_URL } from '../../asset/constants.js';

class ImgParser {
  constructor(registry, device) {
    this.crossOrigin = registry.prefix ? 'anonymous' : null;
    this.maxRetries = 0;
    this.device = device;
  }
  load(url, callback, asset) {
    var _asset$file;
    const hasContents = !!(asset != null && (_asset$file = asset.file) != null && _asset$file.contents);
    if (hasContents) {
      if (this.device.supportsImageBitmap) {
        this._loadImageBitmapFromData(asset.file.contents, callback);
        return;
      }
      url = {
        load: URL.createObjectURL(new Blob([asset.file.contents])),
        original: url.original
      };
    }
    const handler = (err, result) => {
      if (hasContents) {
        URL.revokeObjectURL(url.load);
      }
      callback(err, result);
    };
    let crossOrigin;
    if (asset && asset.options && asset.options.hasOwnProperty('crossOrigin')) {
      crossOrigin = asset.options.crossOrigin;
    } else if (ABSOLUTE_URL.test(url.load)) {
      crossOrigin = this.crossOrigin;
    }
    if (this.device.supportsImageBitmap) {
      this._loadImageBitmap(url.load, url.original, crossOrigin, handler);
    } else {
      this._loadImage(url.load, url.original, crossOrigin, handler);
    }
  }
  open(url, data, device) {
    const ext = path.getExtension(url).toLowerCase();
    const format = ext === '.jpg' || ext === '.jpeg' ? PIXELFORMAT_R8_G8_B8 : PIXELFORMAT_R8_G8_B8_A8;
    const texture = new Texture(device, {
      name: url,
      profilerHint: TEXHINT_ASSET,
      width: data.width,
      height: data.height,
      format: format
    });
    texture.setSource(data);
    return texture;
  }
  _loadImage(url, originalUrl, crossOrigin, callback) {
    const image = new Image();
    if (crossOrigin) {
      image.crossOrigin = crossOrigin;
    }
    let retries = 0;
    const maxRetries = this.maxRetries;
    let retryTimeout;

    image.onload = function () {
      callback(null, image);
    };
    image.onerror = function () {
      if (retryTimeout) return;
      if (maxRetries > 0 && ++retries <= maxRetries) {
        const retryDelay = Math.pow(2, retries) * 100;
        console.log(`Error loading Texture from: '${originalUrl}' - Retrying in ${retryDelay}ms...`);
        const idx = url.indexOf('?');
        const separator = idx >= 0 ? '&' : '?';
        retryTimeout = setTimeout(function () {
          image.src = url + separator + 'retry=' + Date.now();
          retryTimeout = null;
        }, retryDelay);
      } else {
        callback(`Error loading Texture from: '${originalUrl}'`);
      }
    };
    image.src = url;
  }
  _loadImageBitmap(url, originalUrl, crossOrigin, callback) {
    const options = {
      cache: true,
      responseType: 'blob',
      retry: this.maxRetries > 0,
      maxRetries: this.maxRetries
    };
    http.get(url, options, function (err, blob) {
      if (err) {
        callback(err);
      } else {
        createImageBitmap(blob, {
          premultiplyAlpha: 'none'
        }).then(imageBitmap => callback(null, imageBitmap)).catch(e => callback(e));
      }
    });
  }
  _loadImageBitmapFromData(data, callback) {
    createImageBitmap(new Blob([data]), {
      premultiplyAlpha: 'none'
    }).then(imageBitmap => callback(null, imageBitmap)).catch(e => callback(e));
  }
}

export { ImgParser };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1nLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvZnJhbWV3b3JrL3BhcnNlcnMvdGV4dHVyZS9pbWcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcGF0aCB9IGZyb20gJy4uLy4uLy4uL2NvcmUvcGF0aC5qcyc7XG5pbXBvcnQgeyBodHRwIH0gZnJvbSAnLi4vLi4vLi4vcGxhdGZvcm0vbmV0L2h0dHAuanMnO1xuXG5pbXBvcnQge1xuICAgIFBJWEVMRk9STUFUX1I4X0c4X0I4LCBQSVhFTEZPUk1BVF9SOF9HOF9COF9BOCwgVEVYSElOVF9BU1NFVFxufSBmcm9tICcuLi8uLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHsgVGV4dHVyZSB9IGZyb20gJy4uLy4uLy4uL3BsYXRmb3JtL2dyYXBoaWNzL3RleHR1cmUuanMnO1xuXG5pbXBvcnQgeyBBQlNPTFVURV9VUkwgfSBmcm9tICcuLi8uLi8uLi9mcmFtZXdvcmsvYXNzZXQvY29uc3RhbnRzLmpzJztcblxuLyoqIEB0eXBlZGVmIHtpbXBvcnQoJy4uLy4uL2hhbmRsZXJzL3RleHR1cmUuanMnKS5UZXh0dXJlUGFyc2VyfSBUZXh0dXJlUGFyc2VyICovXG5cbi8qKlxuICogUGFyc2VyIGZvciBicm93c2VyLXN1cHBvcnRlZCBpbWFnZSBmb3JtYXRzLlxuICpcbiAqIEBpbXBsZW1lbnRzIHtUZXh0dXJlUGFyc2VyfVxuICogQGlnbm9yZVxuICovXG5jbGFzcyBJbWdQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHJlZ2lzdHJ5LCBkZXZpY2UpIHtcbiAgICAgICAgLy8gYnkgZGVmYXVsdCBkb24ndCB0cnkgY3Jvc3Mtb3JpZ2luLCBiZWNhdXNlIHNvbWUgYnJvd3NlcnMgc2VuZCBkaWZmZXJlbnQgY29va2llcyAoZS5nLiBzYWZhcmkpIGlmIHRoaXMgaXMgc2V0LlxuICAgICAgICB0aGlzLmNyb3NzT3JpZ2luID0gcmVnaXN0cnkucHJlZml4ID8gJ2Fub255bW91cycgOiBudWxsO1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSAwO1xuICAgICAgICB0aGlzLmRldmljZSA9IGRldmljZTtcbiAgICB9XG5cbiAgICBsb2FkKHVybCwgY2FsbGJhY2ssIGFzc2V0KSB7XG4gICAgICAgIGNvbnN0IGhhc0NvbnRlbnRzID0gISFhc3NldD8uZmlsZT8uY29udGVudHM7XG5cbiAgICAgICAgaWYgKGhhc0NvbnRlbnRzKSB7XG4gICAgICAgICAgICAvLyBJbWFnZUJpdG1hcCBpbnRlcmZhY2UgY2FuIGxvYWQgaWFnZVxuICAgICAgICAgICAgaWYgKHRoaXMuZGV2aWNlLnN1cHBvcnRzSW1hZ2VCaXRtYXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb2FkSW1hZ2VCaXRtYXBGcm9tRGF0YShhc3NldC5maWxlLmNvbnRlbnRzLCBjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXJsID0ge1xuICAgICAgICAgICAgICAgIGxvYWQ6IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2Fzc2V0LmZpbGUuY29udGVudHNdKSksXG4gICAgICAgICAgICAgICAgb3JpZ2luYWw6IHVybC5vcmlnaW5hbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGhhbmRsZXIgPSAoZXJyLCByZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGlmIChoYXNDb250ZW50cykge1xuICAgICAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwodXJsLmxvYWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soZXJyLCByZXN1bHQpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGxldCBjcm9zc09yaWdpbjtcbiAgICAgICAgaWYgKGFzc2V0ICYmIGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY3Jvc3NPcmlnaW4nKSkge1xuICAgICAgICAgICAgY3Jvc3NPcmlnaW4gPSBhc3NldC5vcHRpb25zLmNyb3NzT3JpZ2luO1xuICAgICAgICB9IGVsc2UgaWYgKEFCU09MVVRFX1VSTC50ZXN0KHVybC5sb2FkKSkge1xuICAgICAgICAgICAgY3Jvc3NPcmlnaW4gPSB0aGlzLmNyb3NzT3JpZ2luO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZGV2aWNlLnN1cHBvcnRzSW1hZ2VCaXRtYXApIHtcbiAgICAgICAgICAgIHRoaXMuX2xvYWRJbWFnZUJpdG1hcCh1cmwubG9hZCwgdXJsLm9yaWdpbmFsLCBjcm9zc09yaWdpbiwgaGFuZGxlcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9sb2FkSW1hZ2UodXJsLmxvYWQsIHVybC5vcmlnaW5hbCwgY3Jvc3NPcmlnaW4sIGhhbmRsZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3Blbih1cmwsIGRhdGEsIGRldmljZSkge1xuICAgICAgICBjb25zdCBleHQgPSBwYXRoLmdldEV4dGVuc2lvbih1cmwpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IChleHQgPT09ICcuanBnJyB8fCBleHQgPT09ICcuanBlZycpID8gUElYRUxGT1JNQVRfUjhfRzhfQjggOiBQSVhFTEZPUk1BVF9SOF9HOF9COF9BODtcbiAgICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKGRldmljZSwge1xuICAgICAgICAgICAgbmFtZTogdXJsLFxuICAgICAgICAgICAgLy8gI2lmIF9QUk9GSUxFUlxuICAgICAgICAgICAgcHJvZmlsZXJIaW50OiBURVhISU5UX0FTU0VULFxuICAgICAgICAgICAgLy8gI2VuZGlmXG4gICAgICAgICAgICB3aWR0aDogZGF0YS53aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogZGF0YS5oZWlnaHQsXG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdFxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dHVyZS5zZXRTb3VyY2UoZGF0YSk7XG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH1cblxuICAgIF9sb2FkSW1hZ2UodXJsLCBvcmlnaW5hbFVybCwgY3Jvc3NPcmlnaW4sIGNhbGxiYWNrKSB7XG4gICAgICAgIGNvbnN0IGltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCByZXRyaWVzID0gMDtcbiAgICAgICAgY29uc3QgbWF4UmV0cmllcyA9IHRoaXMubWF4UmV0cmllcztcbiAgICAgICAgbGV0IHJldHJ5VGltZW91dDtcblxuICAgICAgICAvLyBDYWxsIHN1Y2Nlc3MgY2FsbGJhY2sgYWZ0ZXIgb3BlbmluZyBUZXh0dXJlXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGltYWdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUmV0cnkgYSBmZXcgdGltZXMgYmVmb3JlIGZhaWxpbmdcbiAgICAgICAgICAgIGlmIChyZXRyeVRpbWVvdXQpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKG1heFJldHJpZXMgPiAwICYmICsrcmV0cmllcyA8PSBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmV0cnlEZWxheSA9IE1hdGgucG93KDIsIHJldHJpZXMpICogMTAwO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBsb2FkaW5nIFRleHR1cmUgZnJvbTogJyR7b3JpZ2luYWxVcmx9JyAtIFJldHJ5aW5nIGluICR7cmV0cnlEZWxheX1tcy4uLmApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgaWR4ID0gdXJsLmluZGV4T2YoJz8nKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBpZHggPj0gMCA/ICcmJyA6ICc/JztcblxuICAgICAgICAgICAgICAgIHJldHJ5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGFkZCBhIGNhY2hlIGJ1c3RpbmcgYXJndW1lbnQgaWYgd2UgYXJlIHRyeWluZyB0byByZS1sb2FkIGFuIGltYWdlIGVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCB0aGUgc2FtZSBVUkxcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2Uuc3JjID0gdXJsICsgc2VwYXJhdG9yICsgJ3JldHJ5PScgKyBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICByZXRyeVRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH0sIHJldHJ5RGVsYXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBDYWxsIGVycm9yIGNhbGxiYWNrIHdpdGggZGV0YWlscy5cbiAgICAgICAgICAgICAgICBjYWxsYmFjayhgRXJyb3IgbG9hZGluZyBUZXh0dXJlIGZyb206ICcke29yaWdpbmFsVXJsfSdgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbWFnZS5zcmMgPSB1cmw7XG4gICAgfVxuXG4gICAgX2xvYWRJbWFnZUJpdG1hcCh1cmwsIG9yaWdpbmFsVXJsLCBjcm9zc09yaWdpbiwgY2FsbGJhY2spIHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYmxvYicsXG4gICAgICAgICAgICByZXRyeTogdGhpcy5tYXhSZXRyaWVzID4gMCxcbiAgICAgICAgICAgIG1heFJldHJpZXM6IHRoaXMubWF4UmV0cmllc1xuICAgICAgICB9O1xuICAgICAgICBodHRwLmdldCh1cmwsIG9wdGlvbnMsIGZ1bmN0aW9uIChlcnIsIGJsb2IpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVJbWFnZUJpdG1hcChibG9iLCB7XG4gICAgICAgICAgICAgICAgICAgIHByZW11bHRpcGx5QWxwaGE6ICdub25lJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGltYWdlQml0bWFwID0+IGNhbGxiYWNrKG51bGwsIGltYWdlQml0bWFwKSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGUgPT4gY2FsbGJhY2soZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBfbG9hZEltYWdlQml0bWFwRnJvbURhdGEoZGF0YSwgY2FsbGJhY2spIHtcbiAgICAgICAgY3JlYXRlSW1hZ2VCaXRtYXAobmV3IEJsb2IoW2RhdGFdKSwgeyBwcmVtdWx0aXBseUFscGhhOiAnbm9uZScgfSlcbiAgICAgICAgICAgIC50aGVuKGltYWdlQml0bWFwID0+IGNhbGxiYWNrKG51bGwsIGltYWdlQml0bWFwKSlcbiAgICAgICAgICAgIC5jYXRjaChlID0+IGNhbGxiYWNrKGUpKTtcbiAgICB9XG59XG5cbmV4cG9ydCB7IEltZ1BhcnNlciB9O1xuIl0sIm5hbWVzIjpbIkltZ1BhcnNlciIsImNvbnN0cnVjdG9yIiwicmVnaXN0cnkiLCJkZXZpY2UiLCJjcm9zc09yaWdpbiIsInByZWZpeCIsIm1heFJldHJpZXMiLCJsb2FkIiwidXJsIiwiY2FsbGJhY2siLCJhc3NldCIsImhhc0NvbnRlbnRzIiwiZmlsZSIsImNvbnRlbnRzIiwic3VwcG9ydHNJbWFnZUJpdG1hcCIsIl9sb2FkSW1hZ2VCaXRtYXBGcm9tRGF0YSIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIkJsb2IiLCJvcmlnaW5hbCIsImhhbmRsZXIiLCJlcnIiLCJyZXN1bHQiLCJyZXZva2VPYmplY3RVUkwiLCJvcHRpb25zIiwiaGFzT3duUHJvcGVydHkiLCJBQlNPTFVURV9VUkwiLCJ0ZXN0IiwiX2xvYWRJbWFnZUJpdG1hcCIsIl9sb2FkSW1hZ2UiLCJvcGVuIiwiZGF0YSIsImV4dCIsInBhdGgiLCJnZXRFeHRlbnNpb24iLCJ0b0xvd2VyQ2FzZSIsImZvcm1hdCIsIlBJWEVMRk9STUFUX1I4X0c4X0I4IiwiUElYRUxGT1JNQVRfUjhfRzhfQjhfQTgiLCJ0ZXh0dXJlIiwiVGV4dHVyZSIsIm5hbWUiLCJwcm9maWxlckhpbnQiLCJURVhISU5UX0FTU0VUIiwid2lkdGgiLCJoZWlnaHQiLCJzZXRTb3VyY2UiLCJvcmlnaW5hbFVybCIsImltYWdlIiwiSW1hZ2UiLCJyZXRyaWVzIiwicmV0cnlUaW1lb3V0Iiwib25sb2FkIiwib25lcnJvciIsInJldHJ5RGVsYXkiLCJNYXRoIiwicG93IiwiY29uc29sZSIsImxvZyIsImlkeCIsImluZGV4T2YiLCJzZXBhcmF0b3IiLCJzZXRUaW1lb3V0Iiwic3JjIiwiRGF0ZSIsIm5vdyIsImNhY2hlIiwicmVzcG9uc2VUeXBlIiwicmV0cnkiLCJodHRwIiwiZ2V0IiwiYmxvYiIsImNyZWF0ZUltYWdlQml0bWFwIiwicHJlbXVsdGlwbHlBbHBoYSIsInRoZW4iLCJpbWFnZUJpdG1hcCIsImNhdGNoIiwiZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFrQkEsTUFBTUEsU0FBUyxDQUFDO0FBQ1pDLEVBQUFBLFdBQVcsQ0FBQ0MsUUFBUSxFQUFFQyxNQUFNLEVBQUU7SUFFMUIsSUFBSSxDQUFDQyxXQUFXLEdBQUdGLFFBQVEsQ0FBQ0csTUFBTSxHQUFHLFdBQVcsR0FBRyxJQUFJLENBQUE7SUFDdkQsSUFBSSxDQUFDQyxVQUFVLEdBQUcsQ0FBQyxDQUFBO0lBQ25CLElBQUksQ0FBQ0gsTUFBTSxHQUFHQSxNQUFNLENBQUE7QUFDeEIsR0FBQTtBQUVBSSxFQUFBQSxJQUFJLENBQUNDLEdBQUcsRUFBRUMsUUFBUSxFQUFFQyxLQUFLLEVBQUU7QUFB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
