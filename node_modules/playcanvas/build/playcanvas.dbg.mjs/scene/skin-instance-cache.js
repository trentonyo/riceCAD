/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { RefCountedObject } from '../core/ref-counted-object.js';
import { SkinInstance } from './skin-instance.js';

class SkinInstanceCachedObject extends RefCountedObject {
  constructor(skin, skinInstance) {
    super();
    this.skin = skin;
    this.skinInstance = skinInstance;
  }
}

class SkinInstanceCache {

  static logCachedSkinInstances() {
    console.log('CachedSkinInstances');
    SkinInstanceCache._skinInstanceCache.forEach(function (array, rootBone) {
      console.log(`${rootBone.name}: Array(${array.length})`);
      for (let i = 0; i < array.length; i++) {
        console.log(`  ${i}: RefCount ${array[i].refCount}`);
      }
    });
  }

  static createCachedSkinInstance(skin, rootBone, entity) {
    let skinInst = SkinInstanceCache.getCachedSkinInstance(skin, rootBone);

    if (!skinInst) {
      skinInst = new SkinInstance(skin);
      skinInst.resolve(rootBone, entity);

      SkinInstanceCache.addCachedSkinInstance(skin, rootBone, skinInst);
    }
    return skinInst;
  }

  static getCachedSkinInstance(skin, rootBone) {
    let skinInstance = null;

    const cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);
    if (cachedObjArray) {
      const cachedObj = cachedObjArray.find(element => element.skin === skin);
      if (cachedObj) {
        cachedObj.incRefCount();
        skinInstance = cachedObj.skinInstance;
      }
    }
    return skinInstance;
  }

  static addCachedSkinInstance(skin, rootBone, skinInstance) {
    let cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);
    if (!cachedObjArray) {
      cachedObjArray = [];
      SkinInstanceCache._skinInstanceCache.set(rootBone, cachedObjArray);
    }

    let cachedObj = cachedObjArray.find(element => element.skin === skin);
    if (!cachedObj) {
      cachedObj = new SkinInstanceCachedObject(skin, skinInstance);
      cachedObjArray.push(cachedObj);
    }
    cachedObj.incRefCount();
  }

  static removeCachedSkinInstance(skinInstance) {
    if (skinInstance) {
      const rootBone = skinInstance.rootBone;
      if (rootBone) {
        const cachedObjArray = SkinInstanceCache._skinInstanceCache.get(rootBone);
        if (cachedObjArray) {
          const cachedObjIndex = cachedObjArray.findIndex(element => element.skinInstance === skinInstance);
          if (cachedObjIndex >= 0) {
            const cachedObj = cachedObjArray[cachedObjIndex];
            cachedObj.decRefCount();

            if (cachedObj.refCount === 0) {
              cachedObjArray.splice(cachedObjIndex, 1);

              if (!cachedObjArray.length) {
                SkinInstanceCache._skinInstanceCache.delete(rootBone);
              }

              if (skinInstance) {
                skinInstance.destroy();
                cachedObj.skinInstance = null;
              }
            }
          }
        }
      }
    }
  }
}
SkinInstanceCache._skinInstanceCache = new Map();

export { SkinInstanceCache };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tpbi1pbnN0YW5jZS1jYWNoZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NjZW5lL3NraW4taW5zdGFuY2UtY2FjaGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVmQ291bnRlZE9iamVjdCB9IGZyb20gJy4uL2NvcmUvcmVmLWNvdW50ZWQtb2JqZWN0LmpzJztcbmltcG9ydCB7IFNraW5JbnN0YW5jZSB9IGZyb20gJy4vc2tpbi1pbnN0YW5jZS5qcyc7XG5cbi8vIENsYXNzIHVzZWQgYXMgYW4gZW50cnkgaW4gdGhlIHJlZi1jb3VudGVkIHNraW4gaW5zdGFuY2UgY2FjaGVcbmNsYXNzIFNraW5JbnN0YW5jZUNhY2hlZE9iamVjdCBleHRlbmRzIFJlZkNvdW50ZWRPYmplY3Qge1xuICAgIGNvbnN0cnVjdG9yKHNraW4sIHNraW5JbnN0YW5jZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLnNraW4gPSBza2luO1xuICAgICAgICB0aGlzLnNraW5JbnN0YW5jZSA9IHNraW5JbnN0YW5jZTtcbiAgICB9XG59XG5cbi8vIFB1cmUgc3RhdGljIGNsYXNzLCBpbXBsZW1lbnRpbmcgdGhlIGNhY2hlIG9mIHNraW4gaW5zdGFuY2VzIHVzZWQgYnkgcmVuZGVyIGNvbXBvbmVudC5cbmNsYXNzIFNraW5JbnN0YW5jZUNhY2hlIHtcbiAgICAvLyBtYXAgb2YgU2tpbkluc3RhbmNlcyBhbGxvd2luZyB0aG9zZSB0byBiZSBzaGFyZWQgYmV0d2VlblxuICAgIC8vIChzcGVjaWZpY2FsbHkgYSBzaW5nbGUgZ2xiIHdpdGggbXVsdGlwbGUgcmVuZGVyIGNvbXBvbmVudHMpXG4gICAgLy8gSXQgbWFwcyBhIHJvb3RCb25lIHRvIGFuIGFycmF5IG9mIFNraW5JbnN0YW5jZUNhY2hlZE9iamVjdFxuICAgIC8vIHRoaXMgYWxsb3dzIHVzIHRvIGZpbmQgaWYgYSBza2luIGluc3RhbmNlIGFscmVhZHkgZXhpc3RzIGZvciBhIHJvb3Rib25lLCBhbmQgYSBzcGVjaWZpYyBza2luXG4gICAgc3RhdGljIF9za2luSW5zdGFuY2VDYWNoZSA9IG5ldyBNYXAoKTtcblxuICAgIC8vICNpZiBfREVCVUdcbiAgICAvLyBmdW5jdGlvbiB0aGF0IGxvZ3Mgb3V0IHRoZSBzdGF0ZSBvZiB0aGUgc2tpbiBpbnN0YW5jZXMgY2FjaGVcbiAgICBzdGF0aWMgbG9nQ2FjaGVkU2tpbkluc3RhbmNlcygpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0NhY2hlZFNraW5JbnN0YW5jZXMnKTtcbiAgICAgICAgU2tpbkluc3RhbmNlQ2FjaGUuX3NraW5JbnN0YW5jZUNhY2hlLmZvckVhY2goZnVuY3Rpb24gKGFycmF5LCByb290Qm9uZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYCR7cm9vdEJvbmUubmFtZX06IEFycmF5KCR7YXJyYXkubGVuZ3RofSlgKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgICAke2l9OiBSZWZDb3VudCAke2FycmF5W2ldLnJlZkNvdW50fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gI2VuZGlmXG5cbiAgICAvLyByZXR1cm5zIGNhY2hlZCBvciBjcmVhdGVzIGEgc2tpbiBpbnN0YW5jZSBmb3IgdGhlIHNraW4gYW5kIGEgcm9vdEJvbmUsIHRvIGJlIHVzZWQgYnkgcmVuZGVyIGNvbXBvbmVudFxuICAgIC8vIG9uIHRoZSBzcGVjaWZpZWQgZW50aXR5XG4gICAgc3RhdGljIGNyZWF0ZUNhY2hlZFNraW5JbnN0YW5jZShza2luLCByb290Qm9uZSwgZW50aXR5KSB7XG5cbiAgICAgICAgLy8gdHJ5IGFuZCBnZXQgc2tpbiBpbnN0YW5jZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICBsZXQgc2tpbkluc3QgPSBTa2luSW5zdGFuY2VDYWNoZS5nZXRDYWNoZWRTa2luSW5zdGFuY2Uoc2tpbiwgcm9vdEJvbmUpO1xuXG4gICAgICAgIC8vIGRvbid0IGhhdmUgc2tpbiBpbnN0YW5jZSBmb3IgdGhpcyBza2luXG4gICAgICAgIGlmICghc2tpbkluc3QpIHtcblxuICAgICAgICAgICAgc2tpbkluc3QgPSBuZXcgU2tpbkluc3RhbmNlKHNraW4pO1xuICAgICAgICAgICAgc2tpbkluc3QucmVzb2x2ZShyb290Qm9uZSwgZW50aXR5KTtcblxuICAgICAgICAgICAgLy8gYWRkIGl0IHRvIHRoZSBjYWNoZVxuICAgICAgICAgICAgU2tpbkluc3RhbmNlQ2FjaGUuYWRkQ2FjaGVkU2tpbkluc3RhbmNlKHNraW4sIHJvb3RCb25lLCBza2luSW5zdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc2tpbkluc3Q7XG4gICAgfVxuXG4gICAgLy8gcmV0dXJucyBhbHJlYWR5IGNyZWF0ZWQgc2tpbiBpbnN0YW5jZSBmcm9tIHNraW4sIGZvciB1c2Ugb24gdGhlIHJvb3RCb25lXG4gICAgLy8gcmVmIGNvdW50IG9mIGV4aXN0aW5nIHNraW5JbnN0YW5jZSBpcyBpbmNyZWFzZWRcbiAgICBzdGF0aWMgZ2V0Q2FjaGVkU2tpbkluc3RhbmNlKHNraW4sIHJvb3RCb25lKSB7XG5cbiAgICAgICAgbGV0IHNraW5JbnN0YW5jZSA9IG51bGw7XG5cbiAgICAgICAgLy8gZ2V0IGFuIGFycmF5IG9mIGNhY2hlZCBvYmplY3QgZm9yIHRoZSByb290Qm9uZVxuICAgICAgICBjb25zdCBjYWNoZWRPYmpBcnJheSA9IFNraW5JbnN0YW5jZUNhY2hlLl9za2luSW5zdGFuY2VDYWNoZS5nZXQocm9vdEJvbmUpO1xuICAgICAgICBpZiAoY2FjaGVkT2JqQXJyYXkpIHtcblxuICAgICAgICAgICAgLy8gZmluZCBtYXRjaGluZyBza2luXG4gICAgICAgICAgICBjb25zdCBjYWNoZWRPYmogPSBjYWNoZWRPYmpBcnJheS5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC5za2luID09PSBza2luKTtcbiAgICAgICAgICAgIGlmIChjYWNoZWRPYmopIHtcbiAgICAgICAgICAgICAgICBjYWNoZWRPYmouaW5jUmVmQ291bnQoKTtcbiAgICAgICAgICAgICAgICBza2luSW5zdGFuY2UgPSBjYWNoZWRPYmouc2tpbkluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNraW5JbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvLyBhZGRzIHNraW4gaW5zdGFuY2UgdG8gdGhlIGNhY2hlLCBhbmQgaW5jcmVhc2VzIHJlZiBjb3VudCBvbiBpdFxuICAgIHN0YXRpYyBhZGRDYWNoZWRTa2luSW5zdGFuY2Uoc2tpbiwgcm9vdEJvbmUsIHNraW5JbnN0YW5jZSkge1xuXG4gICAgICAgIC8vIGdldCBhbiBhcnJheSBmb3IgdGhlIHJvb3RCb25lXG4gICAgICAgIGxldCBjYWNoZWRPYmpBcnJheSA9IFNraW5JbnN0YW5jZUNhY2hlLl9za2luSW5zdGFuY2VDYWNoZS5nZXQocm9vdEJvbmUpO1xuICAgICAgICBpZiAoIWNhY2hlZE9iakFycmF5KSB7XG4gICAgICAgICAgICBjYWNoZWRPYmpBcnJheSA9IFtdO1xuICAgICAgICAgICAgU2tpbkluc3RhbmNlQ2FjaGUuX3NraW5JbnN0YW5jZUNhY2hlLnNldChyb290Qm9uZSwgY2FjaGVkT2JqQXJyYXkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZmluZCBlbnRyeSBmb3IgdGhlIHNraW5cbiAgICAgICAgbGV0IGNhY2hlZE9iaiA9IGNhY2hlZE9iakFycmF5LmZpbmQoZWxlbWVudCA9PiBlbGVtZW50LnNraW4gPT09IHNraW4pO1xuICAgICAgICBpZiAoIWNhY2hlZE9iaikge1xuICAgICAgICAgICAgY2FjaGVkT2JqID0gbmV3IFNraW5JbnN0YW5jZUNhY2hlZE9iamVjdChza2luLCBza2luSW5zdGFuY2UpO1xuICAgICAgICAgICAgY2FjaGVkT2JqQXJyYXkucHVzaChjYWNoZWRPYmopO1xuICAgICAgICB9XG5cbiAgICAgICAgY2FjaGVkT2JqLmluY1JlZkNvdW50KCk7XG4gICAgfVxuXG4gICAgLy8gcmVtb3ZlcyBza2luIGluc3RhbmNlIGZyb20gdGhlIGNhY2hlLiBUaGlzIGRlY3JlYXNlcyByZWYgY291bnQsIGFuZCB3aGVuIHRoYXQgcmVhY2hlcyAwIGl0IGdldHMgZGVzdHJveWVkXG4gICAgc3RhdGljIHJlbW92ZUNhY2hlZFNraW5JbnN0YW5jZShza2luSW5zdGFuY2UpIHtcblxuICAgICAgICBpZiAoc2tpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICBjb25zdCByb290Qm9uZSA9IHNraW5JbnN0YW5jZS5yb290Qm9uZTtcbiAgICAgICAgICAgIGlmIChyb290Qm9uZSkge1xuXG4gICAgICAgICAgICAgICAgLy8gYW4gYXJyYXkgZm9yIGJvb3QgYm9uZVxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZE9iakFycmF5ID0gU2tpbkluc3RhbmNlQ2FjaGUuX3NraW5JbnN0YW5jZUNhY2hlLmdldChyb290Qm9uZSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlZE9iakFycmF5KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gYWN0dWFsIHNraW4gaW5zdGFuY2VcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkT2JqSW5kZXggPSBjYWNoZWRPYmpBcnJheS5maW5kSW5kZXgoZWxlbWVudCA9PiBlbGVtZW50LnNraW5JbnN0YW5jZSA9PT0gc2tpbkluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZE9iakluZGV4ID49IDApIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVjIHJlZiBvbiB0aGUgb2JqZWN0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRPYmogPSBjYWNoZWRPYmpBcnJheVtjYWNoZWRPYmpJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRPYmouZGVjUmVmQ291bnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbGFzdCByZWZlcmVuY2UsIG5lZWRzIHRvIGJlIGRlc3Ryb3llZFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhY2hlZE9iai5yZWZDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlZE9iakFycmF5LnNwbGljZShjYWNoZWRPYmpJbmRleCwgMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNhY2hlZE9iakFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTa2luSW5zdGFuY2VDYWNoZS5fc2tpbkluc3RhbmNlQ2FjaGUuZGVsZXRlKHJvb3RCb25lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IHRoZSBza2luIGluc3RhbmNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNraW5JbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2luSW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZWRPYmouc2tpbkluc3RhbmNlID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCB7IFNraW5JbnN0YW5jZUNhY2hlIH07XG4iXSwibmFtZXMiOlsiU2tpbkluc3RhbmNlQ2FjaGVkT2JqZWN0IiwiUmVmQ291bnRlZE9iamVjdCIsImNvbnN0cnVjdG9yIiwic2tpbiIsInNraW5JbnN0YW5jZSIsIlNraW5JbnN0YW5jZUNhY2hlIiwibG9nQ2FjaGVkU2tpbkluc3RhbmNlcyIsImNvbnNvbGUiLCJsb2ciLCJfc2tpbkluc3RhbmNlQ2FjaGUiLCJmb3JFYWNoIiwiYXJyYXkiLCJyb290Qm9uZSIsIm5hbWUiLCJsZW5ndGgiLCJpIiwicmVmQ291bnQiLCJjcmVhdGVDYWNoZWRTa2luSW5zdGFuY2UiLCJlbnRpdHkiLCJza2luSW5zdCIsImdldENhY2hlZFNraW5JbnN0YW5jZSIsIlNraW5JbnN0YW5jZSIsInJlc29sdmUiLCJhZGRDYWNoZWRTa2luSW5zdGFuY2UiLCJjYWNoZWRPYmpBcnJheSIsImdldCIsImNhY2hlZE9iaiIsImZpbmQiLCJlbGVtZW50IiwiaW5jUmVmQ291bnQiLCJzZXQiLCJwdXNoIiwicmVtb3ZlQ2FjaGVkU2tpbkluc3RhbmNlIiwiY2FjaGVkT2JqSW5kZXgiLCJmaW5kSW5kZXgiLCJkZWNSZWZDb3VudCIsInNwbGljZSIsImRlbGV0ZSIsImRlc3Ryb3kiLCJNYXAiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBSUEsTUFBTUEsd0JBQXdCLFNBQVNDLGdCQUFnQixDQUFDO0FBQ3BEQyxFQUFBQSxXQUFXLENBQUNDLElBQUksRUFBRUMsWUFBWSxFQUFFO0FBQzVCLElBQUEsS0FBSyxFQUFFLENBQUE7SUFDUCxJQUFJLENBQUNELElBQUksR0FBR0EsSUFBSSxDQUFBO0lBQ2hCLElBQUksQ0FBQ0MsWUFBWSxHQUFHQSxZQUFZLENBQUE7QUFDcEMsR0FBQTtBQUNKLENBQUE7O0FBR0EsTUFBTUMsaUJBQWlCLENBQUM7O0FBU3BCLEVBQUEsT0FBT0Msc0JBQXNCLEdBQUc7QUFDNUJDLElBQUFBLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLHFCQUFxQixDQUFDLENBQUE7SUFDbENILGlCQUFpQixDQUFDSSxrQkFBa0IsQ0FBQ0MsT0FBTyxDQUFDLFVBQVVDLEtBQUssRUFBRUMsUUFBUSxFQUFFO0FBQ3BFTCxNQUFBQSxPQUFPLENBQUNDLEdBQUcsQ0FBRSxDQUFBLEVBQUVJLFFBQVEsQ0FBQ0MsSUFBSyxDQUFBLFFB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
