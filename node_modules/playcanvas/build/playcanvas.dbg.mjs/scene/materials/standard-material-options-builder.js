/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { _matTex2D } from '../shader-lib/programs/standard.js';
import { PIXELFORMAT_DXT5, TEXTURETYPE_SWIZZLEGGGR } from '../../platform/graphics/constants.js';
import { SHADER_FORWARDHDR, GAMMA_SRGBHDR, TONEMAP_LINEAR, SHADERDEF_TANGENTS, SHADERDEF_SCREENSPACE, SHADERDEF_SKIN, SHADERDEF_INSTANCING, SHADERDEF_MORPH_POSITION, SHADERDEF_MORPH_NORMAL, SHADERDEF_MORPH_TEXTURE_BASED, BLEND_NONE, GAMMA_NONE, SPECULAR_PHONG, SHADERDEF_NOSHADOW, SHADERDEF_LM, SHADERDEF_DIRLM, SHADERDEF_LMAMBIENT, MASK_AFFECT_DYNAMIC, LIGHTTYPE_DIRECTIONAL, LIGHTTYPE_OMNI, LIGHTTYPE_SPOT, SHADERDEF_UV0, SHADERDEF_UV1, SHADERDEF_VCOLOR } from '../constants.js';
import { Quat } from '../../core/math/quat.js';

const arraysEqual = (a, b) => {
  if (a.length !== b.length) {
    return false;
  }
  for (let i = 0; i < a.length; ++i) {
    if (a[i] !== b[i]) {
      return false;
    }
  }
  return true;
};
const notWhite = color => {
  return color.r !== 1 || color.g !== 1 || color.b !== 1;
};
const notBlack = color => {
  return color.r !== 0 || color.g !== 0 || color.b !== 0;
};
class StandardMaterialOptionsBuilder {
  constructor() {
    this._mapXForms = null;
  }

  updateMinRef(options, scene, stdMat, objDefs, staticLightList, pass, sortedLights) {
    this._updateSharedOptions(options, scene, stdMat, objDefs, pass);
    this._updateMinOptions(options, stdMat);
    this._updateUVOptions(options, stdMat, objDefs, true);
  }
  updateRef(options, scene, stdMat, objDefs, staticLightList, pass, sortedLights) {
    this._updateSharedOptions(options, scene, stdMat, objDefs, pass);
    this._updateEnvOptions(options, stdMat, scene);
    this._updateMaterialOptions(options, stdMat);
    if (pass === SHADER_FORWARDHDR) {
      if (options.gamma) options.gamma = GAMMA_SRGBHDR;
      options.toneMap = TONEMAP_LINEAR;
    }
    options.hasTangents = objDefs && (objDefs & SHADERDEF_TANGENTS) !== 0;
    this._updateLightOptions(options, stdMat, objDefs, sortedLights, staticLightList);
    this._updateUVOptions(options, stdMat, objDefs, false);
  }
  _updateSharedOptions(options, scene, stdMat, objDefs, pass) {
    options.pass = pass;
    options.alphaTest = stdMat.alphaTest > 0;
    options.forceFragmentPrecision = stdMat.forceFragmentPrecision || '';
    options.chunks = stdMat.chunks || '';
    options.blendType = stdMat.blendType;
    options.forceUv1 = stdMat.forceUv1;
    options.separateAmbient = false;
    options.screenSpace = objDefs && (objDefs & SHADERDEF_SCREENSPACE) !== 0;
    options.skin = objDefs && (objDefs & SHADERDEF_SKIN) !== 0;
    options.useInstancing = objDefs && (objDefs & SHADERDEF_INSTANCING) !== 0;
    options.useMorphPosition = objDefs && (objDefs & SHADERDEF_MORPH_POSITION) !== 0;
    options.useMorphNormal = objDefs && (objDefs & SHADERDEF_MORPH_NORMAL) !== 0;
    options.useMorphTextureBased = objDefs && (objDefs & SHADERDEF_MORPH_TEXTURE_BASED) !== 0;
    options.nineSlicedMode = stdMat.nineSlicedMode || 0;

    if (scene.clusteredLightingEnabled && stdMat.useLighting) {
      options.clusteredLightingEnabled = true;
      options.clusteredLightingCookiesEnabled = scene.lighting.cookiesEnabled;
      options.clusteredLightingShadowsEnabled = scene.lighting.shadowsEnabled;
      options.clusteredLightingShadowType = scene.lighting.shadowType;
      options.clusteredLightingAreaLightsEnabled = scene.lighting.areaLightsEnabled;
    } else {
      options.clusteredLightingEnabled = false;
      options.clusteredLightingCookiesEnabled = false;
      options.clusteredLightingShadowsEnabled = false;
      options.clusteredLightingAreaLightsEnabled = false;
    }
  }
  _updateUVOptions(options, stdMat, objDefs, minimalOptions) {
    let hasUv0 = false;
    let hasUv1 = false;
    let hasVcolor = false;
    if (objDefs) {
      hasUv0 = (objDefs & SHADERDEF_UV0) !== 0;
      hasUv1 = (objDefs & SHADERDEF_UV1) !== 0;
      hasVcolor = (objDefs & SHADERDEF_VCOLOR) !== 0;
    }
    options.vertexColors = false;
    this._mapXForms = [];
    const uniqueTextureMap = {};
    for (const p in _matTex2D) {
      this._updateTexOptions(options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions, uniqueTextureMap);
    }
    this._mapXForms = null;
  }
  _updateMinOptions(options, stdMat) {
    options.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE;
    options.lights = [];
  }
  _updateMaterialOptions(options, stdMat) {
    var _stdMat$diffuseMap, _stdMat$diffuseDetail, _stdMat$emissiveMap, _stdMat$lightMap;
    const diffuseTint = (stdMat.diffuseTint || !stdMat.diffuseMap && !stdMat.diffuseVertexColor) && notWhite(stdMat.diffuse);
    const useSpecular = !!(stdMat.useMetalness || stdMat.specularMap || stdMat.sphereMap || stdMat.cubeMap || notBlack(stdMat.specular) || stdMat.specularityFactor > 0 && stdMat.useMetalness || stdMat.enableGGXSpecular || stdMat.clearCoat > 0);
    const useSpecularColor = !stdMat.useMetalness || stdMat.useMetalnessSpecularColor;
    const specularTint = useSpecular && (stdMat.specularTint || !stdMat.specularMap && !stdMat.specularVertexColor) && notWhite(stdMat.specular);
    const specularityFactorTint = useSpecular && stdMat.useMetalnessSpecularColor && (stdMat.specularityFactorTint || stdMat.specularityFactor < 1 && !stdMat.specularityFactorMap);
    const emissiveTintColor = !stdMat.emissiveMap || notWhite(stdMat.emissive) && stdMat.emissiveTint;
    const emissiveTintIntensity = stdMat.emissiveIntensity !== 1;
    const isPackedNormalMap = stdMat.normalMap ? stdMat.normalMap.format === PIXELFORMAT_DXT5 || stdMat.normalMap.type === TEXTURETYPE_SWIZZLEGGGR : false;
    options.opacityTint = stdMat.opacity !== 1 && stdMat.blendType !== BLEND_NONE ? 1 : 0;
    options.blendMapsWithColors = true;
    options.ambientTint = stdMat.ambientTint;
    options.diffuseTint = diffuseTint ? 2 : 0;
    options.specularTint = specularTint ? 2 : 0;
    options.specularityFactorTint = specularityFactorTint ? 1 : 0;
    options.useSpecularityFactor = (specularityFactorTint || !!stdMat.specularityFactorMap) && stdMat.useMetalnessSpecularColor;
    options.useSpecularColor = useSpecularColor;
    options.metalnessTint = stdMat.useMetalness && stdMat.metalness < 1 ? 1 : 0;
    options.glossTint = 1;
    options.emissiveTint = (emissiveTintColor ? 2 : 0) + (emissiveTintIntensity ? 1 : 0);
    options.alphaToCoverage = stdMat.alphaToCoverage;
    options.normalizeNormalMap = stdMat.normalizeNormalMap;
    options.ambientSH = !!stdMat.ambientSH;
    options.useSpecular = useSpecular;
    options.diffuseEncoding = (_stdMat$diffuseMap = stdMat.diffuseMap) == null ? void 0 : _stdMat$diffuseMap.encoding;
    options.diffuseDetailEncoding = (_stdMat$diffuseDetail = stdMat.diffuseDetailMap) == null ? void 0 : _stdMat$diffuseDetail.encoding;
    options.emissiveEncoding = (_stdMat$emissiveMap = stdMat.emissiveMap) == null ? void 0 : _stdMat$emissiveMap.encoding;
    options.lightMapEncoding = (_stdMat$lightMap = stdMat.lightMap) == null ? void 0 : _stdMat$lightMap.encoding;
    options.conserveEnergy = stdMat.conserveEnergy;
    options.opacityFadesSpecular = stdMat.opacityFadesSpecular;
    options.alphaFade = stdMat.alphaFade;
    options.occludeSpecular = stdMat.occludeSpecular;
    options.occludeSpecularFloat = stdMat.occludeSpecularIntensity !== 1.0;
    options.occludeDirect = stdMat.occludeDirect;
    options.shadingModel = stdMat.shadingModel;
    options.fresnelModel = stdMat.fresnelModel;
    options.packedNormal = isPackedNormalMap;
    options.fastTbn = stdMat.fastTbn;
    options.cubeMapProjection = stdMat.cubeMapProjection;
    options.customFragmentShader = stdMat.customFragmentShader;
    options.refraction = (stdMat.refraction || !!stdMat.refractionMap) && (stdMat.useDynamicRefraction || !!options.reflectionSource);
    options.refractionTint = stdMat.refraction !== 1.0 ? 1 : 0;
    options.useDynamicRefraction = stdMat.useDynamicRefraction;
    options.refractionIndexTint = stdMat.refractionIndex !== 1.0 / 1.5 ? 1 : 0;
    options.thicknessTint = stdMat.useDynamicRefraction && stdMat.thickness !== 1.0 ? 1 : 0;
    options.useMetalness = stdMat.useMetalness;
    options.specularEncoding = stdMat.specularEncoding || 'linear';
    options.sheenEncoding = stdMat.sheenEncoding || 'linear';
    options.enableGGXSpecular = stdMat.enableGGXSpecular;
    options.msdf = !!stdMat.msdfMap;
    options.msdfTextAttribute = !!stdMat.msdfTextAttribute;
    options.twoSidedLighting = stdMat.twoSidedLighting;
    options.pixelSnap = stdMat.pixelSnap;
    options.aoMapUv = stdMat.aoUvSet;
    options.diffuseDetail = !!stdMat.diffuseMap;
    options.normalDetail = !!stdMat.normalMap;
    options.diffuseDetailMode = stdMat.diffuseDetailMode;
    options.detailModes = !!options.diffuseDetail;
    options.clearCoat = !!stdMat.clearCoat;
    options.clearCoatTint = stdMat.clearCoat !== 1.0 ? 1 : 0;
    options.clearCoatGlossiness = !!stdMat.clearCoatGlossiness;
    options.clearCoatGlossTint = stdMat.clearCoatGlossiness !== 1.0 ? 1 : 0;
    options.iridescence = stdMat.useIridescence && stdMat.iridescence !== 0.0;
    options.iridescenceTint = stdMat.iridescence !== 1.0 ? 1 : 0;
    options.sheen = stdMat.useSheen;
    options.sheenTint = stdMat.useSheen && notWhite(stdMat.sheen) ? 2 : 0;
    options.sheenGlossinessTint = 1;
  }
  _updateEnvOptions(options, stdMat, scene) {
    options.fog = stdMat.useFog ? scene.fog : 'none';
    options.gamma = stdMat.useGammaTonemap ? scene.gammaCorrection : GAMMA_NONE;
    options.toneMap = stdMat.useGammaTonemap ? scene.toneMapping : -1;
    options.fixSeams = stdMat.cubeMap ? stdMat.cubeMap.fixCubemapSeams : false;
    const isPhong = stdMat.shadingModel === SPECULAR_PHONG;
    let usingSceneEnv = false;

    if (stdMat.envAtlas && stdMat.cubeMap && !isPhong) {
      options.reflectionSource = 'envAtlasHQ';
      options.reflectionEncoding = stdMat.envAtlas.encoding;
    } else if (stdMat.envAtlas && !isPhong) {
      options.reflectionSource = 'envAtlas';
      options.reflectionEncoding = stdMat.envAtlas.encoding;
    } else if (stdMat.cubeMap) {
      options.reflectionSource = 'cubeMap';
      options.reflectionEncoding = stdMat.cubeMap.encoding;
    } else if (stdMat.sphereMap) {
      options.reflectionSource = 'sphereMap';
      options.reflectionEncoding = stdMat.sphereMap.encoding;
    } else if (stdMat.useSkybox && scene.envAtlas && scene.skybox && !isPhong) {
      options.reflectionSource = 'envAtlasHQ';
      options.reflectionEncoding = scene.envAtlas.encoding;
      usingSceneEnv = true;
    } else if (stdMat.useSkybox && scene.envAtlas && !isPhong) {
      options.reflectionSource = 'envAtlas';
      options.reflectionEncoding = scene.envAtlas.encoding;
      usingSceneEnv = true;
    } else if (stdMat.useSkybox && scene.skybox) {
      options.reflectionSource = 'cubeMap';
      options.reflectionEncoding = scene.skybox.encoding;
      usingSceneEnv = true;
    } else {
      options.reflectionSource = null;
      options.reflectionEncoding = null;
    }

    if (stdMat.ambientSH && !isPhong) {
      options.ambientSource = 'ambientSH';
      options.ambientEncoding = null;
    } else {
      const envAtlas = stdMat.envAtlas || (stdMat.useSkybox && scene.envAtlas ? scene.envAtlas : null);
      if (envAtlas && !isPhong) {
        options.ambientSource = 'envAtlas';
        options.ambientEncoding = envAtlas.encoding;
      } else {
        options.ambientSource = 'constant';
        options.ambientEncoding = null;
      }
    }

    options.skyboxIntensity = usingSceneEnv && (scene.skyboxIntensity !== 1 || scene.physicalUnits);
    options.useCubeMapRotation = usingSceneEnv && scene.skyboxRotation && !scene.skyboxRotation.equals(Quat.IDENTITY);
  }
  _updateLightOptions(options, stdMat, objDefs, sortedLights, staticLightList) {
    options.lightMap = false;
    options.lightMapChannel = '';
    options.lightMapUv = 0;
    options.lightMapTransform = 0;
    options.lightMapWithoutAmbient = false;
    options.dirLightMap = false;
    if (objDefs) {
      options.noShadow = (objDefs & SHADERDEF_NOSHADOW) !== 0;
      if ((objDefs & SHADERDEF_LM) !== 0) {
        options.lightMapEncoding = 'rgbm';
        options.lightMap = true;
        options.lightMapChannel = 'rgb';
        options.lightMapUv = 1;
        options.lightMapTransform = 0;
        options.lightMapWithoutAmbient = !stdMat.lightMap;
        if ((objDefs & SHADERDEF_DIRLM) !== 0) {
          options.dirLightMap = true;
        }

        if ((objDefs & SHADERDEF_LMAMBIENT) !== 0) {
          options.lightMapWithoutAmbient = false;
        }
      }
    }
    if (stdMat.useLighting) {
      const lightsFiltered = [];
      const mask = objDefs ? objDefs >> 16 : MASK_AFFECT_DYNAMIC;

      options.lightMaskDynamic = !!(mask & MASK_AFFECT_DYNAMIC);
      if (sortedLights) {
        this._collectLights(LIGHTTYPE_DIRECTIONAL, sortedLights[LIGHTTYPE_DIRECTIONAL], lightsFiltered, mask);
        this._collectLights(LIGHTTYPE_OMNI, sortedLights[LIGHTTYPE_OMNI], lightsFiltered, mask, staticLightList);
        this._collectLights(LIGHTTYPE_SPOT, sortedLights[LIGHTTYPE_SPOT], lightsFiltered, mask, staticLightList);
      }
      options.lights = lightsFiltered;
    } else {
      options.lights = [];
    }
    if (options.lights.length === 0) {
      options.noShadow = true;
    }
  }
  _updateTexOptions(options, stdMat, p, hasUv0, hasUv1, hasVcolor, minimalOptions, uniqueTextureMap) {
    const mname = p + 'Map';
    const vname = p + 'VertexColor';
    const vcname = p + 'VertexColorChannel';
    const cname = mname + 'Channel';
    const tname = mname + 'Transform';
    const uname = mname + 'Uv';
    const iname = mname + 'Identifier';

    if (p !== 'light') {
      options[mname] = false;
      options[cname] = '';
      options[tname] = 0;
      options[uname] = 0;
      options[iname] = undefined;
    }
    options[vname] = false;
    options[vcname] = '';
    const isOpacity = p === 'opacity';
    if (isOpacity && stdMat.blendType === BLEND_NONE && stdMat.alphaTest === 0.0 && !stdMat.alphaToCoverage) return;
    if (!minimalOptions || isOpacity) {
      if (p !== 'height' && stdMat[vname]) {
        if (hasVcolor) {
          options[vname] = stdMat[vname];
          options[vcname] = stdMat[vcname];
          options.vertexColors = true;
        }
      }
      if (stdMat[mname]) {
        let allow = true;
        if (stdMat[uname] === 0 && !hasUv0) allow = false;
        if (stdMat[uname] === 1 && !hasUv1) allow = false;
        if (allow) {
          const mapId = stdMat[mname].id;
          let identifier = uniqueTextureMap[mapId];
          if (identifier === undefined) {
            uniqueTextureMap[mapId] = p;
            identifier = p;
          }
          options[mname] = !!stdMat[mname];
          options[iname] = identifier;
          options[tname] = this._getMapTransformID(stdMat.getUniform(tname), stdMat[uname]);
          options[cname] = stdMat[cname];
          options[uname] = stdMat[uname];
        }
      }
    }
  }
  _collectLights(lType, lights, lightsFiltered, mask, staticLightList) {
    for (let i = 0; i < lights.length; i++) {
      const light = lights[i];
      if (light.enabled) {
        if (light.mask & mask) {
          if (lType !== LIGHTTYPE_DIRECTIONAL) {
            if (light.isStatic) {
              continue;
            }
          }
          lightsFiltered.push(light);
        }
      }
    }
    if (staticLightList) {
      for (let i = 0; i < staticLightList.length; i++) {
        const light = staticLightList[i];
        if (light._type === lType) {
          lightsFiltered.push(light);
        }
      }
    }
  }
  _getMapTransformID(xform, uv) {
    if (!xform) return 0;
    let xforms = this._mapXForms[uv];
    if (!xforms) {
      xforms = [];
      this._mapXForms[uv] = xforms;
    }
    for (let i = 0; i < xforms.length; i++) {
      if (arraysEqual(xforms[i][0].value, xform[0].value) && arraysEqual(xforms[i][1].value, xform[1].value)) {
        return i + 1;
      }
    }
    return xforms.push(xform);
  }
}

export { StandardMaterialOptionsBuilder };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhbmRhcmQtbWF0ZXJpYWwtb3B0aW9ucy1idWlsZGVyLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvc2NlbmUvbWF0ZXJpYWxzL3N0YW5kYXJkLW1hdGVyaWFsLW9wdGlvbnMtYnVpbGRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfbWF0VGV4MkQgfSBmcm9tICcuLi8uLi9zY2VuZS9zaGFkZXItbGliL3Byb2dyYW1zL3N0YW5kYXJkLmpzJztcblxuaW1wb3J0IHtcbiAgICBQSVhFTEZPUk1BVF9EWFQ1LCBURVhUVVJFVFlQRV9TV0laWkxFR0dHUlxufSBmcm9tICcuLi8uLi9wbGF0Zm9ybS9ncmFwaGljcy9jb25zdGFudHMuanMnO1xuaW1wb3J0IHtcbiAgICBCTEVORF9OT05FLFxuICAgIEdBTU1BX05PTkUsIEdBTU1BX1NSR0JIRFIsXG4gICAgTElHSFRUWVBFX0RJUkVDVElPTkFMLCBMSUdIVFRZUEVfT01OSSwgTElHSFRUWVBFX1NQT1QsXG4gICAgTUFTS19BRkZFQ1RfRFlOQU1JQyxcbiAgICBTSEFERVJfRk9SV0FSREhEUixcbiAgICBTSEFERVJERUZfRElSTE0sIFNIQURFUkRFRl9JTlNUQU5DSU5HLCBTSEFERVJERUZfTE0sIFNIQURFUkRFRl9NT1JQSF9QT1NJVElPTiwgU0hBREVSREVGX01PUlBIX05PUk1BTCwgU0hBREVSREVGX05PU0hBRE9XLCBTSEFERVJERUZfTU9SUEhfVEVYVFVSRV9CQVNFRCxcbiAgICBTSEFERVJERUZfU0NSRUVOU1BBQ0UsIFNIQURFUkRFRl9TS0lOLCBTSEFERVJERUZfVEFOR0VOVFMsIFNIQURFUkRFRl9VVjAsIFNIQURFUkRFRl9VVjEsIFNIQURFUkRFRl9WQ09MT1IsIFNIQURFUkRFRl9MTUFNQklFTlQsXG4gICAgVE9ORU1BUF9MSU5FQVIsXG4gICAgU1BFQ1VMQVJfUEhPTkdcbn0gZnJvbSAnLi4vY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IHsgUXVhdCB9IGZyb20gJy4uLy4uL2NvcmUvbWF0aC9xdWF0LmpzJztcblxuY29uc3QgYXJyYXlzRXF1YWwgPSAoYSwgYikgPT4ge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn07XG5cbmNvbnN0IG5vdFdoaXRlID0gKGNvbG9yKSA9PiB7XG4gICAgcmV0dXJuIGNvbG9yLnIgIT09IDEgfHwgY29sb3IuZyAhPT0gMSB8fCBjb2xvci5iICE9PSAxO1xufTtcblxuY29uc3Qgbm90QmxhY2sgPSAoY29sb3IpID0+IHtcbiAgICByZXR1cm4gY29sb3IuciAhPT0gMCB8fCBjb2xvci5nICE9PSAwIHx8IGNvbG9yLmIgIT09IDA7XG59O1xuXG5jbGFzcyBTdGFuZGFyZE1hdGVyaWFsT3B0aW9uc0J1aWxkZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9tYXBYRm9ybXMgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIE1pbmltYWwgb3B0aW9ucyBmb3IgRGVwdGggYW5kIFNoYWRvdyBwYXNzZXNcbiAgICB1cGRhdGVNaW5SZWYob3B0aW9ucywgc2NlbmUsIHN0ZE1hdCwgb2JqRGVmcywgc3RhdGljTGlnaHRMaXN0LCBwYXNzLCBzb3J0ZWRMaWdodHMpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2hhcmVkT3B0aW9ucyhvcHRpb25zLCBzY2VuZSwgc3RkTWF0LCBvYmpEZWZzLCBwYXNzKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWluT3B0aW9ucyhvcHRpb25zLCBzdGRNYXQpO1xuICAgICAgICB0aGlzLl91cGRhdGVVVk9wdGlvbnMob3B0aW9ucywgc3RkTWF0LCBvYmpEZWZzLCB0cnVlKTtcbiAgICB9XG5cbiAgICB1cGRhdGVSZWYob3B0aW9ucywgc2NlbmUsIHN0ZE1hdCwgb2JqRGVmcywgc3RhdGljTGlnaHRMaXN0LCBwYXNzLCBzb3J0ZWRMaWdodHMpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlU2hhcmVkT3B0aW9ucyhvcHRpb25zLCBzY2VuZSwgc3RkTWF0LCBvYmpEZWZzLCBwYXNzKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlRW52T3B0aW9ucyhvcHRpb25zLCBzdGRNYXQsIHNjZW5lKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlTWF0ZXJpYWxPcHRpb25zKG9wdGlvbnMsIHN0ZE1hdCk7XG4gICAgICAgIGlmIChwYXNzID09PSBTSEFERVJfRk9SV0FSREhEUikge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZ2FtbWEpIG9wdGlvbnMuZ2FtbWEgPSBHQU1NQV9TUkdCSERSO1xuICAgICAgICAgICAgb3B0aW9ucy50b25lTWFwID0gVE9ORU1BUF9MSU5FQVI7XG4gICAgICAgIH1cbiAgICAgICAgb3B0aW9ucy5oYXNUYW5nZW50cyA9IG9iakRlZnMgJiYgKChvYmpEZWZzICYgU0hBREVSREVGX1RBTkdFTlRTKSAhPT0gMCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUxpZ2h0T3B0aW9ucyhvcHRpb25zLCBzdGRNYXQsIG9iakRlZnMsIHNvcnRlZExpZ2h0cywgc3RhdGljTGlnaHRMaXN0KTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVVZPcHRpb25zKG9wdGlvbnMsIHN0ZE1hdCwgb2JqRGVmcywgZmFsc2UpO1xuICAgIH1cblxuICAgIF91cGRhdGVTaGFyZWRPcHRpb25zKG9wdGlvbnMsIHNjZW5lLCBzdGRNYXQsIG9iakRlZnMsIHBhc3MpIHtcbiAgICAgICAgb3B0aW9ucy5wYXNzID0gcGFzcztcbiAgICAgICAgb3B0aW9ucy5hbHBoYVRlc3QgPSBzdGRNYXQuYWxwaGFUZXN0ID4gMDtcbiAgICAgICAgb3B0aW9ucy5mb3JjZUZyYWdtZW50UHJlY2lzaW9uID0gc3RkTWF0LmZvcmNlRnJhZ21lbnRQcmVjaXNpb24gfHwgJyc7XG4gICAgICAgIG9wdGlvbnMuY2h1bmtzID0gc3RkTWF0LmNodW5rcyB8fCAnJztcbiAgICAgICAgb3B0aW9ucy5ibGVuZFR5cGUgPSBzdGRNYXQuYmxlbmRUeXBlO1xuICAgICAgICBvcHRpb25zLmZvcmNlVXYxID0gc3RkTWF0LmZvcmNlVXYxO1xuICAgICAgICBvcHRpb25zLnNlcGFyYXRlQW1iaWVudCA9IGZhbHNlOyAgICAvLyBzdG9yZSBhbWJpZW50IGxpZ2h0IGNvbG9yIGluIHNlcGFyYXRlIHZhcmlhYmxlLCBpbnN0ZWFkIG9mIGFkZGluZyBpdCB0byBkaWZmdXNlIGRpcmVjdGx5XG4gICAgICAgIG9wdGlvbnMuc2NyZWVuU3BhY2UgPSBvYmpEZWZzICYmIChvYmpEZWZzICYgU0hBREVSREVGX1NDUkVFTlNQQUNFKSAhPT0gMDtcbiAgICAgICAgb3B0aW9ucy5za2luID0gb2JqRGVmcyAmJiAob2JqRGVmcyAmIFNIQURFUkRFRl9TS0lOKSAhPT0gMDtcbiAgICAgICAgb3B0aW9ucy51c2VJbnN0YW5jaW5nID0gb2JqRGVmcyAmJiAob2JqRGVmcyAmIFNIQURFUkRFRl9JTlNUQU5DSU5HKSAhPT0gMDtcbiAgICAgICAgb3B0aW9ucy51c2VNb3JwaFBvc2l0aW9uID0gb2JqRGVmcyAmJiAob2JqRGVmcyAmIFNIQURFUkRFRl9NT1JQSF9QT1NJVElPTikgIT09IDA7XG4gICAgICAgIG9wdGlvbnMudXNlTW9ycGhOb3JtYWwgPSBvYmpEZWZzICYmIChvYmpEZWZzICYgU0hBREVSREVGX01PUlBIX05PUk1BTCkgIT09IDA7XG4gICAgICAgIG9wdGlvbnMudXNlTW9ycGhUZXh0dXJlQmFzZWQgPSBvYmpEZWZzICYmIChvYmpEZWZzICYgU0hBREVSREVGX01PUlBIX1RFWFRVUkVfQkFTRUQpICE9PSAwO1xuXG4gICAgICAgIG9wdGlvbnMubmluZVNsaWNlZE1vZGUgPSBzdGRNYXQubmluZVNsaWNlZE1vZGUgfHwgMDtcblxuICAgICAgICAvLyBjbHVzdGVyZWQgbGlnaHRpbmcgZmVhdHVyZXMgKGluIHNoYXJlZCBvcHRpb25zIGFzIHNoYWRvdyBwYXNzIG5lZWRzIHRoaXMgdG9vKVxuICAgICAgICBpZiAoc2NlbmUuY2x1c3RlcmVkTGlnaHRpbmdFbmFibGVkICYmIHN0ZE1hdC51c2VMaWdodGluZykge1xuICAgICAgICAgICAgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICAgICAgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0Nvb2tpZXNFbmFibGVkID0gc2NlbmUubGlnaHRpbmcuY29va2llc0VuYWJsZWQ7XG4gICAgICAgICAgICBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nU2hhZG93c0VuYWJsZWQgPSBzY2VuZS5saWdodGluZy5zaGFkb3dzRW5hYmxlZDtcbiAgICAgICAgICAgIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdTaGFkb3dUeXBlID0gc2NlbmUubGlnaHRpbmcuc2hhZG93VHlwZTtcbiAgICAgICAgICAgIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCA9IHNjZW5lLmxpZ2h0aW5nLmFyZWFMaWdodHNFbmFibGVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIG9wdGlvbnMuY2x1c3RlcmVkTGlnaHRpbmdDb29raWVzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgb3B0aW9ucy5jbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBvcHRpb25zLmNsdXN0ZXJlZExpZ2h0aW5nQXJlYUxpZ2h0c0VuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF91cGRhdGVVVk9wdGlvbnMob3B0aW9ucywgc3RkTWF0LCBvYmpEZWZzLCBtaW5pbWFsT3B0aW9ucykge1xuICAgICAgICBsZXQgaGFzVXYwID0gZmFsc2U7XG4gICAgICAgIGxldCBoYXNVdjEgPSBmYWxzZTtcbiAgICAgICAgbGV0IGhhc1Zjb2xvciA9IGZhbHNlO1xuICAgICAgICBpZiAob2JqRGVmcykge1xuICAgICAgICAgICAgaGFzVXYwID0gKG9iakRlZnMgJiBTSEFERVJERUZfVVYwKSAhPT0gMDtcbiAgICAgICAgICAgIGhhc1V2MSA9IChvYmpEZWZzICYgU0hBREVSREVGX1VWMSkgIT09IDA7XG4gICAgICAgICAgICBoYXNWY29sb3IgPSAob2JqRGVmcyAmIFNIQURFUkRFRl9WQ09MT1IpICE9PSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgb3B0aW9ucy52ZXJ0ZXhDb2xvcnMgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbWFwWEZvcm1zID0gW107XG5cbiAgICAgICAgY29uc3QgdW5pcXVlVGV4dHVyZU1hcCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IHAgaW4gX21hdFRleDJEKSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUZXhPcHRpb25zKG9wdGlvbnMsIHN0ZE1hdCwgcCwgaGFzVXYwLCBoYXNVdjEsIGhhc1Zjb2xvciwgbWluaW1hbE9wdGlvbnMsIHVuaXF1ZVRleHR1cmVNYXApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX21hcFhGb3JtcyA9IG51bGw7XG4gICAgfVxuXG4gICAgX3VwZGF0ZU1pbk9wdGlvbnMob3B0aW9ucywgc3RkTWF0KSB7XG4gICAgICAgIG9wdGlvbnMub3BhY2l0eVRpbnQgPSBzdGRNYXQub3BhY2l0eSAhPT0gMSAmJiBzdGRNYXQuYmxlbmRUeXBlICE9PSBCTEVORF9OT05FO1xuICAgICAgICBvcHRpb25zLmxpZ2h0cyA9IFtdO1xuICAgIH1cblxuICAgIF91cGRhdGVNYXRlcmlhbE9wdGlvbnMob3B0aW9ucywgc3RkTWF0KSB7XG4gICAgICAgIGNvbnN0IGRpZmZ1c2VUaW50ID0gKHN0ZE1hdC5kaWZmdXNlVGludCB8fCAoIXN0ZE1hdC5kaWZmdXNlTWFwICYmICFzdGRNYXQuZGlmZnVzZVZlcnRleENvbG9yKSkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RXaGl0ZShzdGRNYXQuZGlmZnVzZSk7XG5cbiAgICAgICAgY29uc3QgdXNlU3BlY3VsYXIgPSAhIShzdGRNYXQudXNlTWV0YWxuZXNzIHx8IHN0ZE1hdC5zcGVjdWxhck1hcCB8fCBzdGRNYXQuc3BoZXJlTWFwIHx8IHN0ZE1hdC5jdWJlTWFwIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90QmxhY2soc3RkTWF0LnNwZWN1bGFyKSB8fCAoc3RkTWF0LnNwZWN1bGFyaXR5RmFjdG9yID4gMCAmJiBzdGRNYXQudXNlTWV0YWxuZXNzKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZE1hdC5lbmFibGVHR1hTcGVjdWxhciB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdGRNYXQuY2xlYXJDb2F0ID4gMCkpO1xuXG4gICAgICAgIGNvbnN0IHVzZVNwZWN1bGFyQ29sb3IgPSAoIXN0ZE1hdC51c2VNZXRhbG5lc3MgfHwgc3RkTWF0LnVzZU1ldGFsbmVzc1NwZWN1bGFyQ29sb3IpO1xuICAgICAgICBjb25zdCBzcGVjdWxhclRpbnQgPSB1c2VTcGVjdWxhciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoc3RkTWF0LnNwZWN1bGFyVGludCB8fCAoIXN0ZE1hdC5zcGVjdWxhck1hcCAmJiAhc3RkTWF0LnNwZWN1bGFyVmVydGV4Q29sb3IpKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RXaGl0ZShzdGRNYXQuc3BlY3VsYXIpO1xuXG4gICAgICAgIGNvbnN0IHNwZWN1bGFyaXR5RmFjdG9yVGludCA9IHVzZVNwZWN1bGFyICYmIHN0ZE1hdC51c2VNZXRhbG5lc3NTcGVjdWxhckNvbG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzdGRNYXQuc3BlY3VsYXJpdHlGYWN0b3JUaW50IHx8IChzdGRNYXQuc3BlY3VsYXJpdHlGYWN0b3IgPCAxICYmICFzdGRNYXQuc3BlY3VsYXJpdHlGYWN0b3JNYXApKTtcblxuICAgICAgICBjb25zdCBlbWlzc2l2ZVRpbnRDb2xvciA9ICFzdGRNYXQuZW1pc3NpdmVNYXAgfHwgKG5vdFdoaXRlKHN0ZE1hdC5lbWlzc2l2ZSkgJiYgc3RkTWF0LmVtaXNzaXZlVGludCk7XG4gICAgICAgIGNvbnN0IGVtaXNzaXZlVGludEludGVuc2l0eSA9IChzdGRNYXQuZW1pc3NpdmVJbnRlbnNpdHkgIT09IDEpO1xuXG4gICAgICAgIGNvbnN0IGlzUGFja2VkTm9ybWFsTWFwID0gc3RkTWF0Lm5vcm1hbE1hcCA/IChzdGRNYXQubm9ybWFsTWFwLmZvcm1hdCA9PT0gUElYRUxGT1JNQVRfRFhUNSB8fCBzdGRNYXQubm9ybWFsTWFwLnR5cGUgPT09IFRFWFRVUkVUWVBFX1NXSVpaTEVHR0dSKSA6IGZhbHNlO1xuXG4gICAgICAgIG9wdGlvbnMub3BhY2l0eVRpbnQgPSAoc3RkTWF0Lm9wYWNpdHkgIT09IDEgJiYgc3RkTWF0LmJsZW5kVHlwZSAhPT0gQkxFTkRfTk9ORSkgPyAxIDogMDtcbiAgICAgICAgb3B0aW9ucy5ibGVuZE1hcHNXaXRoQ29sb3JzID0gdHJ1ZTtcbiAgICAgICAgb3B0aW9ucy5hbWJpZW50VGludCA9IHN0ZE1hdC5hbWJpZW50VGludDtcbiAgICAgICAgb3B0aW9ucy5kaWZmdXNlVGludCA9IGRpZmZ1c2VUaW50ID8gMiA6IDA7XG4gICAgICAgIG9wdGlvbnMuc3BlY3VsYXJUaW50ID0gc3BlY3VsYXJUaW50ID8gMiA6IDA7XG4gICAgICAgIG9wdGlvbnMuc3BlY3VsYXJpdHlGYWN0b3JUaW50ID0gc3BlY3VsYXJpdHlGYWN0b3JUaW50ID8gMSA6IDA7XG4gICAgICAgIG9wdGlvbnMudXNlU3BlY3VsYXJpdHlGYWN0b3IgPSAoc3BlY3VsYXJpdHlGYWN0b3JUaW50IHx8ICEhc3RkTWF0LnNwZWN1bGFyaXR5RmFjdG9yTWFwKSAmJiBzdGRNYXQudXNlTWV0YWxuZXNzU3BlY3VsYXJDb2xvcjtcbiAgICAgICAgb3B0aW9ucy51c2VTcGVjdWxhckNvbG9yID0gdXNlU3BlY3VsYXJDb2xvcjtcbiAgICAgICAgb3B0aW9ucy5tZXRhbG5lc3NUaW50ID0gKHN0ZE1hdC51c2VNZXRhbG5lc3MgJiYgc3RkTWF0Lm1ldGFsbmVzcyA8IDEpID8gMSA6IDA7XG4gICAgICAgIG9wdGlvbnMuZ2xvc3NUaW50ID0gMTtcbiAgICAgICAgb3B0aW9ucy5lbWlzc2l2ZVRpbnQgPSAoZW1pc3NpdmVUaW50Q29sb3IgPyAyIDogMCkgKyAoZW1pc3NpdmVUaW50SW50ZW5zaXR5ID8gMSA6IDApO1xuICAgICAgICBvcHRpb25zLmFscGhhVG9Db3ZlcmFnZSA9IHN0ZE1hdC5hbHBoYVRvQ292ZXJhZ2U7XG4gICAgICAgIG9wdGlvbnMubm9ybWFsaXplTm9ybWFsTWFwID0gc3RkTWF0Lm5vcm1hbGl6ZU5vcm1hbE1hcDtcbiAgICAgICAgb3B0aW9ucy5hbWJpZW50U0ggPSAhIXN0ZE1hdC5hbWJpZW50U0g7XG4gICAgICAgIG9wdGlvbnMudXNlU3BlY3VsYXIgPSB1c2VTcGVjdWxhcjtcbiAgICAgICAgb3B0aW9ucy5kaWZmdXNlRW5jb2RpbmcgPSBzdGRNYXQuZGlmZnVzZU1hcD8uZW5jb2Rpbmc7XG4gICAgICAgIG9wdGlvbnMuZGlmZnVzZURldGFpbEVuY29kaW5nID0gc3RkTWF0LmRpZmZ1c2VEZXRhaWxNYXA/LmVuY29kaW5nO1xuICAgICAgICBvcHRpb25zLmVtaXNzaXZlRW5jb2RpbmcgPSBzdGRNYXQuZW1pc3NpdmVNYXA/LmVuY29kaW5nO1xuICAgICAgICBvcHRpb25zLmxpZ2h0TWFwRW5jb2RpbmcgPSBzdGRNYXQubGlnaHRNYXA/LmVuY29kaW5nO1xuICAgICAgICBvcHRpb25zLmNvbnNlcnZlRW5lcmd5ID0gc3RkTWF0LmNvbnNlcnZlRW5lcmd5O1xuICAgICAgICBvcHRpb25zLm9wYWNpdHlGYWRlc1NwZWN1bGFyID0gc3RkTWF0Lm9wYWNpdHlGYWRlc1NwZWN1bGFyO1xuICAgICAgICBvcHRpb25zLmFscGhhRmFkZSA9IHN0ZE1hdC5hbHBoYUZhZGU7XG4gICAgICAgIG9wdGlvbnMub2NjbHVkZVNwZWN1bGFyID0gc3RkTWF0Lm9jY2x1ZGVTcGVjdWxhcjtcbiAgICAgICAgb3B0aW9ucy5vY2NsdWRlU3BlY3VsYXJGbG9hdCA9IChzdGRNYXQub2NjbHVkZVNwZWN1bGFySW50ZW5zaXR5ICE9PSAxLjApO1xuICAgICAgICBvcHRpb25zLm9jY2x1ZGVEaXJlY3QgPSBzdGRNYXQub2NjbHVkZURpcmVjdDtcbiAgICAgICAgb3B0aW9ucy5zaGFkaW5nTW9kZWwgPSBzdGRNYXQuc2hhZGluZ01vZGVsO1xuICAgICAgICBvcHRpb25zLmZyZXNuZWxNb2RlbCA9IHN0ZE1hdC5mcmVzbmVsTW9kZWw7XG4gICAgICAgIG9wdGlvbnMucGFja2VkTm9ybWFsID0gaXNQYWNrZWROb3JtYWxNYXA7XG4gICAgICAgIG9wdGlvbnMuZmFzdFRibiA9IHN0ZE1hdC5mYXN0VGJuO1xuICAgICAgICBvcHRpb25zLmN1YmVNYXBQcm9qZWN0aW9uID0gc3RkTWF0LmN1YmVNYXBQcm9qZWN0aW9uO1xuICAgICAgICBvcHRpb25zLmN1c3RvbUZyYWdtZW50U2hhZGVyID0gc3RkTWF0LmN1c3RvbUZyYWdtZW50U2hhZGVyO1xuICAgICAgICBvcHRpb25zLnJlZnJhY3Rpb24gPSAoc3RkTWF0LnJlZnJhY3Rpb24gfHwgISFzdGRNYXQucmVmcmFjdGlvbk1hcCkgJiYgKHN0ZE1hdC51c2VEeW5hbWljUmVmcmFjdGlvbiB8fCAhIW9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSk7XG4gICAgICAgIG9wdGlvbnMucmVmcmFjdGlvblRpbnQgPSAoc3RkTWF0LnJlZnJhY3Rpb24gIT09IDEuMCkgPyAxIDogMDtcbiAgICAgICAgb3B0aW9ucy51c2VEeW5hbWljUmVmcmFjdGlvbiA9IHN0ZE1hdC51c2VEeW5hbWljUmVmcmFjdGlvbjtcbiAgICAgICAgb3B0aW9ucy5yZWZyYWN0aW9uSW5kZXhUaW50ID0gKHN0ZE1hdC5yZWZyYWN0aW9uSW5kZXggIT09IDEuMCAvIDEuNSkgPyAxIDogMDtcbiAgICAgICAgb3B0aW9ucy50aGlja25lc3NUaW50ID0gKHN0ZE1hdC51c2VEeW5hbWljUmVmcmFjdGlvbiAmJiBzdGRNYXQudGhpY2tuZXNzICE9PSAxLjApID8gMSA6IDA7XG4gICAgICAgIG9wdGlvbnMudXNlTWV0YWxuZXNzID0gc3RkTWF0LnVzZU1ldGFsbmVzcztcbiAgICAgICAgb3B0aW9ucy5zcGVjdWxhckVuY29kaW5nID0gc3RkTWF0LnNwZWN1bGFyRW5jb2RpbmcgfHwgJ2xpbmVhcic7XG4gICAgICAgIG9wdGlvbnMuc2hlZW5FbmNvZGluZyA9IHN0ZE1hdC5zaGVlbkVuY29kaW5nIHx8ICdsaW5lYXInO1xuICAgICAgICBvcHRpb25zLmVuYWJsZUdHWFNwZWN1bGFyID0gc3RkTWF0LmVuYWJsZUdHWFNwZWN1bGFyO1xuICAgICAgICBvcHRpb25zLm1zZGYgPSAhIXN0ZE1hdC5tc2RmTWFwO1xuICAgICAgICBvcHRpb25zLm1zZGZUZXh0QXR0cmlidXRlID0gISFzdGRNYXQubXNkZlRleHRBdHRyaWJ1dGU7XG4gICAgICAgIG9wdGlvbnMudHdvU2lkZWRMaWdodGluZyA9IHN0ZE1hdC50d29TaWRlZExpZ2h0aW5nO1xuICAgICAgICBvcHRpb25zLnBpeGVsU25hcCA9IHN0ZE1hdC5waXhlbFNuYXA7XG4gICAgICAgIG9wdGlvbnMuYW9NYXBVdiA9IHN0ZE1hdC5hb1V2U2V0OyAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eVxuICAgICAgICBvcHRpb25zLmRpZmZ1c2VEZXRhaWwgPSAhIXN0ZE1hdC5kaWZmdXNlTWFwO1xuICAgICAgICBvcHRpb25zLm5vcm1hbERldGFpbCA9ICEhc3RkTWF0Lm5vcm1hbE1hcDtcbiAgICAgICAgb3B0aW9ucy5kaWZmdXNlRGV0YWlsTW9kZSA9IHN0ZE1hdC5kaWZmdXNlRGV0YWlsTW9kZTtcbiAgICAgICAgb3B0aW9ucy5kZXRhaWxNb2RlcyA9ICEhb3B0aW9ucy5kaWZmdXNlRGV0YWlsO1xuICAgICAgICBvcHRpb25zLmNsZWFyQ29hdCA9ICEhc3RkTWF0LmNsZWFyQ29hdDtcbiAgICAgICAgb3B0aW9ucy5jbGVhckNvYXRUaW50ID0gKHN0ZE1hdC5jbGVhckNvYXQgIT09IDEuMCkgPyAxIDogMDtcbiAgICAgICAgb3B0aW9ucy5jbGVhckNvYXRHbG9zc2luZXNzID0gISFzdGRNYXQuY2xlYXJDb2F0R2xvc3NpbmVzcztcbiAgICAgICAgb3B0aW9ucy5jbGVhckNvYXRHbG9zc1RpbnQgPSAoc3RkTWF0LmNsZWFyQ29hdEdsb3NzaW5lc3MgIT09IDEuMCkgPyAxIDogMDtcblxuICAgICAgICBvcHRpb25zLmlyaWRlc2NlbmNlID0gc3RkTWF0LnVzZUlyaWRlc2NlbmNlICYmIHN0ZE1hdC5pcmlkZXNjZW5jZSAhPT0gMC4wO1xuICAgICAgICBvcHRpb25zLmlyaWRlc2NlbmNlVGludCA9IHN0ZE1hdC5pcmlkZXNjZW5jZSAhPT0gMS4wID8gMSA6IDA7XG5cbiAgICAgICAgb3B0aW9ucy5zaGVlbiA9IHN0ZE1hdC51c2VTaGVlbjtcbiAgICAgICAgb3B0aW9ucy5zaGVlblRpbnQgPSAoc3RkTWF0LnVzZVNoZWVuICYmIG5vdFdoaXRlKHN0ZE1hdC5zaGVlbikpID8gMiA6IDA7XG4gICAgICAgIG9wdGlvbnMuc2hlZW5HbG9zc2luZXNzVGludCA9IDE7XG4gICAgfVxuXG4gICAgX3VwZGF0ZUVudk9wdGlvbnMob3B0aW9ucywgc3RkTWF0LCBzY2VuZSkge1xuICAgICAgICBvcHRpb25zLmZvZyA9IHN0ZE1hdC51c2VGb2cgPyBzY2VuZS5mb2cgOiAnbm9uZSc7XG4gICAgICAgIG9wdGlvbnMuZ2FtbWEgPSBzdGRNYXQudXNlR2FtbWFUb25lbWFwID8gc2NlbmUuZ2FtbWFDb3JyZWN0aW9uIDogR0FNTUFfTk9ORTtcbiAgICAgICAgb3B0aW9ucy50b25lTWFwID0gc3RkTWF0LnVzZUdhbW1hVG9uZW1hcCA/IHNjZW5lLnRvbmVNYXBwaW5nIDogLTE7XG4gICAgICAgIG9wdGlvbnMuZml4U2VhbXMgPSAoc3RkTWF0LmN1YmVNYXAgPyBzdGRNYXQuY3ViZU1hcC5maXhDdWJlbWFwU2VhbXMgOiBmYWxzZSk7XG5cbiAgICAgICAgY29uc3QgaXNQaG9uZyA9IHN0ZE1hdC5zaGFkaW5nTW9kZWwgPT09IFNQRUNVTEFSX1BIT05HO1xuXG4gICAgICAgIGxldCB1c2luZ1NjZW5lRW52ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gc291cmNlIG9mIGVudmlyb25tZW50IHJlZmxlY3Rpb25zIGlzIGFzIGZvbGxvd3M6XG4gICAgICAgIGlmIChzdGRNYXQuZW52QXRsYXMgJiYgc3RkTWF0LmN1YmVNYXAgJiYgIWlzUGhvbmcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9ICdlbnZBdGxhc0hRJztcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nID0gc3RkTWF0LmVudkF0bGFzLmVuY29kaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZE1hdC5lbnZBdGxhcyAmJiAhaXNQaG9uZykge1xuICAgICAgICAgICAgb3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID0gJ2VudkF0bGFzJztcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nID0gc3RkTWF0LmVudkF0bGFzLmVuY29kaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZE1hdC5jdWJlTWFwKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPSAnY3ViZU1hcCc7XG4gICAgICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZyA9IHN0ZE1hdC5jdWJlTWFwLmVuY29kaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZE1hdC5zcGhlcmVNYXApIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9ICdzcGhlcmVNYXAnO1xuICAgICAgICAgICAgb3B0aW9ucy5yZWZsZWN0aW9uRW5jb2RpbmcgPSBzdGRNYXQuc3BoZXJlTWFwLmVuY29kaW5nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0ZE1hdC51c2VTa3lib3ggJiYgc2NlbmUuZW52QXRsYXMgJiYgc2NlbmUuc2t5Ym94ICYmICFpc1Bob25nKSB7XG4gICAgICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25Tb3VyY2UgPSAnZW52QXRsYXNIUSc7XG4gICAgICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZyA9IHNjZW5lLmVudkF0bGFzLmVuY29kaW5nO1xuICAgICAgICAgICAgdXNpbmdTY2VuZUVudiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RkTWF0LnVzZVNreWJveCAmJiBzY2VuZS5lbnZBdGxhcyAmJiAhaXNQaG9uZykge1xuICAgICAgICAgICAgb3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID0gJ2VudkF0bGFzJztcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvbkVuY29kaW5nID0gc2NlbmUuZW52QXRsYXMuZW5jb2Rpbmc7XG4gICAgICAgICAgICB1c2luZ1NjZW5lRW52ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGRNYXQudXNlU2t5Ym94ICYmIHNjZW5lLnNreWJveCkge1xuICAgICAgICAgICAgb3B0aW9ucy5yZWZsZWN0aW9uU291cmNlID0gJ2N1YmVNYXAnO1xuICAgICAgICAgICAgb3B0aW9ucy5yZWZsZWN0aW9uRW5jb2RpbmcgPSBzY2VuZS5za3lib3guZW5jb2Rpbmc7XG4gICAgICAgICAgICB1c2luZ1NjZW5lRW52ID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMucmVmbGVjdGlvblNvdXJjZSA9IG51bGw7XG4gICAgICAgICAgICBvcHRpb25zLnJlZmxlY3Rpb25FbmNvZGluZyA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzb3VyY2Ugb2YgZW52aXJvbm1lbnQgYW1iaWVudCBpcyBhcyBmb2xsb3dzOlxuICAgICAgICBpZiAoc3RkTWF0LmFtYmllbnRTSCAmJiAhaXNQaG9uZykge1xuICAgICAgICAgICAgb3B0aW9ucy5hbWJpZW50U291cmNlID0gJ2FtYmllbnRTSCc7XG4gICAgICAgICAgICBvcHRpb25zLmFtYmllbnRFbmNvZGluZyA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlbnZBdGxhcyA9IHN0ZE1hdC5lbnZBdGxhcyB8fCAoc3RkTWF0LnVzZVNreWJveCAmJiBzY2VuZS5lbnZBdGxhcyA/IHNjZW5lLmVudkF0bGFzIDogbnVsbCk7XG4gICAgICAgICAgICBpZiAoZW52QXRsYXMgJiYgIWlzUGhvbmcpIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmFtYmllbnRTb3VyY2UgPSAnZW52QXRsYXMnO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYW1iaWVudEVuY29kaW5nID0gZW52QXRsYXMuZW5jb2Rpbmc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbnMuYW1iaWVudFNvdXJjZSA9ICdjb25zdGFudCc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5hbWJpZW50RW5jb2RpbmcgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETzogYWRkIGEgdGVzdCBmb3IgaWYgbm9uIHNreWJveCBjdWJlbWFwcyBoYXZlIHJvdGF0aW9uICh3aGVuIHRoaXMgaXMgc3VwcG9ydGVkKSAtIGZvciBub3cgYXNzdW1lIG5vIG5vbi1za3lib3ggY3ViZW1hcCByb3RhdGlvblxuICAgICAgICBvcHRpb25zLnNreWJveEludGVuc2l0eSA9IHVzaW5nU2NlbmVFbnYgJiYgKHNjZW5lLnNreWJveEludGVuc2l0eSAhPT0gMSB8fCBzY2VuZS5waHlzaWNhbFVuaXRzKTtcbiAgICAgICAgb3B0aW9ucy51c2VDdWJlTWFwUm90YXRpb24gPSB1c2luZ1NjZW5lRW52ICYmIHNjZW5lLnNreWJveFJvdGF0aW9uICYmICFzY2VuZS5za3lib3hSb3RhdGlvbi5lcXVhbHMoUXVhdC5JREVOVElUWSk7XG4gICAgfVxuXG4gICAgX3VwZGF0ZUxpZ2h0T3B0aW9ucyhvcHRpb25zLCBzdGRNYXQsIG9iakRlZnMsIHNvcnRlZExpZ2h0cywgc3RhdGljTGlnaHRMaXN0KSB7XG4gICAgICAgIG9wdGlvbnMubGlnaHRNYXAgPSBmYWxzZTtcbiAgICAgICAgb3B0aW9ucy5saWdodE1hcENoYW5uZWwgPSAnJztcbiAgICAgICAgb3B0aW9ucy5saWdodE1hcFV2ID0gMDtcbiAgICAgICAgb3B0aW9ucy5saWdodE1hcFRyYW5zZm9ybSA9IDA7XG4gICAgICAgIG9wdGlvbnMubGlnaHRNYXBXaXRob3V0QW1iaWVudCA9IGZhbHNlO1xuICAgICAgICBvcHRpb25zLmRpckxpZ2h0TWFwID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKG9iakRlZnMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMubm9TaGFkb3cgPSAob2JqRGVmcyAmIFNIQURFUkRFRl9OT1NIQURPVykgIT09IDA7XG5cbiAgICAgICAgICAgIGlmICgob2JqRGVmcyAmIFNIQURFUkRFRl9MTSkgIT09IDApIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxpZ2h0TWFwRW5jb2RpbmcgPSAncmdibSc7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5saWdodE1hcCA9IHRydWU7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5saWdodE1hcENoYW5uZWwgPSAncmdiJztcbiAgICAgICAgICAgICAgICBvcHRpb25zLmxpZ2h0TWFwVXYgPSAxO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubGlnaHRNYXBUcmFuc2Zvcm0gPSAwO1xuICAgICAgICAgICAgICAgIG9wdGlvbnMubGlnaHRNYXBXaXRob3V0QW1iaWVudCA9ICFzdGRNYXQubGlnaHRNYXA7XG4gICAgICAgICAgICAgICAgaWYgKChvYmpEZWZzICYgU0hBREVSREVGX0RJUkxNKSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLmRpckxpZ2h0TWFwID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBpZiBsaWdodG1hcHMgY29udGFpbiBiYWtlZCBhbWJpZW50IGxpZ2h0LCBkaXNhYmxlIHJlYWwtdGltZSBhbWJpZW50IGxpZ2h0XG4gICAgICAgICAgICAgICAgaWYgKChvYmpEZWZzICYgU0hBREVSREVGX0xNQU1CSUVOVCkgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5saWdodE1hcFdpdGhvdXRBbWJpZW50ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0ZE1hdC51c2VMaWdodGluZykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHRzRmlsdGVyZWQgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IG1hc2sgPSBvYmpEZWZzID8gKG9iakRlZnMgPj4gMTYpIDogTUFTS19BRkZFQ1RfRFlOQU1JQztcblxuICAgICAgICAgICAgLy8gbWFzayB0byBzZWxlY3QgbGlnaHRzIChkeW5hbWljIHZzIGxpZ2h0bWFwcGVkKSB3aGVuIHVzaW5nIGNsdXN0ZXJlZCBsaWdodGluZ1xuICAgICAgICAgICAgb3B0aW9ucy5saWdodE1hc2tEeW5hbWljID0gISEobWFzayAmIE1BU0tfQUZGRUNUX0RZTkFNSUMpO1xuXG4gICAgICAgICAgICBpZiAoc29ydGVkTGlnaHRzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdExpZ2h0cyhMSUdIVFRZUEVfRElSRUNUSU9OQUwsIHNvcnRlZExpZ2h0c1tMSUdIVFRZUEVfRElSRUNUSU9OQUxdLCBsaWdodHNGaWx0ZXJlZCwgbWFzayk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdExpZ2h0cyhMSUdIVFRZUEVfT01OSSwgc29ydGVkTGlnaHRzW0xJR0hUVFlQRV9PTU5JXSwgbGlnaHRzRmlsdGVyZWQsIG1hc2ssIHN0YXRpY0xpZ2h0TGlzdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY29sbGVjdExpZ2h0cyhMSUdIVFRZUEVfU1BPVCwgc29ydGVkTGlnaHRzW0xJR0hUVFlQRV9TUE9UXSwgbGlnaHRzRmlsdGVyZWQsIG1hc2ssIHN0YXRpY0xpZ2h0TGlzdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcHRpb25zLmxpZ2h0cyA9IGxpZ2h0c0ZpbHRlcmVkO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy5saWdodHMgPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRpb25zLmxpZ2h0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMubm9TaGFkb3cgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3VwZGF0ZVRleE9wdGlvbnMob3B0aW9ucywgc3RkTWF0LCBwLCBoYXNVdjAsIGhhc1V2MSwgaGFzVmNvbG9yLCBtaW5pbWFsT3B0aW9ucywgdW5pcXVlVGV4dHVyZU1hcCkge1xuICAgICAgICBjb25zdCBtbmFtZSA9IHAgKyAnTWFwJztcbiAgICAgICAgY29uc3Qgdm5hbWUgPSBwICsgJ1ZlcnRleENvbG9yJztcbiAgICAgICAgY29uc3QgdmNuYW1lID0gcCArICdWZXJ0ZXhDb2xvckNoYW5uZWwnO1xuICAgICAgICBjb25zdCBjbmFtZSA9IG1uYW1lICsgJ0NoYW5uZWwnO1xuICAgICAgICBjb25zdCB0bmFtZSA9IG1uYW1lICsgJ1RyYW5zZm9ybSc7XG4gICAgICAgIGNvbnN0IHVuYW1lID0gbW5hbWUgKyAnVXYnO1xuICAgICAgICBjb25zdCBpbmFtZSA9IG1uYW1lICsgJ0lkZW50aWZpZXInO1xuXG4gICAgICAgIC8vIEF2b2lkIG92ZXJyaWRpbmcgcHJldmlvdXMgbGlnaHRNYXAgcHJvcGVydGllc1xuICAgICAgICBpZiAocCAhPT0gJ2xpZ2h0Jykge1xuICAgICAgICAgICAgb3B0aW9uc1ttbmFtZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIG9wdGlvbnNbY25hbWVdID0gJyc7XG4gICAgICAgICAgICBvcHRpb25zW3RuYW1lXSA9IDA7XG4gICAgICAgICAgICBvcHRpb25zW3VuYW1lXSA9IDA7XG4gICAgICAgICAgICBvcHRpb25zW2luYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zW3ZuYW1lXSA9IGZhbHNlO1xuICAgICAgICBvcHRpb25zW3ZjbmFtZV0gPSAnJztcblxuICAgICAgICBjb25zdCBpc09wYWNpdHkgPSBwID09PSAnb3BhY2l0eSc7XG4gICAgICAgIGlmIChpc09wYWNpdHkgJiYgc3RkTWF0LmJsZW5kVHlwZSA9PT0gQkxFTkRfTk9ORSAmJiBzdGRNYXQuYWxwaGFUZXN0ID09PSAwLjAgJiYgIXN0ZE1hdC5hbHBoYVRvQ292ZXJhZ2UpXG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgaWYgKCFtaW5pbWFsT3B0aW9ucyB8fCBpc09wYWNpdHkpIHtcbiAgICAgICAgICAgIGlmIChwICE9PSAnaGVpZ2h0JyAmJiBzdGRNYXRbdm5hbWVdKSB7XG4gICAgICAgICAgICAgICAgaWYgKGhhc1Zjb2xvcikge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW3ZuYW1lXSA9IHN0ZE1hdFt2bmFtZV07XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbdmNuYW1lXSA9IHN0ZE1hdFt2Y25hbWVdO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnZlcnRleENvbG9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0ZE1hdFttbmFtZV0pIHtcbiAgICAgICAgICAgICAgICBsZXQgYWxsb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmIChzdGRNYXRbdW5hbWVdID09PSAwICYmICFoYXNVdjApIGFsbG93ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHN0ZE1hdFt1bmFtZV0gPT09IDEgJiYgIWhhc1V2MSkgYWxsb3cgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoYWxsb3cpIHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgYW4gaW50ZXJtZWRpYXRlIG1hcCBiZXR3ZWVuIHRoZSB0ZXh0dXJlcyBhbmQgdGhlaXIgc2xvdHNcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoZSB1bmlxdWUgdGV4dHVyZSBtYXBwaW5nIGlzbid0IGRlcGVuZGVudCBvbiB0aGUgdGV4dHVyZSBpZFxuICAgICAgICAgICAgICAgICAgICAvLyBhcyB0aGF0IHdpbGwgY2hhbmdlIHdoZW4gdGV4dHVyZXMgYXJlIGNoYW5nZWQsIGV2ZW4gaWYgdGhlIHNoYXJpbmcgaXMgdGhlIHNhbWVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFwSWQgPSBzdGRNYXRbbW5hbWVdLmlkO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaWRlbnRpZmllciA9IHVuaXF1ZVRleHR1cmVNYXBbbWFwSWRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWRlbnRpZmllciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlxdWVUZXh0dXJlTWFwW21hcElkXSA9IHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVudGlmaWVyID0gcDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbbW5hbWVdID0gISFzdGRNYXRbbW5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2luYW1lXSA9IGlkZW50aWZpZXI7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbdG5hbWVdID0gdGhpcy5fZ2V0TWFwVHJhbnNmb3JtSUQoc3RkTWF0LmdldFVuaWZvcm0odG5hbWUpLCBzdGRNYXRbdW5hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tjbmFtZV0gPSBzdGRNYXRbY25hbWVdO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW3VuYW1lXSA9IHN0ZE1hdFt1bmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX2NvbGxlY3RMaWdodHMobFR5cGUsIGxpZ2h0cywgbGlnaHRzRmlsdGVyZWQsIG1hc2ssIHN0YXRpY0xpZ2h0TGlzdCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgbGlnaHQgPSBsaWdodHNbaV07XG4gICAgICAgICAgICBpZiAobGlnaHQuZW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIGlmIChsaWdodC5tYXNrICYgbWFzaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobFR5cGUgIT09IExJR0hUVFlQRV9ESVJFQ1RJT05BTCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpZ2h0LmlzU3RhdGljKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbGlnaHRzRmlsdGVyZWQucHVzaChsaWdodCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRpY0xpZ2h0TGlzdCkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGF0aWNMaWdodExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsaWdodCA9IHN0YXRpY0xpZ2h0TGlzdFtpXTtcbiAgICAgICAgICAgICAgICBpZiAobGlnaHQuX3R5cGUgPT09IGxUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0c0ZpbHRlcmVkLnB1c2gobGlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9nZXRNYXBUcmFuc2Zvcm1JRCh4Zm9ybSwgdXYpIHtcbiAgICAgICAgaWYgKCF4Zm9ybSkgcmV0dXJuIDA7XG5cbiAgICAgICAgbGV0IHhmb3JtcyA9IHRoaXMuX21hcFhGb3Jtc1t1dl07XG4gICAgICAgIGlmICgheGZvcm1zKSB7XG4gICAgICAgICAgICB4Zm9ybXMgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX21hcFhGb3Jtc1t1dl0gPSB4Zm9ybXM7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHhmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFycmF5c0VxdWFsKHhmb3Jtc1tpXVswXS52YWx1ZSwgeGZvcm1bMF0udmFsdWUpICYmXG4gICAgICAgICAgICAgICAgYXJyYXlzRXF1YWwoeGZvcm1zW2ldWzFdLnZhbHVlLCB4Zm9ybVsxXS52YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaSArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geGZvcm1zLnB1c2goeGZvcm0pO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgU3RhbmRhcmRNYXRlcmlhbE9wdGlvbnNCdWlsZGVyIH07XG4iXSwibmFtZXMiOlsiYXJyYXlzRXF1YWwiLCJhIiwiYiIsImxlbmd0aCIsImkiLCJub3RXaGl0ZSIsImNvbG9yIiwiciIsImciLCJub3RCbGFjayIsIlN0YW5kYXJkTWF0ZXJpYWxPcHRpb25zQnVpbGRlciIsImNvbnN0cnVjdG9yIiwiX21hcFhGb3JtcyIsInVwZGF0ZU1pblJlZiIsIm9wdGlvbnMiLCJzY2VuZSIsInN0ZE1hdCIsIm9iakRlZnMiLCJzdGF0aWNMaWdodExpc3QiLCJwYXNzIiwic29ydGVkTGlnaHRzIiwiX3VwZGF0ZVNoYXJlZE9wdGlvbnMiLCJfdXBkYXRlTWluT3B0aW9ucyIsIl91cGRhdGVVVk9wdGlvbnMiLCJ1cGRhdGVSZWYiLCJfdXBkYXRlRW52T3B0aW9ucyIsIl91cGRhdGVNYXRlcmlhbE9wdGlvbnMiLCJTSEFERVJfRk9SV0FSREhEUiIsImdhbW1hIiwiR0FNTUFfU1JHQkhEUiIsInRvbmVNYXAiLCJUT05FTUFQX0xJTkVBUiIsImhhc1RhbmdlbnRzIiwiU0hBREVSREVGX1RBTkdFTlRTIiwiX3VwZGF0ZUxpZ2h0T3B0aW9ucyIsImFscGhhVGVzdCIsImZvcmNlRnJhZ21lbnRQcmVjaXNpb24iLCJjaHVua3MiLCJibGVuZFR5cGUiLCJmb3JjZVV2MSIsInNlcGFyYXRlQW1iaWVudCIsInNjcmVlblNwYWNlIiwiU0hBREVSREVGX1NDUkVFTlNQQUNFIiwic2tpbiIsIlNIQURFUkRFRl9TS0lOIiwidXNlSW5zdGFuY2luZyIsIlNIQURFUkRFRl9JTlNUQU5DSU5HIiwidXNlTW9ycGhQb3NpdGlvbiIsIlNIQURFUkRFRl9NT1JQSF9QT1NJVElPTiIsInVzZU1vcnBoTm9ybWFsIiwiU0hBREVSREVGX01PUlBIX05PUk1BTCIsInVzZU1vcnBoVGV4dHVyZUJhc2VkIiwiU0hBREVSREVGX01PUlBIX1RFWFRVUkVfQkFTRUQiLCJuaW5lU2xpY2VkTW9kZSIsImNsdXN0ZXJlZExpZ2h0aW5nRW5hYmxlZCIsInVzZUxpZ2h0aW5nIiwiY2x1c3RlcmVkTGlnaHRpbmdDb29raWVzRW5hYmxlZCIsImxpZ2h0aW5nIiwiY29va2llc0VuYWJsZWQiLCJjbHVzdGVyZWRMaWdodGluZ1NoYWRvd3NFbmFibGVkIiwic2hhZG93c0VuYWJsZWQiLCJjbHVzdGVyZWRMaWdodGluZ1NoYWRvd1R5cGUiLCJzaGFkb3dUeXBlIiwiY2x1c3RlcmVkTGlnaHRpbmdBcmVhTGlnaHRzRW5hYmxlZCIsImFyZWFMaWdodHNFbmFibGVkIiwibWluaW1hbE9wdGlvbnMiLCJoYXNVdjAiLCJoYXNVdjEiLCJoYXNWY29sb3IiLCJTSEFERVJERUZfVVYwIiwiU0hBREVSREVGX1VWMSIsIlNIQURFUkRFRl9WQ09MT1IiLCJ2ZXJ0ZXhDb2xvcnMiLCJ1bmlxdWVUZXh0dXJlTWFwIiwicCIsIl9tYXRUZXgyRCIsIl91cGRhdGVUZXhPcHRpb25zIiwib3BhY2l0eVRpbnQiLCJvcGFjaXR5IiwiQkxFTkRfTk9ORSIsImxpZ2h0cyIsImRpZmZ1c2VUaW50IiwiZGlmZnVzZU1hcCIsImRpZmZ1c2VWZXJ0ZXhDb2xvciIsImRpZmZ1c2UiLCJ1c2VTcGVjdWxhciIsInVzZU1ldGFsbmVzcyIsInNwZWN1bGFyTWFwIiwic3BoZXJlTWFwIiwiY3ViZU1hcCIsInNwZWN1bGFyIiwic3BlY3VsYXJpdHlGYWN0b3IiLCJlbmFibGVHR1hTcGVjdWxhciIsImNsZWFyQ29hdCIsInVzZVNwZWN1bGFyQ29sb3IiLCJ1c2VNZXRhbG5lc3NTcGVjdWxhckNvbG9yIiwic3BlY3VsYXJUaW50Iiwic3BlY3VsYXJWZXJ0ZXhDb2xvciIsInNwZWN1bGFyaXR5RmFjdG9yVGludCIsInNwZWN1bGFyaXR5RmFjdG9yTWFwIiwiZW1pc3NpdmVUaW50Q29sb3IiLCJlbWlzc2l2ZU1hcCIsImVtaXNzaXZlIiwiZW1pc3NpdmVUaW50IiwiZW1pc3NpdmVUaW50SW50ZW5zaXR5IiwiZW1pc3NpdmVJbnRlbnNpdHkiLCJpc1BhY2tlZE5vcm1hbE1hcCIsIm5vcm1hbE1hcCIsImZvcm1hdCIsIlBJWEVMRk9STUFUX0RYVDUiLCJ0eXBlIiwiVEVYVFVSRVRZUEVfU1dJWlpMRUdHR1IiLCJibGVuZE1hcHNXaXRoQ29sb3JzIiwiYW1iaWVudFRpbnQiLCJ1c2VTcGVjdWxhcml0eUZhY3RvciIsIm1ldGFsbmVzc1RpbnQiLCJtZXRhbG5lc3MiLCJnbG9zc1RpbnQiLCJhbHBoYVRvQ292ZXJhZ2UiLCJub3JtYWxpemVOb3JtYWxNYXAiLCJhbWJpZW50U0giLCJkaWZmdXNlRW5jb2RpbmciLCJlbmNvZGluZyIsImRpZmZ1c2VEZXRhaWxFbmNvZGluZyIsImRpZmZ1c2VEZXRhaWxNYXAiLCJlbWlzc2l2ZUVuY29kaW5nIiwibGlnaHRNYXBFbmNvZGluZyIsImxpZ2h0TWFwIiwiY29uc2VydmVFbmVyZ3kiLCJvcGFjaXR5RmFkZXNTcGVjdWxhciIsImFscGhhRmFkZSIsIm9jY2x1ZGVTcGVjdWxhciIsIm9jY2x1ZGVTcGVjdWxhckZsb2F0Iiwib2NjbHVkZVNwZWN1bGFySW50ZW5zaXR5Iiwib2NjbHVkZURpcmVjdCIsInNoYWRpbmdNb2RlbCIsImZyZXNuZWxNb2RlbCIsInBhY2tlZE5vcm1hbCIsImZhc3RUYm4iLCJjdWJlTWFwUHJvamVjdGlvbiIsImN1c3RvbUZyYWdtZW50U2hhZGVyIiwicmVmcmFjdGlvbiIsInJlZnJhY3Rpb25NYXAiLCJ1c2VEeW5hbWljUmVmcmFjdGlvbiIsInJlZmxlY3Rpb25Tb3VyY2UiLCJyZWZyYWN0aW9uVGludCIsInJlZnJhY3Rpb25JbmRleFRpbnQiLCJyZWZyYWN0aW9uSW5kZXgiLCJ0aGlja25lc3NUaW50IiwidGhpY2tuZXNzIiwic3BlY3VsYXJFbmNvZGluZyIsInNoZWVuRW5jb2RpbmciLCJtc2RmIiwibXNkZk1hcCIsIm1zZGZUZXh0QXR0cmlidXRlIiwidHdvU2lkZWRMaWdodGluZyIsInBpeGVsU25hcCIsImFvTWFwVXYiLCJhb1V2U2V0IiwiZGlmZnVzZURldGFpbCIsIm5vcm1hbERldGFpbCIsImRpZmZ1c2VEZXRhaWxNb2RlIiwiZGV0YWlsTW9kZXMiLCJjbGVhckNvYXRUaW50IiwiY2xlYXJDb2F0R2xvc3NpbmVzcyIsImNsZWFyQ29hdEdsb3NzVGludCIsImlyaWRlc2NlbmNlIiwidXNlSXJpZGVzY2VuY2UiLCJpcmlkZXNjZW5jZVRpbnQiLCJzaGVlbiIsInVzZVNoZWVuIiwic2hlZW5UaW50Iiwic2hlZW5HbG9zc2luZXNzVGludCIsImZvZyIsInVzZUZvZyIsInVzZUdhbW1hVG9uZW1hcCIsImdhbW1hQ29ycmVjdGlvbiIsIkdBTU1BX05PTkUiLCJ0b25lTWFwcGluZyIsImZpeFNlYW1zIiwiZml4Q3ViZW1hcFNlYW1zIiwiaXNQaG9uZyIsIlNQRUNVTEFSX1BIT05HIiwidXNpbmdTY2VuZUVudiIsImVudkF0bGFzIiwicmVmbGVjdGlvbkVuY29kaW5nIiwidXNlU2t5Ym94Iiwic2t5Ym94IiwiYW1iaWVudFNvdXJjZSIsImFtYmllbnRFbmNvZGluZyIsInNreWJveEludGVuc2l0eSIsInBoeXNpY2FsVW5pdHMiLCJ1c2VDdWJlTWFwUm90YXRpb24iLCJza3lib3hSb3RhdGlvbiIsImVxdWFscyIsIlF1YXQiLCJJREVOVElUWSIsImxpZ2h0TWFwQ2hhbm5lbCIsImxpZ2h0TWFwVXYiLCJsaWdodE1hcFRyYW5zZm9ybSIsImxpZ2h0TWFwV2l0aG91dEFtYmllbnQiLCJkaXJMaWdodE1hcCIsIm5vU2hhZG93IiwiU0hBREVSREVGX05PU0hBRE9XIiwiU0hBREVSREVGX0xNIiwiU0hBREVSREVGX0RJUkxNIiwiU0hBREVSREVGX0xNQU1CSUVOVCIsImxpZ2h0c0ZpbHRlcmVkIiwibWFzayIsIk1BU0tfQUZGRUNUX0RZTkFNSUMiLCJsaWdodE1hc2tEeW5hbWljIiwiX2NvbGxlY3RMaWdodHMiLCJMSUdIVFRZUEVfRElSRUNUSU9OQUwiLCJMSUdIVFRZUEVfT01OSSIsIkxJR0hUVFlQRV9TUE9UIiwibW5hbWUiLCJ2bmFtZSIsInZjbmFtZSIsImNuYW1lIiwidG5hbWUiLCJ1bmFtZSIsImluYW1lIiwidW5kZWZpbmVkIiwiaXNPcGFjaXR5IiwiYWxsb3ciLCJtYXBJZCIsImlkIiwiaWRlbnRpZmllciIsIl9nZXRNYXBUcmFuc2Zvcm1JRCIsImdldFVuaWZvcm0iLCJsVHlwZSIsImxpZ2h0IiwiZW5hYmxlZCIsImlzU3RhdGljIiwicHVzaCIsIl90eXBlIiwieGZvcm0iLCJ1diIsInhmb3JtcyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBbUJBLE1BQU1BLFdBQVcsR0FBRyxDQUFDQyxDQUFDLEVBQUVDLENBQUMsS0FBSztBQUMxQixFQUFBLElBQUlELENBQUMsQ0FBQ0UsTUFBTSxLQUFLRCxDQUFDLENBQUNDLE1BQU0sRUFBRTtBQUN2QixJQUFBLE9BQU8sS0FBSyxDQUFBO0FBQ2hCLEdBQUE7QUFDQSxFQUFBLEtBQUssSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSCxDQUFDLENBQUNFLE1BQU0sRUFBRSxFQUFFQyxDQUFDLEVB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
