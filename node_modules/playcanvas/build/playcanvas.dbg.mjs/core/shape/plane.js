/**
 * @license
 * PlayCanvas Engine v1.58.0 revision 6672f604c (DEBUG PROFILER)
 * Copyright 2011-2022 PlayCanvas Ltd. All rights reserved.
 */
import { Vec3 } from '../math/vec3.js';

const tmpVecA = new Vec3();

class Plane {
  constructor(point = new Vec3(), normal = new Vec3(0, 0, 1)) {
    this.point = point;
    this.normal = normal;
  }

  intersectsLine(start, end, point) {
    const d = -this.normal.dot(this.point);
    const d0 = this.normal.dot(start) + d;
    const d1 = this.normal.dot(end) + d;
    const t = d0 / (d0 - d1);
    const intersects = t >= 0 && t <= 1;
    if (intersects && point) point.lerp(start, end, t);
    return intersects;
  }

  intersectsRay(ray, point) {
    const pointToOrigin = tmpVecA.sub2(this.point, ray.origin);
    const t = this.normal.dot(pointToOrigin) / this.normal.dot(ray.direction);
    const intersects = t >= 0;
    if (intersects && point) point.copy(ray.direction).mulScalar(t).add(ray.origin);
    return intersects;
  }
}

export { Plane };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGxhbmUuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb3JlL3NoYXBlL3BsYW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFZlYzMgfSBmcm9tICcuLi9tYXRoL3ZlYzMuanMnO1xuXG4vKiogQHR5cGVkZWYge2ltcG9ydCgnLi9yYXkuanMnKS5SYXl9IFJheSAqL1xuXG5jb25zdCB0bXBWZWNBID0gbmV3IFZlYzMoKTtcblxuLyoqXG4gKiBBbiBpbmZpbml0ZSBwbGFuZS5cbiAqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIFBsYW5lIHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgUGxhbmUgaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1ZlYzN9IFtwb2ludF0gLSBQb2ludCBwb3NpdGlvbiBvbiB0aGUgcGxhbmUuIFRoZSBjb25zdHJ1Y3RvciB0YWtlcyBhIHJlZmVyZW5jZSBvZlxuICAgICAqIHRoaXMgcGFyYW1ldGVyLlxuICAgICAqIEBwYXJhbSB7VmVjM30gW25vcm1hbF0gLSBOb3JtYWwgb2YgdGhlIHBsYW5lLiBUaGUgY29uc3RydWN0b3IgdGFrZXMgYSByZWZlcmVuY2Ugb2YgdGhpc1xuICAgICAqIHBhcmFtZXRlci5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcihwb2ludCA9IG5ldyBWZWMzKCksIG5vcm1hbCA9IG5ldyBWZWMzKDAsIDAsIDEpKSB7XG4gICAgICAgIHRoaXMucG9pbnQgPSBwb2ludDtcbiAgICAgICAgdGhpcy5ub3JtYWwgPSBub3JtYWw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGVzdCBpZiB0aGUgcGxhbmUgaW50ZXJzZWN0cyBiZXR3ZWVuIHR3byBwb2ludHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1ZlYzN9IHN0YXJ0IC0gU3RhcnQgcG9zaXRpb24gb2YgbGluZS5cbiAgICAgKiBAcGFyYW0ge1ZlYzN9IGVuZCAtIEVuZCBwb3NpdGlvbiBvZiBsaW5lLlxuICAgICAqIEBwYXJhbSB7VmVjM30gW3BvaW50XSAtIElmIHRoZXJlIGlzIGFuIGludGVyc2VjdGlvbiwgdGhlIGludGVyc2VjdGlvbiBwb2ludCB3aWxsIGJlIGNvcGllZFxuICAgICAqIGludG8gaGVyZS5cbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGVyZSBpcyBhbiBpbnRlcnNlY3Rpb24uXG4gICAgICovXG4gICAgaW50ZXJzZWN0c0xpbmUoc3RhcnQsIGVuZCwgcG9pbnQpIHtcbiAgICAgICAgY29uc3QgZCA9IC10aGlzLm5vcm1hbC5kb3QodGhpcy5wb2ludCk7XG4gICAgICAgIGNvbnN0IGQwID0gdGhpcy5ub3JtYWwuZG90KHN0YXJ0KSArIGQ7XG4gICAgICAgIGNvbnN0IGQxID0gdGhpcy5ub3JtYWwuZG90KGVuZCkgKyBkO1xuXG4gICAgICAgIGNvbnN0IHQgPSBkMCAvIChkMCAtIGQxKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0cyA9IHQgPj0gMCAmJiB0IDw9IDE7XG4gICAgICAgIGlmIChpbnRlcnNlY3RzICYmIHBvaW50KVxuICAgICAgICAgICAgcG9pbnQubGVycChzdGFydCwgZW5kLCB0KTtcblxuICAgICAgICByZXR1cm4gaW50ZXJzZWN0cztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIGEgcmF5IGludGVyc2VjdHMgd2l0aCB0aGUgaW5maW5pdGUgcGxhbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JheX0gcmF5IC0gUmF5IHRvIHRlc3QgYWdhaW5zdCAoZGlyZWN0aW9uIG11c3QgYmUgbm9ybWFsaXplZCkuXG4gICAgICogQHBhcmFtIHtWZWMzfSBbcG9pbnRdIC0gSWYgdGhlcmUgaXMgYW4gaW50ZXJzZWN0aW9uLCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IHdpbGwgYmUgY29waWVkXG4gICAgICogaW50byBoZXJlLlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHRoZXJlIGlzIGFuIGludGVyc2VjdGlvbi5cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RzUmF5KHJheSwgcG9pbnQpIHtcbiAgICAgICAgY29uc3QgcG9pbnRUb09yaWdpbiA9IHRtcFZlY0Euc3ViMih0aGlzLnBvaW50LCByYXkub3JpZ2luKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubm9ybWFsLmRvdChwb2ludFRvT3JpZ2luKSAvIHRoaXMubm9ybWFsLmRvdChyYXkuZGlyZWN0aW9uKTtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0cyA9IHQgPj0gMDtcblxuICAgICAgICBpZiAoaW50ZXJzZWN0cyAmJiBwb2ludClcbiAgICAgICAgICAgIHBvaW50LmNvcHkocmF5LmRpcmVjdGlvbikubXVsU2NhbGFyKHQpLmFkZChyYXkub3JpZ2luKTtcblxuICAgICAgICByZXR1cm4gaW50ZXJzZWN0cztcbiAgICB9XG59XG5cbmV4cG9ydCB7IFBsYW5lIH07XG4iXSwibmFtZXMiOlsidG1wVmVjQSIsIlZlYzMiLCJQbGFuZSIsImNvbnN0cnVjdG9yIiwicG9pbnQiLCJub3JtYWwiLCJpbnRlcnNlY3RzTGluZSIsInN0YXJ0IiwiZW5kIiwiZCIsImRvdCIsImQwIiwiZDEiLCJ0IiwiaW50ZXJzZWN0cyIsImxlcnAiLCJpbnRlcnNlY3RzUmF5IiwicmF5IiwicG9pbnRUb09yaWdpbiIsInN1YjIiLCJvcmlnaW4iLCJkaXJlY3Rpb24iLCJjb3B5IiwibXVsU2NhbGFyIiwiYWRkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBSUEsTUFBTUEsT0FBTyxHQUFHLElBQUlDLElBQUksRUFBRSxDQUFBOztBQU8xQixNQUFNQyxLQUFLLENBQUM7QUFTUkMsRUFBQUEsV0FBVyxDQUFDQyxLQUFLLEdBQUcsSUFBSUgsSUFBSSxFQUFFLEVBQUVJLE1BQU0sR0FBRyxJQUFJSixJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUN4RCxJQUFJLENBQUNHLEtBQUssR0FBR0EsS0FBSyxDQUFBO0lBQ2xCLElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNLENBQUE7QUFDeEIsR0FBQTs7QUFXQUMsRUFBQUEsY0FBYyxDQUFDQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUosS0FBSyxFQUFFO0FBQzlCLElBQUEsTUFBTUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDSixNQUFNLENBQUNLLEdBQUcsQ0FBQyxJQUFJLENBQUNOLEtBQUssQ0FBQyxDQUFBO0lBQ3RDLE1BQU1PLEVBQUUsR0FBRyxJQUFJLENBQUNOLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDSCxLQUFLLENBQUMsR0FBR0UsQ0FBQyxDQUFBO0lBQ3JDLE1BQU1HLEVBQUUsR0FBRyxJQUFJLENBQUNQLE1BQU0sQ0FBQ0ssR0FBRyxDQUFDRixHQUFHLENBQUMsR0FBR0MsQ0FBQyxDQUFBO0FBRW5DLElBQUEsTUFBTUksQ0FBQyxHQUFHRixFQUFFLElBQUlBLEVBQUUsR0FBR0MsRUFBRSxDQUFDLENBQUE7SUFDeEIsTUFBTUUsVUFBVSxHQUFHRCxDQUFDLElBQUksQ0FBQyxJQUFJQSxDQUFDLElBQUksQ0FBQyxDQUFBO0FBQ25DLElBQUEsSUFBSUMsVUFBVSxJQUFJVixLQUFLLEVBQ25CQSxLQUFLLENBQUNXLElBQUksQ0FBQ1IsS0FBSyxFQUFFQyxHQUFHLEVBQUVLLENBQUMsQ0FBQyxDQUFBO0FBRTdCLElBQUEsT0FBT0MsVUFBVSxDQUFBO0FBQ3JCLEdBQUE7O0FBVUFFLEVBQUFBLGFBQWEsQ0FBQ0MsR0FBRyxFQUFFYixLQUFLLEVBQUU7QUFDdEIsSUFBQSxNQUFNYyxhQUFhLEdBQUdsQixPQUFPLENBQUNtQixJQUFJLENBQUMsSUFBSSxDQUFDZixLQUFLLEVBQUVhLEdBQUcsQ0FBQ0csTUFBTSxDQUFDLENBQUE7SUFDMUQsTUFBTVAsQ0FBQyxHQUFHLElBQUksQ0FBQ1IsTUFBTSxDQUFDSyxHQUFHLENBQUNRLGFBQWEsQ0FBQyxHQUFHLElBQUksQ0FBQ2IsTUFBTSxDQUFDSyxHQUFHLENBQUNPLEdBQUcsQ0FBQ0ksU0FBUyxDQUFDLENBQUE7QUFDekUsSUFBQSxNQUFNUCxVQUFVLEdBQUdELENBQUMsSUFBSSxDQUFDLENBQUE7SUFFekIsSUFBSUMsVUFBVSxJQUFJVixLQUFLLEVBQ25CQSxLQUFLLENBQUNrQixJQUFJLENBQUNMLEdBQUcsQ0FBQ0ksU0FBUyxDQUFDLENBQUNFLFNBQVMsQ0FBQ1YsQ0FBQyxDQUFDLENBQUNXLEdBQUcsQ0FBQ1AsR0FBRyxDQUFDRyxNQUFNLENBQUMsQ0FBQTtBQUUxRCxJQUFBLE9BQU9OLFVBQVUsQ0FBQTtBQUNyQixHQUFBO0FBQ0o7Ozs7In0=
